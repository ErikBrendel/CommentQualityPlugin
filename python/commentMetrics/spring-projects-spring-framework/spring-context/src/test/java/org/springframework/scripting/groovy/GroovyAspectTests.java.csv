commented;modifiers;parameterAmount;loc;comment;code
false;public;0;7;;@Test public void manualGroovyBeanWithUnconditionalPointcut() throws Exception {     TestService target = (TestService) scriptFactory.getScriptedObject(new ResourceScriptSource(new ClassPathResource("GroovyServiceImpl.grv", getClass()))).     testAdvice(new DefaultPointcutAdvisor(logAdvice), logAdvice, target, "GroovyServiceImpl"). }
false;public;0;9;;@Test public void manualGroovyBeanWithStaticPointcut() throws Exception {     TestService target = (TestService) scriptFactory.getScriptedObject(new ResourceScriptSource(new ClassPathResource("GroovyServiceImpl.grv", getClass()))).     AspectJExpressionPointcut pointcut = new AspectJExpressionPointcut().     pointcut.setExpression(String.format("execution(* %s.TestService+.*(..))", ClassUtils.getPackageName(getClass()))).     testAdvice(new DefaultPointcutAdvisor(pointcut, logAdvice), logAdvice, target, "GroovyServiceImpl", true). }
false;public;0;9;;@Test public void manualGroovyBeanWithDynamicPointcut() throws Exception {     TestService target = (TestService) scriptFactory.getScriptedObject(new ResourceScriptSource(new ClassPathResource("GroovyServiceImpl.grv", getClass()))).     AspectJExpressionPointcut pointcut = new AspectJExpressionPointcut().     pointcut.setExpression(String.format("@within(%s.Log)", ClassUtils.getPackageName(getClass()))).     testAdvice(new DefaultPointcutAdvisor(pointcut, logAdvice), logAdvice, target, "GroovyServiceImpl", false). }
false;public;0;9;;@Test public void manualGroovyBeanWithDynamicPointcutProxyTargetClass() throws Exception {     TestService target = (TestService) scriptFactory.getScriptedObject(new ResourceScriptSource(new ClassPathResource("GroovyServiceImpl.grv", getClass()))).     AspectJExpressionPointcut pointcut = new AspectJExpressionPointcut().     pointcut.setExpression(String.format("@within(%s.Log)", ClassUtils.getPackageName(getClass()))).     testAdvice(new DefaultPointcutAdvisor(pointcut, logAdvice), logAdvice, target, "GroovyServiceImpl", true). }
false;private;4;5;;private void testAdvice(Advisor advisor, LogUserAdvice logAdvice, TestService target, String message) throws Exception {     testAdvice(advisor, logAdvice, target, message, false). }
false;private;5;20;;private void testAdvice(Advisor advisor, LogUserAdvice logAdvice, TestService target, String message, boolean proxyTargetClass) throws Exception {     logAdvice.reset().     ProxyFactory factory = new ProxyFactory(target).     factory.setProxyTargetClass(proxyTargetClass).     factory.addAdvisor(advisor).     TestService bean = (TestService) factory.getProxy().     assertEquals(0, logAdvice.getCountThrows()).     try {         bean.sayHello().         fail("Expected exception").     } catch (TestException ex) {         assertEquals(message, ex.getMessage()).     }     assertEquals(1, logAdvice.getCountThrows()). }

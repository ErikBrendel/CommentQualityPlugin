commented;modifiers;parameterAmount;loc;comment;code
false;public;0;10;;@Before public void setUp() {     request = new MockHttpServletRequest().     response = new MockHttpServletResponse().     jsContext = ContextFactory.getGlobal().enterContext().     jsScope = jsContext.initStandardObjects().     view = new MappingJackson2XmlView(). }
false;public;0;4;;@Test public void isExposePathVars() {     assertEquals("Must not expose path variables", false, view.isExposePathVariables()). }
false;public;0;19;;@Test public void renderSimpleMap() throws Exception {     Map<String, Object> model = new HashMap<>().     model.put("bindingResult", mock(BindingResult.class, "binding_result")).     model.put("foo", "bar").     view.setUpdateContentLength(true).     view.render(model, request, response).     assertEquals("no-store", response.getHeader("Cache-Control")).     assertEquals(MappingJackson2XmlView.DEFAULT_CONTENT_TYPE, response.getContentType()).     String jsonResult = response.getContentAsString().     assertTrue(jsonResult.length() > 0).     assertEquals(jsonResult.length(), response.getContentLength()).     validateResult(). }
false;public;0;13;;@Test public void renderWithSelectedContentType() throws Exception {     Map<String, Object> model = new HashMap<>().     model.put("foo", "bar").     view.render(model, request, response).     assertEquals("application/xml", response.getContentType()).     request.setAttribute(View.SELECTED_CONTENT_TYPE, new MediaType("application", "vnd.example-v2+xml")).     view.render(model, request, response).     assertEquals("application/vnd.example-v2+xml", response.getContentType()). }
false;public;0;12;;@Test public void renderCaching() throws Exception {     view.setDisableCaching(false).     Map<String, Object> model = new HashMap<>().     model.put("bindingResult", mock(BindingResult.class, "binding_result")).     model.put("foo", "bar").     view.render(model, request, response).     assertNull(response.getHeader("Cache-Control")). }
false;public;0;15;;@Test public void renderSimpleBean() throws Exception {     Object bean = new TestBeanSimple().     Map<String, Object> model = new HashMap<>().     model.put("bindingResult", mock(BindingResult.class, "binding_result")).     model.put("foo", bean).     view.setUpdateContentLength(true).     view.render(model, request, response).     assertTrue(response.getContentAsString().length() > 0).     assertEquals(response.getContentAsString().length(), response.getContentLength()).     validateResult(). }
false;public;0;13;;@Test public void renderWithCustomSerializerLocatedByAnnotation() throws Exception {     Object bean = new TestBeanSimpleAnnotated().     Map<String, Object> model = new HashMap<>().     model.put("foo", bean).     view.render(model, request, response).     assertTrue(response.getContentAsString().length() > 0).     assertTrue(response.getContentAsString().contains("<testBeanSimple>custom</testBeanSimple>")).     validateResult(). }
false;public;0;19;;@Test public void renderWithCustomSerializerLocatedByFactory() throws Exception {     SerializerFactory factory = new DelegatingSerializerFactory(null).     XmlMapper mapper = new XmlMapper().     mapper.setSerializerFactory(factory).     view.setObjectMapper(mapper).     Object bean = new TestBeanSimple().     Map<String, Object> model = new HashMap<>().     model.put("foo", bean).     view.render(model, request, response).     String result = response.getContentAsString().     assertTrue(result.length() > 0).     assertTrue(result.contains("custom</testBeanSimple>")).     validateResult(). }
false;public;0;19;;@Test public void renderOnlySpecifiedModelKey() throws Exception {     view.setModelKey("bar").     Map<String, Object> model = new HashMap<>().     model.put("foo", "foo").     model.put("bar", "bar").     model.put("baz", "baz").     view.render(model, request, response).     String result = response.getContentAsString().     assertTrue(result.length() > 0).     assertFalse(result.contains("foo")).     assertTrue(result.contains("bar")).     assertFalse(result.contains("baz")).     validateResult(). }
false;public;0;11;;@Test(expected = IllegalStateException.class) public void renderModelWithMultipleKeys() throws Exception {     Map<String, Object> model = new TreeMap<>().     model.put("foo", "foo").     model.put("bar", "bar").     view.render(model, request, response).     fail(). }
false;public;0;18;;@Test public void renderSimpleBeanWithJsonView() throws Exception {     Object bean = new TestBeanSimple().     Map<String, Object> model = new HashMap<>().     model.put("bindingResult", mock(BindingResult.class, "binding_result")).     model.put("foo", bean).     model.put(JsonView.class.getName(), MyJacksonView1.class).     view.setUpdateContentLength(true).     view.render(model, request, response).     String content = response.getContentAsString().     assertTrue(content.length() > 0).     assertEquals(content.length(), response.getContentLength()).     assertTrue(content.contains("foo")).     assertFalse(content.contains("boo")).     assertFalse(content.contains(JsonView.class.getName())). }
false;private;0;6;;private void validateResult() throws Exception {     Object xmlResult = jsContext.evaluateString(jsScope, "(" + response.getContentAsString() + ")", "XML Stream", 1, null).     assertNotNull("XML Result did not eval as valid JavaScript", xmlResult).     assertEquals("application/xml", response.getContentType()). }
false;public;0;3;;public String getProperty1() {     return property1. }
false;public;0;3;;public boolean getTest() {     return test. }
false;public;0;3;;public String getProperty2() {     return property2. }
false;public;0;3;;public Date getNow() {     return new Date(). }
false;public;0;3;;public TestChildBean getChild() {     return child. }
false;public;0;3;;public String getValue() {     return value. }
false;public;0;3;;public String getBaz() {     return baz. }
false;public;0;3;;public TestBeanSimple getParent() {     return parent. }
false;public;1;3;;public void setParent(TestBeanSimple parent) {     this.parent = parent. }
false;public;3;7;;@Override public void serialize(Object value, JsonGenerator jgen, SerializerProvider provider) throws IOException {     jgen.writeStartObject().     jgen.writeFieldName("testBeanSimple").     jgen.writeString("custom").     jgen.writeEndObject(). }
false;public;2;9;;@Override public JsonSerializer<Object> createSerializer(SerializerProvider prov, JavaType type) throws JsonMappingException {     if (type.getRawClass() == TestBeanSimple.class) {         return new TestBeanSimpleSerializer().     } else {         return super.createSerializer(prov, type).     } }

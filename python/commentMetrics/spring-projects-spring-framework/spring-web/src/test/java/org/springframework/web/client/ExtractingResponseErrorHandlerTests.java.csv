commented;modifiers;parameterAmount;loc;comment;code
false;public;0;11;;@Before public void setup() throws Exception {     HttpMessageConverter<Object> converter = new MappingJackson2HttpMessageConverter().     this.errorHandler = new ExtractingResponseErrorHandler(Collections.singletonList(converter)).     this.errorHandler.setStatusMapping(Collections.singletonMap(HttpStatus.I_AM_A_TEAPOT, MyRestClientException.class)).     this.errorHandler.setSeriesMapping(Collections.singletonMap(HttpStatus.Series.SERVER_ERROR, MyRestClientException.class)). }
false;public;0;11;;@Test public void hasError() throws Exception {     given(this.response.getRawStatusCode()).willReturn(HttpStatus.I_AM_A_TEAPOT.value()).     assertTrue(this.errorHandler.hasError(this.response)).     given(this.response.getRawStatusCode()).willReturn(HttpStatus.INTERNAL_SERVER_ERROR.value()).     assertTrue(this.errorHandler.hasError(this.response)).     given(this.response.getRawStatusCode()).willReturn(HttpStatus.OK.value()).     assertFalse(this.errorHandler.hasError(this.response)). }
false;public;0;14;;@Test public void hasErrorOverride() throws Exception {     this.errorHandler.setSeriesMapping(Collections.singletonMap(HttpStatus.Series.CLIENT_ERROR, null)).     given(this.response.getRawStatusCode()).willReturn(HttpStatus.I_AM_A_TEAPOT.value()).     assertTrue(this.errorHandler.hasError(this.response)).     given(this.response.getRawStatusCode()).willReturn(HttpStatus.NOT_FOUND.value()).     assertFalse(this.errorHandler.hasError(this.response)).     given(this.response.getRawStatusCode()).willReturn(HttpStatus.OK.value()).     assertFalse(this.errorHandler.hasError(this.response)). }
false;public;0;19;;@Test public void handleErrorStatusMatch() throws Exception {     given(this.response.getRawStatusCode()).willReturn(HttpStatus.I_AM_A_TEAPOT.value()).     HttpHeaders responseHeaders = new HttpHeaders().     responseHeaders.setContentType(MediaType.APPLICATION_JSON).     given(this.response.getHeaders()).willReturn(responseHeaders).     byte[] body = "{\"foo\":\"bar\"}".getBytes(StandardCharsets.UTF_8).     responseHeaders.setContentLength(body.length).     given(this.response.getBody()).willReturn(new ByteArrayInputStream(body)).     try {         this.errorHandler.handleError(this.response).         fail("MyRestClientException expected").     } catch (MyRestClientException ex) {         assertEquals("bar", ex.getFoo()).     } }
false;public;0;19;;@Test public void handleErrorSeriesMatch() throws Exception {     given(this.response.getRawStatusCode()).willReturn(HttpStatus.INTERNAL_SERVER_ERROR.value()).     HttpHeaders responseHeaders = new HttpHeaders().     responseHeaders.setContentType(MediaType.APPLICATION_JSON).     given(this.response.getHeaders()).willReturn(responseHeaders).     byte[] body = "{\"foo\":\"bar\"}".getBytes(StandardCharsets.UTF_8).     responseHeaders.setContentLength(body.length).     given(this.response.getBody()).willReturn(new ByteArrayInputStream(body)).     try {         this.errorHandler.handleError(this.response).         fail("MyRestClientException expected").     } catch (MyRestClientException ex) {         assertEquals("bar", ex.getFoo()).     } }
false;public;0;20;;@Test public void handleNoMatch() throws Exception {     given(this.response.getRawStatusCode()).willReturn(HttpStatus.NOT_FOUND.value()).     HttpHeaders responseHeaders = new HttpHeaders().     responseHeaders.setContentType(MediaType.APPLICATION_JSON).     given(this.response.getHeaders()).willReturn(responseHeaders).     byte[] body = "{\"foo\":\"bar\"}".getBytes(StandardCharsets.UTF_8).     responseHeaders.setContentLength(body.length).     given(this.response.getBody()).willReturn(new ByteArrayInputStream(body)).     try {         this.errorHandler.handleError(this.response).         fail("HttpClientErrorException expected").     } catch (HttpClientErrorException ex) {         assertEquals(HttpStatus.NOT_FOUND, ex.getStatusCode()).         assertArrayEquals(body, ex.getResponseBodyAsByteArray()).     } }
false;public;0;16;;@Test public void handleNoMatchOverride() throws Exception {     this.errorHandler.setSeriesMapping(Collections.singletonMap(HttpStatus.Series.CLIENT_ERROR, null)).     given(this.response.getRawStatusCode()).willReturn(HttpStatus.NOT_FOUND.value()).     HttpHeaders responseHeaders = new HttpHeaders().     responseHeaders.setContentType(MediaType.APPLICATION_JSON).     given(this.response.getHeaders()).willReturn(responseHeaders).     byte[] body = "{\"foo\":\"bar\"}".getBytes(StandardCharsets.UTF_8).     responseHeaders.setContentLength(body.length).     given(this.response.getBody()).willReturn(new ByteArrayInputStream(body)).     this.errorHandler.handleError(this.response). }
false;public;0;3;;public String getFoo() {     return this.foo. }
false;public;1;3;;public void setFoo(String foo) {     this.foo = foo. }

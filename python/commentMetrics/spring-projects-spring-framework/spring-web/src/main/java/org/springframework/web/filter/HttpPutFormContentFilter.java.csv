commented;modifiers;parameterAmount;loc;comment;code
true;public;1;4;/**  * Set the converter to use for parsing form content.  * <p>By default this is an instance of {@link AllEncompassingFormHttpMessageConverter}.  */ ;/**  * Set the converter to use for parsing form content.  * <p>By default this is an instance of {@link AllEncompassingFormHttpMessageConverter}.  */ public void setFormConverter(FormHttpMessageConverter converter) {     Assert.notNull(converter, "FormHttpMessageConverter is required.").     this.formConverter = converter. }
false;public;0;3;;public FormHttpMessageConverter getFormConverter() {     return this.formConverter. }
true;public;1;3;/**  * The default character set to use for reading form data.  * This is a shortcut for:<br>  * {@code getFormConverter.setCharset(charset)}.  */ ;/**  * The default character set to use for reading form data.  * This is a shortcut for:<br>  * {@code getFormConverter.setCharset(charset)}.  */ public void setCharset(Charset charset) {     this.formConverter.setCharset(charset). }
false;public;0;4;;@Override public InputStream getBody() throws IOException {     return request.getInputStream(). }
false;protected;3;21;;@Override protected void doFilterInternal(final HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {     if (("PUT".equals(request.getMethod()) || "PATCH".equals(request.getMethod())) && isFormContentType(request)) {         HttpInputMessage inputMessage = new ServletServerHttpRequest(request) {              @Override             public InputStream getBody() throws IOException {                 return request.getInputStream().             }         }.         MultiValueMap<String, String> formParameters = this.formConverter.read(null, inputMessage).         if (!formParameters.isEmpty()) {             HttpServletRequest wrapper = new HttpPutFormContentRequestWrapper(request, formParameters).             filterChain.doFilter(wrapper, response).             return.         }     }     filterChain.doFilter(request, response). }
false;private;1;15;;private boolean isFormContentType(HttpServletRequest request) {     String contentType = request.getContentType().     if (contentType != null) {         try {             MediaType mediaType = MediaType.parseMediaType(contentType).             return (MediaType.APPLICATION_FORM_URLENCODED.includes(mediaType)).         } catch (IllegalArgumentException ex) {             return false.         }     } else {         return false.     } }
false;public;1;7;;@Override @Nullable public String getParameter(String name) {     String queryStringValue = super.getParameter(name).     String formValue = this.formParameters.getFirst(name).     return (queryStringValue != null ? queryStringValue : formValue). }
false;public;0;10;;@Override public Map<String, String[]> getParameterMap() {     Map<String, String[]> result = new LinkedHashMap<>().     Enumeration<String> names = getParameterNames().     while (names.hasMoreElements()) {         String name = names.nextElement().         result.put(name, getParameterValues(name)).     }     return result. }
false;public;0;7;;@Override public Enumeration<String> getParameterNames() {     Set<String> names = new LinkedHashSet<>().     names.addAll(Collections.list(super.getParameterNames())).     names.addAll(this.formParameters.keySet()).     return Collections.enumeration(names). }
false;public;1;18;;@Override @Nullable public String[] getParameterValues(String name) {     String[] parameterValues = super.getParameterValues(name).     List<String> formParam = this.formParameters.get(name).     if (formParam == null) {         return parameterValues.     }     if (parameterValues == null || getQueryString() == null) {         return StringUtils.toStringArray(formParam).     } else {         List<String> result = new ArrayList<>(parameterValues.length + formParam.size()).         result.addAll(Arrays.asList(parameterValues)).         result.addAll(formParam).         return StringUtils.toStringArray(result).     } }

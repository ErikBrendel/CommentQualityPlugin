# id;timestamp;commentText;codeText;commentWords;codeWords
MiniClusterConfiguration -> private long getOrCalculateManagedMemoryPerTaskManager();1482522864;Get or calculate the managed memory per task manager. The memory is calculated in the_following order:__1. Return {@link #managedMemoryPerTaskManager} if set_2. Return config.getInteger(ConfigConstants.TASK_MANAGER_MEMORY_SIZE_KEY) if set_3. Distribute the available free memory equally among all components (JMs, RMs and TMs) and_calculate the managed memory from the share of memory for a single task manager.__@return;private long getOrCalculateManagedMemoryPerTaskManager() {_		if (managedMemoryPerTaskManager == -1) {_			_			final ConfigOption<Integer> memorySizeOption = ConfigOptions_				.key(ConfigConstants.TASK_MANAGER_MEMORY_SIZE_KEY)_				.defaultValue(-1)___			int memorySize = config.getInteger(memorySizeOption)___			if (memorySize == -1) {_				_				_				final ConfigOption<Integer> bufferSizeOption = ConfigOptions_					.key(ConfigConstants.TASK_MANAGER_MEMORY_SEGMENT_SIZE_KEY)_					.defaultValue(ConfigConstants.DEFAULT_TASK_MANAGER_MEMORY_SEGMENT_SIZE)___				final ConfigOption<Long> bufferMemoryOption = ConfigOptions_					.key(ConfigConstants.TASK_MANAGER_NETWORK_NUM_BUFFERS_KEY)_					.defaultValue((long) ConfigConstants.DEFAULT_TASK_MANAGER_NETWORK_NUM_BUFFERS)___				final ConfigOption<Float> memoryFractionOption = ConfigOptions_					.key(ConfigConstants.TASK_MANAGER_MEMORY_FRACTION_KEY)_					.defaultValue(ConfigConstants.DEFAULT_MEMORY_MANAGER_MEMORY_FRACTION)___				float memoryFraction = config.getFloat(memoryFractionOption)__				long networkBuffersMemory = config.getLong(bufferMemoryOption) * config.getInteger(bufferSizeOption)___				long freeMemory = EnvironmentInformation.getSizeOfFreeHeapMemoryWithDefrag()___				_				_				long memoryPerComponent = freeMemory / (numTaskManagers + numResourceManagers + numJobManagers)___				_				long memoryMinusNetworkBuffers = memoryPerComponent - networkBuffersMemory___				_				long managedMemoryBytes = (long) (memoryMinusNetworkBuffers * memoryFraction)___				return managedMemoryBytes >>> 20__			} else {_				return memorySize__			}_		} else {_			return managedMemoryPerTaskManager__		}_	};get,or,calculate,the,managed,memory,per,task,manager,the,memory,is,calculated,in,the,following,order,1,return,link,managed,memory,per,task,manager,if,set,2,return,config,get,integer,config,constants,if,set,3,distribute,the,available,free,memory,equally,among,all,components,jms,rms,and,tms,and,calculate,the,managed,memory,from,the,share,of,memory,for,a,single,task,manager,return;private,long,get,or,calculate,managed,memory,per,task,manager,if,managed,memory,per,task,manager,1,final,config,option,integer,memory,size,option,config,options,key,config,constants,default,value,1,int,memory,size,config,get,integer,memory,size,option,if,memory,size,1,final,config,option,integer,buffer,size,option,config,options,key,config,constants,default,value,config,constants,final,config,option,long,buffer,memory,option,config,options,key,config,constants,default,value,long,config,constants,final,config,option,float,memory,fraction,option,config,options,key,config,constants,default,value,config,constants,float,memory,fraction,config,get,float,memory,fraction,option,long,network,buffers,memory,config,get,long,buffer,memory,option,config,get,integer,buffer,size,option,long,free,memory,environment,information,get,size,of,free,heap,memory,with,defrag,long,memory,per,component,free,memory,num,task,managers,num,resource,managers,num,job,managers,long,memory,minus,network,buffers,memory,per,component,network,buffers,memory,long,managed,memory,bytes,long,memory,minus,network,buffers,memory,fraction,return,managed,memory,bytes,20,else,return,memory,size,else,return,managed,memory,per,task,manager
MiniClusterConfiguration -> private long getOrCalculateManagedMemoryPerTaskManager();1491500150;Get or calculate the managed memory per task manager. The memory is calculated in the_following order:__1. Return {@link #managedMemoryPerTaskManager} if set_2. Return config.getInteger(ConfigConstants.TASK_MANAGER_MEMORY_SIZE_KEY) if set_3. Distribute the available free memory equally among all components (JMs, RMs and TMs) and_calculate the managed memory from the share of memory for a single task manager.__@return;private long getOrCalculateManagedMemoryPerTaskManager() {_		if (managedMemoryPerTaskManager == -1) {_			__			long memorySize = config.getLong(TaskManagerOptions.MANAGED_MEMORY_SIZE)___			_			_			_			if (memorySize == TaskManagerOptions.MANAGED_MEMORY_SIZE.defaultValue()) {_				_				__				float memoryFraction = config.getFloat(TaskManagerOptions.MANAGED_MEMORY_FRACTION)__				long networkBuffersMemory =_					(long) config.getInteger(TaskManagerOptions.NETWORK_NUM_BUFFERS) *_						(long) config.getInteger(TaskManagerOptions.MEMORY_SEGMENT_SIZE)___				long freeMemory = EnvironmentInformation.getSizeOfFreeHeapMemoryWithDefrag()___				_				_				long memoryPerComponent = freeMemory / (numTaskManagers + numResourceManagers + numJobManagers)___				_				long memoryMinusNetworkBuffers = memoryPerComponent - networkBuffersMemory___				_				long managedMemoryBytes = (long) (memoryMinusNetworkBuffers * memoryFraction)___				return managedMemoryBytes >>> 20__			} else {_				return memorySize__			}_		} else {_			return managedMemoryPerTaskManager__		}_	};get,or,calculate,the,managed,memory,per,task,manager,the,memory,is,calculated,in,the,following,order,1,return,link,managed,memory,per,task,manager,if,set,2,return,config,get,integer,config,constants,if,set,3,distribute,the,available,free,memory,equally,among,all,components,jms,rms,and,tms,and,calculate,the,managed,memory,from,the,share,of,memory,for,a,single,task,manager,return;private,long,get,or,calculate,managed,memory,per,task,manager,if,managed,memory,per,task,manager,1,long,memory,size,config,get,long,task,manager,options,if,memory,size,task,manager,options,default,value,float,memory,fraction,config,get,float,task,manager,options,long,network,buffers,memory,long,config,get,integer,task,manager,options,long,config,get,integer,task,manager,options,long,free,memory,environment,information,get,size,of,free,heap,memory,with,defrag,long,memory,per,component,free,memory,num,task,managers,num,resource,managers,num,job,managers,long,memory,minus,network,buffers,memory,per,component,network,buffers,memory,long,managed,memory,bytes,long,memory,minus,network,buffers,memory,fraction,return,managed,memory,bytes,20,else,return,memory,size,else,return,managed,memory,per,task,manager
MiniClusterConfiguration -> private long getOrCalculateManagedMemoryPerTaskManager();1494092429;Get or calculate the managed memory per task manager. The memory is calculated in the_following order:__1. Return {@link #managedMemoryPerTaskManager} if set_2. Return config.getInteger(ConfigConstants.TASK_MANAGER_MEMORY_SIZE_KEY) if set_3. Distribute the available free memory equally among all components (JMs, RMs and TMs) and_calculate the managed memory from the share of memory for a single task manager.__@return size of managed memory per task manager (in megabytes);private long getOrCalculateManagedMemoryPerTaskManager() {_		if (managedMemoryPerTaskManager == -1) {_			__			long memorySize = config.getLong(TaskManagerOptions.MANAGED_MEMORY_SIZE)___			_			_			_			if (memorySize == TaskManagerOptions.MANAGED_MEMORY_SIZE.defaultValue()) {_				_				__				float memoryFraction = config.getFloat(TaskManagerOptions.MANAGED_MEMORY_FRACTION)___				long freeMemory = EnvironmentInformation.getSizeOfFreeHeapMemoryWithDefrag()___				_				_				long memoryPerComponent = freeMemory / (numTaskManagers + numResourceManagers + numJobManagers)___				_				long networkBuffersMemory = TaskManagerServices.calculateNetworkBufferMemory(memoryPerComponent, config)__				long memoryMinusNetworkBuffers = memoryPerComponent - networkBuffersMemory___				_				long managedMemoryBytes = (long) (memoryMinusNetworkBuffers * memoryFraction)___				return managedMemoryBytes >> 20_ _			} else {_				return memorySize__			}_		} else {_			return managedMemoryPerTaskManager__		}_	};get,or,calculate,the,managed,memory,per,task,manager,the,memory,is,calculated,in,the,following,order,1,return,link,managed,memory,per,task,manager,if,set,2,return,config,get,integer,config,constants,if,set,3,distribute,the,available,free,memory,equally,among,all,components,jms,rms,and,tms,and,calculate,the,managed,memory,from,the,share,of,memory,for,a,single,task,manager,return,size,of,managed,memory,per,task,manager,in,megabytes;private,long,get,or,calculate,managed,memory,per,task,manager,if,managed,memory,per,task,manager,1,long,memory,size,config,get,long,task,manager,options,if,memory,size,task,manager,options,default,value,float,memory,fraction,config,get,float,task,manager,options,long,free,memory,environment,information,get,size,of,free,heap,memory,with,defrag,long,memory,per,component,free,memory,num,task,managers,num,resource,managers,num,job,managers,long,network,buffers,memory,task,manager,services,calculate,network,buffer,memory,memory,per,component,config,long,memory,minus,network,buffers,memory,per,component,network,buffers,memory,long,managed,memory,bytes,long,memory,minus,network,buffers,memory,fraction,return,managed,memory,bytes,20,else,return,memory,size,else,return,managed,memory,per,task,manager
MiniClusterConfiguration -> private long getOrCalculateManagedMemoryPerTaskManager();1499683297;Get or calculate the managed memory per task manager. The memory is calculated in the_following order:__1. Return {@link #managedMemoryPerTaskManager} if set_2. Return config.getInteger(ConfigConstants.TASK_MANAGER_MEMORY_SIZE_KEY) if set_3. Distribute the available free memory equally among all components (JMs, RMs and TMs) and_calculate the managed memory from the share of memory for a single task manager.__@return size of managed memory per task manager (in megabytes);private long getOrCalculateManagedMemoryPerTaskManager() {_		if (managedMemoryPerTaskManager == -1) {_			__			long memorySize = config.getLong(TaskManagerOptions.MANAGED_MEMORY_SIZE)___			_			_			_			if (memorySize == TaskManagerOptions.MANAGED_MEMORY_SIZE.defaultValue()) {_				_				__				float memoryFraction = config.getFloat(TaskManagerOptions.MANAGED_MEMORY_FRACTION)___				long freeMemory = EnvironmentInformation.getSizeOfFreeHeapMemoryWithDefrag()___				_				_				long memoryPerComponent = freeMemory / (numTaskManagers + numResourceManagers + numJobManagers)___				_				long networkBuffersMemory = TaskManagerServices.calculateNetworkBufferMemory(memoryPerComponent, config)__				long memoryMinusNetworkBuffers = memoryPerComponent - networkBuffersMemory___				_				long managedMemoryBytes = (long) (memoryMinusNetworkBuffers * memoryFraction)___				return managedMemoryBytes >> 20_ _			} else {_				return memorySize__			}_		} else {_			return managedMemoryPerTaskManager__		}_	};get,or,calculate,the,managed,memory,per,task,manager,the,memory,is,calculated,in,the,following,order,1,return,link,managed,memory,per,task,manager,if,set,2,return,config,get,integer,config,constants,if,set,3,distribute,the,available,free,memory,equally,among,all,components,jms,rms,and,tms,and,calculate,the,managed,memory,from,the,share,of,memory,for,a,single,task,manager,return,size,of,managed,memory,per,task,manager,in,megabytes;private,long,get,or,calculate,managed,memory,per,task,manager,if,managed,memory,per,task,manager,1,long,memory,size,config,get,long,task,manager,options,if,memory,size,task,manager,options,default,value,float,memory,fraction,config,get,float,task,manager,options,long,free,memory,environment,information,get,size,of,free,heap,memory,with,defrag,long,memory,per,component,free,memory,num,task,managers,num,resource,managers,num,job,managers,long,network,buffers,memory,task,manager,services,calculate,network,buffer,memory,memory,per,component,config,long,memory,minus,network,buffers,memory,per,component,network,buffers,memory,long,managed,memory,bytes,long,memory,minus,network,buffers,memory,fraction,return,managed,memory,bytes,20,else,return,memory,size,else,return,managed,memory,per,task,manager

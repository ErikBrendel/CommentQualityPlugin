commented;modifiers;parameterAmount;loc;comment;code
false;public;0;6;;@After public void close() {     if (this.context != null) {         this.context.close().     } }
false;public;0;6;;@Test public void expectedSendGridBeanCreatedApiKey() {     loadContext("spring.sendgrid.api-key:SG.SECRET-API-KEY").     SendGrid sendGrid = this.context.getBean(SendGrid.class).     assertThat(sendGrid).extracting("apiKey").containsExactly("SG.SECRET-API-KEY"). }
false;public;0;6;;@Test public void autoConfigurationNotFiredWhenPropertiesNotSet() {     loadContext().     assertThatExceptionOfType(NoSuchBeanDefinitionException.class).isThrownBy(() -> this.context.getBean(SendGrid.class)). }
false;public;0;7;;@Test public void autoConfigurationNotFiredWhenBeanAlreadyCreated() {     loadContext(ManualSendGridConfiguration.class, "spring.sendgrid.api-key:SG.SECRET-API-KEY").     SendGrid sendGrid = this.context.getBean(SendGrid.class).     assertThat(sendGrid).extracting("apiKey").containsExactly("SG.CUSTOM_API_KEY"). }
false;public;0;10;;@Test public void expectedSendGridBeanWithProxyCreated() {     loadContext("spring.sendgrid.api-key:SG.SECRET-API-KEY", "spring.sendgrid.proxy.host:localhost", "spring.sendgrid.proxy.port:5678").     SendGrid sendGrid = this.context.getBean(SendGrid.class).     assertThat(sendGrid).extracting("client").extracting("httpClient").extracting("routePlanner").hasOnlyElementsOfType(DefaultProxyRoutePlanner.class). }
false;private;1;3;;private void loadContext(String... environment) {     this.loadContext(null, environment). }
false;private;2;10;;private void loadContext(Class<?> additionalConfiguration, String... environment) {     this.context = new AnnotationConfigApplicationContext().     TestPropertyValues.of(environment).applyTo(this.context).     ConfigurationPropertySources.attach(this.context.getEnvironment()).     this.context.register(SendGridAutoConfiguration.class).     if (additionalConfiguration != null) {         this.context.register(additionalConfiguration).     }     this.context.refresh(). }
false;;0;4;;@Bean SendGrid sendGrid() {     return new SendGrid("SG.CUSTOM_API_KEY", true). }

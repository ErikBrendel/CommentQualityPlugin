commented;modifiers;parameterAmount;loc;comment;code
false;public;0;7;;@Test public void toAnyEndpointShouldMatchEndpointPath() {     ServerWebExchangeMatcher matcher = EndpointRequest.toAnyEndpoint().     assertMatcher(matcher).matches("/actuator/foo").     assertMatcher(matcher).matches("/actuator/bar").     assertMatcher(matcher).matches("/actuator"). }
false;public;0;7;;@Test public void toAnyEndpointShouldMatchEndpointPathWithTrailingSlash() {     ServerWebExchangeMatcher matcher = EndpointRequest.toAnyEndpoint().     assertMatcher(matcher).matches("/actuator/foo/").     assertMatcher(matcher).matches("/actuator/bar/").     assertMatcher(matcher).matches("/actuator/"). }
false;public;0;8;;@Test public void toAnyEndpointWhenBasePathIsEmptyShouldNotMatchLinks() {     ServerWebExchangeMatcher matcher = EndpointRequest.toAnyEndpoint().     RequestMatcherAssert assertMatcher = assertMatcher(matcher, "").     assertMatcher.doesNotMatch("/").     assertMatcher.matches("/foo").     assertMatcher.matches("/bar"). }
false;public;0;5;;@Test public void toAnyEndpointShouldNotMatchOtherPath() {     ServerWebExchangeMatcher matcher = EndpointRequest.toAnyEndpoint().     assertMatcher(matcher).doesNotMatch("/actuator/baz"). }
false;public;0;5;;@Test public void toEndpointClassShouldMatchEndpointPath() {     ServerWebExchangeMatcher matcher = EndpointRequest.to(FooEndpoint.class).     assertMatcher(matcher).matches("/actuator/foo"). }
false;public;0;5;;@Test public void toEndpointClassShouldNotMatchOtherPath() {     ServerWebExchangeMatcher matcher = EndpointRequest.to(FooEndpoint.class).     assertMatcher(matcher).doesNotMatch("/actuator/bar"). }
false;public;0;5;;@Test public void toEndpointIdShouldMatchEndpointPath() {     ServerWebExchangeMatcher matcher = EndpointRequest.to("foo").     assertMatcher(matcher).matches("/actuator/foo"). }
false;public;0;5;;@Test public void toEndpointIdShouldNotMatchOtherPath() {     ServerWebExchangeMatcher matcher = EndpointRequest.to("foo").     assertMatcher(matcher).doesNotMatch("/actuator/bar"). }
false;public;0;8;;@Test public void toLinksShouldOnlyMatchLinks() {     ServerWebExchangeMatcher matcher = EndpointRequest.toLinks().     assertMatcher(matcher).doesNotMatch("/actuator/foo").     assertMatcher(matcher).doesNotMatch("/actuator/bar").     assertMatcher(matcher).matches("/actuator").     assertMatcher(matcher).matches("/actuator/"). }
false;public;0;8;;@Test public void toLinksWhenBasePathEmptyShouldNotMatch() {     ServerWebExchangeMatcher matcher = EndpointRequest.toLinks().     RequestMatcherAssert assertMatcher = assertMatcher(matcher, "").     assertMatcher.doesNotMatch("/actuator/foo").     assertMatcher.doesNotMatch("/actuator/bar").     assertMatcher.doesNotMatch("/"). }
false;public;0;15;;@Test public void excludeByClassShouldNotMatchExcluded() {     ServerWebExchangeMatcher matcher = EndpointRequest.toAnyEndpoint().excluding(FooEndpoint.class, BazServletEndpoint.class).     List<ExposableEndpoint<?>> endpoints = new ArrayList<>().     endpoints.add(mockEndpoint(EndpointId.of("foo"), "foo")).     endpoints.add(mockEndpoint(EndpointId.of("bar"), "bar")).     endpoints.add(mockEndpoint(EndpointId.of("baz"), "baz")).     PathMappedEndpoints pathMappedEndpoints = new PathMappedEndpoints("/actuator", () -> endpoints).     assertMatcher(matcher, pathMappedEndpoints).doesNotMatch("/actuator/foo").     assertMatcher(matcher, pathMappedEndpoints).doesNotMatch("/actuator/baz").     assertMatcher(matcher).matches("/actuator/bar").     assertMatcher(matcher).matches("/actuator"). }
false;public;0;7;;@Test public void excludeByClassShouldNotMatchLinksIfExcluded() {     ServerWebExchangeMatcher matcher = EndpointRequest.toAnyEndpoint().excludingLinks().excluding(FooEndpoint.class).     assertMatcher(matcher).doesNotMatch("/actuator/foo").     assertMatcher(matcher).doesNotMatch("/actuator"). }
false;public;0;8;;@Test public void excludeByIdShouldNotMatchExcluded() {     ServerWebExchangeMatcher matcher = EndpointRequest.toAnyEndpoint().excluding("foo").     assertMatcher(matcher).doesNotMatch("/actuator/foo").     assertMatcher(matcher).matches("/actuator/bar").     assertMatcher(matcher).matches("/actuator"). }
false;public;0;7;;@Test public void excludeByIdShouldNotMatchLinksIfExcluded() {     ServerWebExchangeMatcher matcher = EndpointRequest.toAnyEndpoint().excludingLinks().excluding("foo").     assertMatcher(matcher).doesNotMatch("/actuator/foo").     assertMatcher(matcher).doesNotMatch("/actuator"). }
false;public;0;8;;@Test public void excludeLinksShouldNotMatchBasePath() {     ServerWebExchangeMatcher matcher = EndpointRequest.toAnyEndpoint().excludingLinks().     assertMatcher(matcher).doesNotMatch("/actuator").     assertMatcher(matcher).matches("/actuator/foo").     assertMatcher(matcher).matches("/actuator/bar"). }
false;public;0;9;;@Test public void excludeLinksShouldNotMatchBasePathIfEmptyAndExcluded() {     ServerWebExchangeMatcher matcher = EndpointRequest.toAnyEndpoint().excludingLinks().     RequestMatcherAssert assertMatcher = assertMatcher(matcher, "").     assertMatcher.doesNotMatch("/").     assertMatcher.matches("/foo").     assertMatcher.matches("/bar"). }
false;public;0;6;;@Test public void noEndpointPathsBeansShouldNeverMatch() {     ServerWebExchangeMatcher matcher = EndpointRequest.toAnyEndpoint().     assertMatcher(matcher, (PathMappedEndpoints) null).doesNotMatch("/actuator/foo").     assertMatcher(matcher, (PathMappedEndpoints) null).doesNotMatch("/actuator/bar"). }
false;private;1;3;;private RequestMatcherAssert assertMatcher(ServerWebExchangeMatcher matcher) {     return assertMatcher(matcher, mockPathMappedEndpoints("/actuator")). }
false;private;2;4;;private RequestMatcherAssert assertMatcher(ServerWebExchangeMatcher matcher, String basePath) {     return assertMatcher(matcher, mockPathMappedEndpoints(basePath)). }
false;private;1;6;;private PathMappedEndpoints mockPathMappedEndpoints(String basePath) {     List<ExposableEndpoint<?>> endpoints = new ArrayList<>().     endpoints.add(mockEndpoint(EndpointId.of("foo"), "foo")).     endpoints.add(mockEndpoint(EndpointId.of("bar"), "bar")).     return new PathMappedEndpoints(basePath, () -> endpoints). }
false;private;2;6;;private TestEndpoint mockEndpoint(EndpointId id, String rootPath) {     TestEndpoint endpoint = mock(TestEndpoint.class).     given(endpoint.getEndpointId()).willReturn(id).     given(endpoint.getRootPath()).willReturn(rootPath).     return endpoint. }
false;private;2;14;;private RequestMatcherAssert assertMatcher(ServerWebExchangeMatcher matcher, PathMappedEndpoints pathMappedEndpoints) {     StaticApplicationContext context = new StaticApplicationContext().     context.registerBean(WebEndpointProperties.class).     if (pathMappedEndpoints != null) {         context.registerBean(PathMappedEndpoints.class, () -> pathMappedEndpoints).         WebEndpointProperties properties = context.getBean(WebEndpointProperties.class).         if (!properties.getBasePath().equals(pathMappedEndpoints.getBasePath())) {             properties.setBasePath(pathMappedEndpoints.getBasePath()).         }     }     return assertThat(new RequestMatcherAssert(context, matcher)). }
false;;1;6;;void matches(String path) {     ServerWebExchange exchange = webHandler().createExchange(MockServerHttpRequest.get(path).build(), new MockServerHttpResponse()).     matches(exchange). }
false;private;1;4;;private void matches(ServerWebExchange exchange) {     assertThat(this.matcher.matches(exchange).block(Duration.ofSeconds(30)).isMatch()).as("Matches " + getRequestPath(exchange)).isTrue(). }
false;;1;6;;void doesNotMatch(String path) {     ServerWebExchange exchange = webHandler().createExchange(MockServerHttpRequest.get(path).build(), new MockServerHttpResponse()).     doesNotMatch(exchange). }
false;private;1;5;;private void doesNotMatch(ServerWebExchange exchange) {     assertThat(this.matcher.matches(exchange).block(Duration.ofSeconds(30)).isMatch()).as("Does not match " + getRequestPath(exchange)).isFalse(). }
false;private;0;6;;private TestHttpWebHandlerAdapter webHandler() {     TestHttpWebHandlerAdapter adapter = new TestHttpWebHandlerAdapter(mock(WebHandler.class)).     adapter.setApplicationContext(this.context).     return adapter. }
false;private;1;3;;private String getRequestPath(ServerWebExchange exchange) {     return exchange.getRequest().getPath().toString(). }
false;protected;2;5;;@Override protected ServerWebExchange createExchange(ServerHttpRequest request, ServerHttpResponse response) {     return super.createExchange(request, response). }

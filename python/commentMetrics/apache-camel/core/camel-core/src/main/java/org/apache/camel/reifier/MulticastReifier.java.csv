commented;modifiers;parameterAmount;loc;comment;code
false;public;1;12;;@Override public Processor createProcessor(RouteContext routeContext) throws Exception {     Processor answer = this.createChildProcessor(routeContext, true).     // force the answer as a multicast processor even if there is only one child processor in the multicast     if (!(answer instanceof MulticastProcessor)) {         List<Processor> list = new ArrayList<>(1).         list.add(answer).         answer = createCompositeProcessor(routeContext, list).     }     return answer. }
false;protected;2;25;;protected Processor createCompositeProcessor(RouteContext routeContext, List<Processor> list) throws Exception {     final AggregationStrategy strategy = createAggregationStrategy(routeContext).     boolean isParallelProcessing = definition.getParallelProcessing() != null && definition.getParallelProcessing().     boolean isShareUnitOfWork = definition.getShareUnitOfWork() != null && definition.getShareUnitOfWork().     boolean isStreaming = definition.getStreaming() != null && definition.getStreaming().     boolean isStopOnException = definition.getStopOnException() != null && definition.getStopOnException().     boolean isParallelAggregate = definition.getParallelAggregate() != null && definition.getParallelAggregate().     boolean isStopOnAggregateException = definition.getStopOnAggregateException() != null && definition.getStopOnAggregateException().     boolean shutdownThreadPool = ProcessorDefinitionHelper.willCreateNewThreadPool(routeContext, definition, isParallelProcessing).     ExecutorService threadPool = ProcessorDefinitionHelper.getConfiguredExecutorService(routeContext, "Multicast", definition, isParallelProcessing).     long timeout = definition.getTimeout() != null ? definition.getTimeout() : 0.     if (timeout > 0 && !isParallelProcessing) {         throw new IllegalArgumentException("Timeout is used but ParallelProcessing has not been enabled.").     }     if (definition.getOnPrepareRef() != null) {         definition.setOnPrepare(CamelContextHelper.mandatoryLookup(routeContext.getCamelContext(), definition.getOnPrepareRef(), Processor.class)).     }     MulticastProcessor answer = new MulticastProcessor(routeContext.getCamelContext(), list, strategy, isParallelProcessing, threadPool, shutdownThreadPool, isStreaming, isStopOnException, timeout, definition.getOnPrepare(), isShareUnitOfWork, isParallelAggregate, isStopOnAggregateException).     return answer. }
false;private;1;34;;private AggregationStrategy createAggregationStrategy(RouteContext routeContext) {     AggregationStrategy strategy = definition.getAggregationStrategy().     if (strategy == null && definition.getStrategyRef() != null) {         Object aggStrategy = routeContext.lookup(definition.getStrategyRef(), Object.class).         if (aggStrategy instanceof AggregationStrategy) {             strategy = (AggregationStrategy) aggStrategy.         } else if (aggStrategy != null) {             AggregationStrategyBeanAdapter adapter = new AggregationStrategyBeanAdapter(aggStrategy, definition.getStrategyMethodName()).             if (definition.getStrategyMethodAllowNull() != null) {                 adapter.setAllowNullNewExchange(definition.getStrategyMethodAllowNull()).                 adapter.setAllowNullOldExchange(definition.getStrategyMethodAllowNull()).             }             strategy = adapter.         } else {             throw new IllegalArgumentException("Cannot find AggregationStrategy in Registry with name: " + definition.getStrategyRef()).         }     }     if (strategy == null) {         // default to use latest aggregation strategy         strategy = new UseLatestAggregationStrategy().     }     if (strategy instanceof CamelContextAware) {         ((CamelContextAware) strategy).setCamelContext(routeContext.getCamelContext()).     }     if (definition.getShareUnitOfWork() != null && definition.getShareUnitOfWork()) {         // wrap strategy in share unit of work         strategy = new ShareUnitOfWorkAggregationStrategy(strategy).     }     return strategy. }

commented;modifiers;parameterAmount;loc;comment;code
false;public;0;14;;@Test public void testOK() throws Exception {     counter = 0.     getMockEndpoint("mock:dead").expectedMessageCount(0).     getMockEndpoint("mock:start").expectedBodiesReceived("Hello World").     getMockEndpoint("mock:a").expectedBodiesReceived("Hello World").     getMockEndpoint("mock:b").expectedBodiesReceived("Hello World").     getMockEndpoint("mock:result").expectedBodiesReceived("Hello World").     template.sendBody("direct:start", "Hello World").     assertMockEndpointsSatisfied(). }
false;public;0;17;;@Test public void testError() throws Exception {     counter = 0.     // the DLC should receive the original message which is Bye World     getMockEndpoint("mock:dead").expectedBodiesReceived("Bye World").     getMockEndpoint("mock:start").expectedBodiesReceived("Bye World").     getMockEndpoint("mock:a").expectedBodiesReceived("Donkey was here").     getMockEndpoint("mock:b").expectedMessageCount(0).     getMockEndpoint("mock:result").expectedMessageCount(0).     template.sendBody("direct:start", "Bye World").     assertMockEndpointsSatisfied().     // 1 first + 3 redeliveries     assertEquals(4, counter). }
false;public;0;8;;@Test public void testMulticastException() throws Exception {     getMockEndpoint("mock:dead").expectedBodiesReceived("Hello", "Hello", "Hi", "Hi", "Bye", "Bye").     template.sendBody("direct:e", "Hello").     template.sendBody("direct:e", "Hi").     template.sendBody("direct:e", "Bye").     assertMockEndpointsSatisfied(). }
false;public;0;27;;@Override public void configure() throws Exception {     errorHandler(deadLetterChannel("mock:dead").useOriginalMessage().maximumRedeliveries(3).redeliveryDelay(0)).     from("direct:start").to("mock:start").process(new MyPreProcessor()).multicast().shareUnitOfWork().to("direct:a").to("direct:b").end().to("mock:result").     from("direct:a").to("mock:a").     from("direct:b").process(new MyProcessor()).to("mock:b").     from("direct:e").multicast().shareUnitOfWork().throwException(new IllegalArgumentException("exception1")).throwException(new IllegalArgumentException("exception2")).end(). }
false;protected;0;32;;@Override protected RouteBuilder createRouteBuilder() throws Exception {     return new RouteBuilder() {          @Override         public void configure() throws Exception {             errorHandler(deadLetterChannel("mock:dead").useOriginalMessage().maximumRedeliveries(3).redeliveryDelay(0)).             from("direct:start").to("mock:start").process(new MyPreProcessor()).multicast().shareUnitOfWork().to("direct:a").to("direct:b").end().to("mock:result").             from("direct:a").to("mock:a").             from("direct:b").process(new MyProcessor()).to("mock:b").             from("direct:e").multicast().shareUnitOfWork().throwException(new IllegalArgumentException("exception1")).throwException(new IllegalArgumentException("exception2")).end().         }     }. }
false;public;1;10;;@Override public void process(Exchange exchange) throws Exception {     // if its a bye message then alter it to something with     // Donkey to cause a failure in the sub unit of work     // but the DLC should still receive the original input     String body = exchange.getIn().getBody(String.class).     if (body.startsWith("Bye")) {         exchange.getIn().setBody("Donkey was here").     } }
false;public;1;8;;@Override public void process(Exchange exchange) throws Exception {     String body = exchange.getIn().getBody(String.class).     if (body.contains("Donkey")) {         counter++.         throw new IllegalArgumentException("Donkey not allowed").     } }

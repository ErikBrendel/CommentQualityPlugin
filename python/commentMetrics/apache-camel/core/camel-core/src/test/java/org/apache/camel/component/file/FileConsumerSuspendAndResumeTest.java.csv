commented;modifiers;parameterAmount;loc;comment;code
false;public;0;6;;@Override @Before public void setUp() throws Exception {     deleteDirectory("target/data/suspended").     super.setUp(). }
false;public;0;32;;@Test public void testConsumeSuspendAndResumeFile() throws Exception {     MockEndpoint mock = getMockEndpoint("mock:result").     mock.expectedMessageCount(1).     template.sendBodyAndHeader("file://target/data/suspended", "Bye World", Exchange.FILE_NAME, "bye.txt").     template.sendBodyAndHeader("file://target/data/suspended", "Hello World", Exchange.FILE_NAME, "hello.txt").     assertMockEndpointsSatisfied().     oneExchangeDone.matchesMockWaitTime().     // the route is suspended by the policy so we should only receive one     String[] files = new File("target/data/suspended/").list().     assertNotNull(files).     assertEquals("The file should exists", 1, files.length).     // reset mock     oneExchangeDone.reset().     mock.reset().     mock.expectedMessageCount(1).     // now resume it     myPolicy.resumeConsumer().     assertMockEndpointsSatisfied().     oneExchangeDone.matchesMockWaitTime().     // and the file is now deleted     files = new File("target/data/suspended/").list().     assertNotNull(files).     assertEquals("The file should exists", 0, files.length). }
false;public;0;6;;@Override public void configure() throws Exception {     from("file://target/data/suspended?maxMessagesPerPoll=1&delete=true&initialDelay=0&delay=10").routePolicy(myPolicy).id("myRoute").convertBodyTo(String.class).to("mock:result"). }
false;protected;0;11;;@Override protected RouteBuilder createRouteBuilder() throws Exception {     return new RouteBuilder() {          @Override         public void configure() throws Exception {             from("file://target/data/suspended?maxMessagesPerPoll=1&delete=true&initialDelay=0&delay=10").routePolicy(myPolicy).id("myRoute").convertBodyTo(String.class).to("mock:result").         }     }. }
false;public;2;11;;public void onExchangeDone(Route route, Exchange exchange) {     this.consumer = route.getConsumer().     // only stop it at first run     if (counter++ == 0) {         try {             super.stopConsumer(consumer).         } catch (Exception e) {             handleException(e).         }     } }
false;public;0;3;;public void resumeConsumer() throws Exception {     super.startConsumer(consumer). }

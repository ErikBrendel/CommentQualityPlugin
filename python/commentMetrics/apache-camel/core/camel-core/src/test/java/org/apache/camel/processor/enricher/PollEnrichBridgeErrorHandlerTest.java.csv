commented;modifiers;parameterAmount;loc;comment;code
false;protected;0;6;;@Override protected JndiRegistry createRegistry() throws Exception {     JndiRegistry jndi = super.createRegistry().     jndi.bind("myPoll", myPoll).     return jndi. }
false;public;0;16;;@Test public void testPollEnrichBridgeErrorHandler() throws Exception {     getMockEndpoint("mock:dead").expectedMessageCount(1).     getMockEndpoint("mock:result").expectedMessageCount(0).     template.sendBody("seda:start", "Hello World").     assertMockEndpointsSatisfied().     assertEquals(1 + 3, myPoll.getCounter()).     Exception caught = getMockEndpoint("mock:dead").getExchanges().get(0).getProperty(Exchange.EXCEPTION_CAUGHT, Exception.class).     assertNotNull(caught).     assertTrue(caught.getMessage().startsWith("Error during poll")).     assertEquals("Something went wrong", caught.getCause().getCause().getMessage()). }
false;public;0;10;;@Override public void configure() throws Exception {     // try at most 3 times and if still failing move to DLQ     errorHandler(deadLetterChannel("mock:dead").maximumRedeliveries(3).redeliveryDelay(0)).     from("seda:start").pollEnrich("file:target/data/foo?initialDelay=0&delay=10&pollStrategy=#myPoll&consumer.bridgeErrorHandler=true", 10000, new UseLatestAggregationStrategy()).to("mock:result"). }
false;protected;0;15;;@Override protected RouteBuilder createRouteBuilder() throws Exception {     return new RouteBuilder() {          @Override         public void configure() throws Exception {             // try at most 3 times and if still failing move to DLQ             errorHandler(deadLetterChannel("mock:dead").maximumRedeliveries(3).redeliveryDelay(0)).             from("seda:start").pollEnrich("file:target/data/foo?initialDelay=0&delay=10&pollStrategy=#myPoll&consumer.bridgeErrorHandler=true", 10000, new UseLatestAggregationStrategy()).to("mock:result").         }     }. }
false;public;2;5;;@Override public boolean begin(Consumer consumer, Endpoint endpoint) {     counter++.     throw new IllegalArgumentException("Something went wrong"). }
false;public;3;4;;@Override public void commit(Consumer consumer, Endpoint endpoint, int polledMessages) { // noop }
false;public;4;4;;@Override public boolean rollback(Consumer consumer, Endpoint endpoint, int retryCounter, Exception cause) throws Exception {     return false. }
false;public;0;3;;public int getCounter() {     return counter. }

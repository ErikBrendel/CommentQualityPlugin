commented;modifiers;parameterAmount;loc;comment;code
false;public;1;5;;public void done(final boolean doneSync) {     LOGGER.info("I'm done").     doneCount++.     callback.done(doneSync). }
false;public;2;11;;@Override public boolean process(final Exchange exchange, final AsyncCallback callback) {     LOGGER.info("I'm doing someting").     return super.process(exchange, new AsyncCallback() {          public void done(final boolean doneSync) {             LOGGER.info("I'm done").             doneCount++.             callback.done(doneSync).         }     }). }
false;public;4;22;;public Processor wrapProcessorInInterceptors(final CamelContext context, final NamedNode definition, final Processor target, final Processor nextTarget) throws Exception {     if (definition instanceof DynamicRouterDefinition<?>) {         final DelegateAsyncProcessor delegateAsyncProcessor = new DelegateAsyncProcessor() {              @Override             public boolean process(final Exchange exchange, final AsyncCallback callback) {                 LOGGER.info("I'm doing someting").                 return super.process(exchange, new AsyncCallback() {                      public void done(final boolean doneSync) {                         LOGGER.info("I'm done").                         doneCount++.                         callback.done(doneSync).                     }                 }).             }         }.         delegateAsyncProcessor.setProcessor(target).         return delegateAsyncProcessor.     }     return new DelegateAsyncProcessor(target). }
false;public;0;3;;public void reset() {     doneCount = 0. }
false;public;0;14;;@Test public void testDynamicRouterOne() throws Exception {     interceptStrategy.reset().     getMockEndpoint("mock:foo").expectedMessageCount(1).     getMockEndpoint("mock:bar").expectedMessageCount(0).     getMockEndpoint("mock:result").expectedMessageCount(1).     template.sendBody("direct:start", "Hello World").     assertMockEndpointsSatisfied().     assertEquals("Done method shall be called only once", 1, MyInterceptStrategy.doneCount). }
false;public;0;14;;@Test public void testDynamicRouterTwo() throws Exception {     interceptStrategy.reset().     getMockEndpoint("mock:foo").expectedMessageCount(1).     getMockEndpoint("mock:bar").expectedMessageCount(1).     getMockEndpoint("mock:result").expectedMessageCount(1).     template.sendBody("direct:start", "Bye World").     assertMockEndpointsSatisfied().     assertEquals("Done method shall be called only once", 1, MyInterceptStrategy.doneCount). }
false;public;0;16;;@Override public void configure() {     context.addInterceptStrategy(interceptStrategy).     from("direct:start").dynamicRouter(method(DynamicRouterWithInterceptorTest.class, "slip")).to("mock:result").     from("direct:foo").to("log:foo").to("mock:foo").     from("direct:bar").to("log:bar").to("mock:bar"). }
false;protected;0;21;;@Override protected RouteBuilder createRouteBuilder() {     return new RouteBuilder() {          @Override         public void configure() {             context.addInterceptStrategy(interceptStrategy).             from("direct:start").dynamicRouter(method(DynamicRouterWithInterceptorTest.class, "slip")).to("mock:result").             from("direct:foo").to("log:foo").to("mock:foo").             from("direct:bar").to("log:bar").to("mock:bar").         }     }. }
false;public;2;10;;public String slip(@Body String body, @Header(Exchange.SLIP_ENDPOINT) String previous) {     if (previous == null) {         return "direct:foo".     } else if ("Bye World".equals(body) && "direct://foo".equals(previous)) {         return "direct:bar".     }     // no more so return null     return null. }

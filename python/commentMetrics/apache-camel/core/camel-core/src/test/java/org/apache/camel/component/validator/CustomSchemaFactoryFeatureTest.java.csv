commented;modifiers;parameterAmount;loc;comment;code
true;protected;0;7;// Need to bind the CustomerSchemaFactory ;// Need to bind the CustomerSchemaFactory protected JndiRegistry createRegistry() throws Exception {     JndiRegistry registry = super.createRegistry().     SchemaFactory mySchemaFactory = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI).     mySchemaFactory.setFeature(XMLConstants.FEATURE_SECURE_PROCESSING, false).     registry.bind("MySchemaFactory", mySchemaFactory).     return registry. }
true;public;0;17;// just inject the SchemaFactory as we want ;// just inject the SchemaFactory as we want @Test public void testCustomSchemaFactory() throws Exception {     ValidatorComponent v = new ValidatorComponent().     v.setCamelContext(context).     v.createEndpoint("validator:org/apache/camel/component/validator/unsecuredSchema.xsd?schemaFactory=#MySchemaFactory").     try {         v.createEndpoint("validator:org/apache/camel/component/validator/unsecuredSchema.xsd").         // we should get an security exception in JDK 7 with Oracle or Sun JDK         String jdkVendor = System.getProperty("java.vm.vendor").         if (jdkVendor != null && (jdkVendor.indexOf("Oracle") > 0 || jdkVendor.indexOf("Sun") > 0)) {             fail("Expect exception here").         }     } catch (Exception ex) {     // do nothing here     } }

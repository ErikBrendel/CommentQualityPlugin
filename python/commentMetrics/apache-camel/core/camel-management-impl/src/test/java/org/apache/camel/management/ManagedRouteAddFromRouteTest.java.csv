commented;modifiers;parameterAmount;loc;comment;code
false;public;0;4;;@Override public void configure() throws Exception {     from("seda:bar").routeId("bar").to("mock:bar"). }
false;public;1;10;;@Override public void process(Exchange exchange) throws Exception {     RouteBuilder child = new RouteBuilder() {          @Override         public void configure() throws Exception {             from("seda:bar").routeId("bar").to("mock:bar").         }     }.     context.addRoutes(child). }
false;public;0;24;;@Override public void configure() throws Exception {     // put a message pre-early on the seda queue, to trigger the route, which     // then would add a 2nd route during CamelContext startup. This is a test     // to ensure the foo route is not started too soon, and thus adding the 2nd     // route works as expected     SedaEndpoint seda = context.getEndpoint("seda:start", SedaEndpoint.class).     seda.getQueue().put(new DefaultExchange(context)).     from("seda:start").routeId("foo").process(new Processor() {          @Override         public void process(Exchange exchange) throws Exception {             RouteBuilder child = new RouteBuilder() {                  @Override                 public void configure() throws Exception {                     from("seda:bar").routeId("bar").to("mock:bar").                 }             }.             context.addRoutes(child).         }     }).to("mock:result"). }
false;protected;0;29;;@Override protected RouteBuilder createRouteBuilder() throws Exception {     return new RouteBuilder() {          @Override         public void configure() throws Exception {             // put a message pre-early on the seda queue, to trigger the route, which             // then would add a 2nd route during CamelContext startup. This is a test             // to ensure the foo route is not started too soon, and thus adding the 2nd             // route works as expected             SedaEndpoint seda = context.getEndpoint("seda:start", SedaEndpoint.class).             seda.getQueue().put(new DefaultExchange(context)).             from("seda:start").routeId("foo").process(new Processor() {                  @Override                 public void process(Exchange exchange) throws Exception {                     RouteBuilder child = new RouteBuilder() {                          @Override                         public void configure() throws Exception {                             from("seda:bar").routeId("bar").to("mock:bar").                         }                     }.                     context.addRoutes(child).                 }             }).to("mock:result").         }     }. }
false;public;0;28;;@Test public void testAddRouteFromRoute() throws Exception {     // JMX tests dont work well on AIX CI servers (hangs them)     if (isPlatform("aix")) {         return.     }     MBeanServer mbeanServer = getMBeanServer().     ObjectName route1 = ObjectName.getInstance("org.apache.camel:context=camel-1,type=routes,name=\"foo\"").     // should be started     String state = (String) mbeanServer.getAttribute(route1, "State").     assertEquals("Should be started", ServiceStatus.Started.name(), state).     MockEndpoint result = getMockEndpoint("mock:result").     result.expectedMessageCount(1).     // should route the message we put on the seda queue before     result.assertIsSatisfied().     // find the 2nd route     ObjectName route2 = ObjectName.getInstance("org.apache.camel:context=camel-1,type=routes,name=\"bar\"").     // should be started     state = (String) mbeanServer.getAttribute(route2, "State").     assertEquals("Should be started", ServiceStatus.Started.name(), state). }

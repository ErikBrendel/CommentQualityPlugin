commented;modifiers;parameterAmount;loc;comment;code
false;public;1;22;;public void init(ManagementStrategy strategy) {     super.init(strategy).     this.exchangesCompleted = new StatisticCounter().     this.exchangesFailed = new StatisticCounter().     this.exchangesInflight = new StatisticCounter().     this.failuresHandled = new StatisticCounter().     this.redeliveries = new StatisticCounter().     this.externalRedeliveries = new StatisticCounter().     this.minProcessingTime = new StatisticMinimum().     this.maxProcessingTime = new StatisticMaximum().     this.totalProcessingTime = new StatisticCounter().     this.lastProcessingTime = new StatisticValue().     this.deltaProcessingTime = new StatisticDelta().     this.meanProcessingTime = new StatisticValue().     this.firstExchangeCompletedTimestamp = new StatisticValue().     this.firstExchangeFailureTimestamp = new StatisticValue().     this.lastExchangeCompletedTimestamp = new StatisticValue().     this.lastExchangeFailureTimestamp = new StatisticValue(). }
false;public;0;24;;@Override public void reset() {     super.reset().     exchangesCompleted.reset().     exchangesFailed.reset().     exchangesInflight.reset().     failuresHandled.reset().     redeliveries.reset().     externalRedeliveries.reset().     minProcessingTime.reset().     maxProcessingTime.reset().     totalProcessingTime.reset().     lastProcessingTime.reset().     deltaProcessingTime.reset().     meanProcessingTime.reset().     firstExchangeCompletedTimestamp.reset().     firstExchangeCompletedExchangeId = null.     firstExchangeFailureTimestamp.reset().     firstExchangeFailureExchangeId = null.     lastExchangeCompletedTimestamp.reset().     lastExchangeCompletedExchangeId = null.     lastExchangeFailureTimestamp.reset().     lastExchangeFailureExchangeId = null. }
false;public;0;3;;public long getExchangesCompleted() throws Exception {     return exchangesCompleted.getValue(). }
false;public;0;3;;public long getExchangesFailed() throws Exception {     return exchangesFailed.getValue(). }
false;public;0;3;;public long getExchangesInflight() {     return exchangesInflight.getValue(). }
false;public;0;3;;public long getFailuresHandled() throws Exception {     return failuresHandled.getValue(). }
false;public;0;3;;public long getRedeliveries() throws Exception {     return redeliveries.getValue(). }
false;public;0;3;;public long getExternalRedeliveries() throws Exception {     return externalRedeliveries.getValue(). }
false;public;0;3;;public long getMinProcessingTime() throws Exception {     return minProcessingTime.getValue(). }
false;public;0;3;;public long getMeanProcessingTime() throws Exception {     return meanProcessingTime.getValue(). }
false;public;0;3;;public long getMaxProcessingTime() throws Exception {     return maxProcessingTime.getValue(). }
false;public;0;3;;public long getTotalProcessingTime() throws Exception {     return totalProcessingTime.getValue(). }
false;public;0;3;;public long getLastProcessingTime() throws Exception {     return lastProcessingTime.getValue(). }
false;public;0;3;;public long getDeltaProcessingTime() throws Exception {     return deltaProcessingTime.getValue(). }
false;public;0;4;;public Date getLastExchangeCompletedTimestamp() {     long value = lastExchangeCompletedTimestamp.getValue().     return value > 0 ? new Date(value) : null. }
false;public;0;3;;public String getLastExchangeCompletedExchangeId() {     return lastExchangeCompletedExchangeId. }
false;public;0;4;;public Date getFirstExchangeCompletedTimestamp() {     long value = firstExchangeCompletedTimestamp.getValue().     return value > 0 ? new Date(value) : null. }
false;public;0;3;;public String getFirstExchangeCompletedExchangeId() {     return firstExchangeCompletedExchangeId. }
false;public;0;4;;public Date getLastExchangeFailureTimestamp() {     long value = lastExchangeFailureTimestamp.getValue().     return value > 0 ? new Date(value) : null. }
false;public;0;3;;public String getLastExchangeFailureExchangeId() {     return lastExchangeFailureExchangeId. }
false;public;0;4;;public Date getFirstExchangeFailureTimestamp() {     long value = firstExchangeFailureTimestamp.getValue().     return value > 0 ? new Date(value) : null. }
false;public;0;3;;public String getFirstExchangeFailureExchangeId() {     return firstExchangeFailureExchangeId. }
false;public;0;3;;public boolean isStatisticsEnabled() {     return statisticsEnabled. }
false;public;1;3;;public void setStatisticsEnabled(boolean statisticsEnabled) {     this.statisticsEnabled = statisticsEnabled. }
false;public;1;3;;public void processExchange(Exchange exchange) {     exchangesInflight.increment(). }
false;public;2;38;;public void completedExchange(Exchange exchange, long time) {     increment().     exchangesCompleted.increment().     exchangesInflight.decrement().     if (ExchangeHelper.isFailureHandled(exchange)) {         failuresHandled.increment().     }     Boolean externalRedelivered = exchange.isExternalRedelivered().     if (externalRedelivered != null && externalRedelivered) {         externalRedeliveries.increment().     }     minProcessingTime.updateValue(time).     maxProcessingTime.updateValue(time).     totalProcessingTime.updateValue(time).     lastProcessingTime.updateValue(time).     deltaProcessingTime.updateValue(time).     long now = System.currentTimeMillis().     if (!firstExchangeCompletedTimestamp.isUpdated()) {         firstExchangeCompletedTimestamp.updateValue(now).     }     lastExchangeCompletedTimestamp.updateValue(now).     if (firstExchangeCompletedExchangeId == null) {         firstExchangeCompletedExchangeId = exchange.getExchangeId().     }     lastExchangeCompletedExchangeId = exchange.getExchangeId().     // update mean     long mean = 0.     long completed = exchangesCompleted.getValue().     if (completed > 0) {         mean = totalProcessingTime.getValue() / completed.     }     meanProcessingTime.updateValue(mean). }
false;public;1;24;;public void failedExchange(Exchange exchange) {     increment().     exchangesFailed.increment().     exchangesInflight.decrement().     if (ExchangeHelper.isRedelivered(exchange)) {         redeliveries.increment().     }     Boolean externalRedelivered = exchange.isExternalRedelivered().     if (externalRedelivered != null && externalRedelivered) {         externalRedeliveries.increment().     }     long now = System.currentTimeMillis().     if (!firstExchangeFailureTimestamp.isUpdated()) {         firstExchangeFailureTimestamp.updateValue(now).     }     lastExchangeFailureTimestamp.updateValue(now).     if (firstExchangeFailureExchangeId == null) {         firstExchangeFailureExchangeId = exchange.getExchangeId().     }     lastExchangeFailureExchangeId = exchange.getExchangeId(). }
false;public;1;30;;public String dumpStatsAsXml(boolean fullStats) {     StringBuilder sb = new StringBuilder().     sb.append("<stats ").     sb.append(String.format("exchangesCompleted=\"%s\"", exchangesCompleted.getValue())).     sb.append(String.format(" exchangesFailed=\"%s\"", exchangesFailed.getValue())).     sb.append(String.format(" failuresHandled=\"%s\"", failuresHandled.getValue())).     sb.append(String.format(" redeliveries=\"%s\"", redeliveries.getValue())).     sb.append(String.format(" externalRedeliveries=\"%s\"", externalRedeliveries.getValue())).     sb.append(String.format(" minProcessingTime=\"%s\"", minProcessingTime.getValue())).     sb.append(String.format(" maxProcessingTime=\"%s\"", maxProcessingTime.getValue())).     sb.append(String.format(" totalProcessingTime=\"%s\"", totalProcessingTime.getValue())).     sb.append(String.format(" lastProcessingTime=\"%s\"", lastProcessingTime.getValue())).     sb.append(String.format(" deltaProcessingTime=\"%s\"", deltaProcessingTime.getValue())).     sb.append(String.format(" meanProcessingTime=\"%s\"", meanProcessingTime.getValue())).     if (fullStats) {         sb.append(String.format(" startTimestamp=\"%s\"", dateAsString(startTimestamp.getTime()))).         sb.append(String.format(" resetTimestamp=\"%s\"", dateAsString(resetTimestamp.getTime()))).         sb.append(String.format(" firstExchangeCompletedTimestamp=\"%s\"", dateAsString(firstExchangeCompletedTimestamp.getValue()))).         sb.append(String.format(" firstExchangeCompletedExchangeId=\"%s\"", nullSafe(firstExchangeCompletedExchangeId))).         sb.append(String.format(" firstExchangeFailureTimestamp=\"%s\"", dateAsString(firstExchangeFailureTimestamp.getValue()))).         sb.append(String.format(" firstExchangeFailureExchangeId=\"%s\"", nullSafe(firstExchangeFailureExchangeId))).         sb.append(String.format(" lastExchangeCompletedTimestamp=\"%s\"", dateAsString(lastExchangeCompletedTimestamp.getValue()))).         sb.append(String.format(" lastExchangeCompletedExchangeId=\"%s\"", nullSafe(lastExchangeCompletedExchangeId))).         sb.append(String.format(" lastExchangeFailureTimestamp=\"%s\"", dateAsString(lastExchangeFailureTimestamp.getValue()))).         sb.append(String.format(" lastExchangeFailureExchangeId=\"%s\"", nullSafe(lastExchangeFailureExchangeId))).     }     sb.append("/>").     return sb.toString(). }
false;private,static;1;6;;private static String dateAsString(long value) {     if (value == 0) {         return "".     }     return new SimpleDateFormat(TIMESTAMP_FORMAT).format(value). }
false;private,static;1;3;;private static String nullSafe(String s) {     return s != null ? s : "". }

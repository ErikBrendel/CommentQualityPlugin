commented;modifiers;parameterAmount;loc;comment;code
false;public;0;6;;@Override @Before public void setUp() throws Exception {     port = AvailablePortFinder.getNextAvailable(16200).     super.setUp(). }
false;public;1;6;;@Override public void onMessage(String message) {     received.add(message).     log.info("received --> " + message).     latch.countDown(). }
false;public;1;3;;@Override public void onOpen(WebSocket websocket) { }
false;public;1;3;;@Override public void onClose(WebSocket websocket) { }
false;public;1;4;;@Override public void onError(Throwable t) {     t.printStackTrace(). }
false;public;0;47;;@Test public void testStaticResource() throws Exception {     AsyncHttpClient c = new DefaultAsyncHttpClient().     WebSocket websocket = c.prepareGet("ws://127.0.0.1:" + port + "/echo").execute(new WebSocketUpgradeHandler.Builder().addWebSocketListener(new WebSocketTextListener() {          @Override         public void onMessage(String message) {             received.add(message).             log.info("received --> " + message).             latch.countDown().         }          @Override         public void onOpen(WebSocket websocket) {         }          @Override         public void onClose(WebSocket websocket) {         }          @Override         public void onError(Throwable t) {             t.printStackTrace().         }     }).build()).get().     websocket.sendMessage("Beer").     assertTrue(latch.await(10, TimeUnit.SECONDS)).     assertEquals(1, received.size()).     assertEquals("BeerBeer", received.get(0)).     // now call static html     Response response = c.prepareGet("http://127.0.0.1:" + port + "/hello.html").execute().get(5, TimeUnit.SECONDS).     assertNotNull(response).     assertEquals(200, response.getStatusCode()).     String body = response.getResponseBody().     assertNotNull(body).     log.info(body).     assertTrue(body.contains("Hello World")).     c.close().     websocket.close().     c.close(). }
false;public;0;18;;public void configure() {     WebsocketComponent websocketComponent = (WebsocketComponent) context.getComponent("websocket").     websocketComponent.setPort(port).     websocketComponent.setMinThreads(1).     websocketComponent.setMaxThreads(25).     websocketComponent.setStaticResources("classpath:.").     // START SNIPPET: e1     // expose a echo websocket client, that sends back an echo     from("websocket://echo").log(">>> Message received from WebSocket Client : ${body}").transform().simple("${body}${body}").to("websocket://echo"). // END SNIPPET: e1 }
false;protected;0;23;;@Override protected RouteBuilder createRouteBuilder() throws Exception {     return new RouteBuilder() {          public void configure() {             WebsocketComponent websocketComponent = (WebsocketComponent) context.getComponent("websocket").             websocketComponent.setPort(port).             websocketComponent.setMinThreads(1).             websocketComponent.setMaxThreads(25).             websocketComponent.setStaticResources("classpath:.").             // START SNIPPET: e1             // expose a echo websocket client, that sends back an echo             from("websocket://echo").log(">>> Message received from WebSocket Client : ${body}").transform().simple("${body}${body}").to("websocket://echo").         // END SNIPPET: e1         }     }. }

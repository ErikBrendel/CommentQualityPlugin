commented;modifiers;parameterAmount;loc;comment;code
false;public;1;6;;// **************************** // Handlers // **************************** @InvokeOnHeader(CaffeineConstants.ACTION_CLEANUP) public void onCleanUp(Message message) throws Exception {     cache.cleanUp().     setResult(message, true, null, null). }
false;public;1;6;;@InvokeOnHeader(CaffeineConstants.ACTION_PUT) public void onPut(Message message) throws Exception {     cache.put(getKey(message), getValue(message, configuration.getValueType())).     setResult(message, true, null, null). }
false;public;1;6;;@InvokeOnHeader(CaffeineConstants.ACTION_PUT_ALL) public void onPutAll(Message message) throws Exception {     cache.putAll((Map) getValue(message, Map.class)).     setResult(message, true, null, null). }
false;public;1;6;;@InvokeOnHeader(CaffeineConstants.ACTION_GET) public void onGet(Message message) throws Exception {     Object result = cache.getIfPresent(getKey(message)).     setResult(message, true, result, null). }
false;public;1;6;;@InvokeOnHeader(CaffeineConstants.ACTION_GET_ALL) public void onGetAll(Message message) throws Exception {     Object result = cache.getAllPresent(message.getHeader(CaffeineConstants.KEYS, Collections::emptySet, Set.class)).     setResult(message, true, result, null). }
false;public;1;6;;@InvokeOnHeader(CaffeineConstants.ACTION_INVALIDATE) public void onInvalidate(Message message) throws Exception {     cache.invalidate(getKey(message)).     setResult(message, true, null, null). }
false;public;1;6;;@InvokeOnHeader(CaffeineConstants.ACTION_INVALIDATE_ALL) public void onInvalidateAll(Message message) throws Exception {     cache.invalidateAll(message.getHeader(CaffeineConstants.KEYS, Collections::emptySet, Set.class)).     setResult(message, true, null, null). }
false;private;1;12;;// **************************** // Helpers // **************************** private Object getKey(final Message message) throws Exception {     Object value = message.getHeader(CaffeineConstants.KEY, configuration.getKeyType()).     if (value == null) {         value = configuration.getKey().     }     if (value == null) {         throw new CamelExchangeException("No value provided in header or as default value (" + CaffeineConstants.KEY + ")", message.getExchange()).     }     return value. }
false;private;2;12;;private Object getValue(final Message message, final Class<?> type) throws Exception {     Object value = message.getHeader(CaffeineConstants.VALUE, type).     if (value == null) {         value = message.getBody(type).     }     if (value == null) {         throw new CamelExchangeException("No value provided in header or body (" + CaffeineConstants.VALUE + ")", message.getExchange()).     }     return value. }
false;private;4;11;;private void setResult(Message message, boolean success, Object result, Object oldValue) {     message.setHeader(CaffeineConstants.ACTION_SUCCEEDED, success).     message.setHeader(CaffeineConstants.ACTION_HAS_RESULT, oldValue != null || result != null).     if (oldValue != null) {         message.setHeader(CaffeineConstants.OLD_VALUE, oldValue).     }     if (result != null) {         message.setBody(result).     } }

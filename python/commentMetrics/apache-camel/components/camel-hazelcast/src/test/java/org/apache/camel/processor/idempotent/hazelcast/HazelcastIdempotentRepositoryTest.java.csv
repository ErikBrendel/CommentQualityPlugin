commented;modifiers;parameterAmount;loc;comment;code
false;public;0;9;;@Before public void setUp() throws Exception {     hazelcastInstance = Hazelcast.newHazelcastInstance(null).     cache = hazelcastInstance.getMap("myRepo").     repo = new HazelcastIdempotentRepository(hazelcastInstance, "myRepo").     super.setUp().     cache.clear().     repo.start(). }
false;public;0;7;;@After public void tearDown() throws Exception {     repo.stop().     super.tearDown().     cache.clear().     hazelcastInstance.getLifecycleService().shutdown(). }
false;public;0;14;;@Test public void testAdd() throws Exception {     // ADD first key     assertTrue(repo.add(key01)).     assertTrue(cache.containsKey(key01)).     // try to ADD the same key again     assertFalse(repo.add(key01)).     assertEquals(1, cache.size()).     // try to ADD an other one     assertTrue(repo.add(key02)).     assertEquals(2, cache.size()). }
false;public;0;9;;@Test public void testConfirm() throws Exception {     // ADD first key and confirm     assertTrue(repo.add(key01)).     assertTrue(repo.confirm(key01)).     // try to confirm a key that isn't there     assertFalse(repo.confirm(key02)). }
false;public;0;9;;@Test public void testContains() throws Exception {     assertFalse(repo.contains(key01)).     // ADD key and check again     assertTrue(repo.add(key01)).     assertTrue(repo.contains(key01)). }
false;public;0;11;;@Test public void testRemove() throws Exception {     // ADD key to remove     assertTrue(repo.add(key01)).     assertTrue(repo.add(key02)).     assertEquals(2, cache.size()).     // CLEAR repo     repo.clear().     assertEquals(0, cache.size()). }
false;public;0;13;;@Test public void testClear() throws Exception {     // ADD key to remove     assertTrue(repo.add(key01)).     assertEquals(1, cache.size()).     // remove key     assertTrue(repo.remove(key01)).     assertEquals(0, cache.size()).     // try to remove a key that isn't there     assertFalse(repo.remove(key02)). }
false;public;0;16;;@Test public void testRepositoryInRoute() throws Exception {     MockEndpoint mock = getMockEndpoint("mock:out").     mock.expectedBodiesReceived("a", "b").     // c is a duplicate     // should be started     assertEquals("Should be started", true, repo.getStatus().isStarted()).     // send 3 message with one duplicated key (key01)     template.sendBodyAndHeader("direct://in", "a", "messageId", key01).     template.sendBodyAndHeader("direct://in", "b", "messageId", key02).     template.sendBodyAndHeader("direct://in", "c", "messageId", key01).     assertMockEndpointsSatisfied(). }
false;public;0;6;;@Override public void configure() throws Exception {     from("direct://in").idempotentConsumer(header("messageId"), repo).to("mock://out"). }
false;protected;0;10;;protected RouteBuilder createRouteBuilder() throws Exception {     return new RouteBuilder() {          @Override         public void configure() throws Exception {             from("direct://in").idempotentConsumer(header("messageId"), repo).to("mock://out").         }     }. }

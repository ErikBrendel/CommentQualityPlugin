commented;modifiers;parameterAmount;loc;comment;code
false;protected;0;3;;protected AbstractXmlApplicationContext createApplicationContext() {     return new ClassPathXmlApplicationContext("org/apache/camel/spring/camelLoadRoutesFromXMLTest.xml"). }
false;public;0;66;;@Test public void testLoadRoutes() throws Exception {     SpringCamelContext camel = applicationContext.getBean(SpringCamelContext.class).     assertEquals(0, camel.getRoutes().size()).     assertTrue(camel.getStatus().isStarted()).     // load routes from xml file     InputStream is = this.getClass().getResourceAsStream("myRoutes.xml").     RoutesDefinition routes = camel.loadRoutesDefinition(is).     camel.addRouteDefinitions(routes.getRoutes()).     assertEquals(2, camel.getRoutes().size()).     // they should be started     assertTrue(camel.getRouteController().getRouteStatus("foo").isStarted()).     assertTrue(camel.getRouteController().getRouteStatus("bar").isStarted()).     // and they should work     MockEndpoint foo = camel.getEndpoint("mock:foo", MockEndpoint.class).     foo.expectedBodiesReceived("Hello World").     MockEndpoint bar = camel.getEndpoint("mock:bar", MockEndpoint.class).     bar.expectedBodiesReceived("Bye World").     ProducerTemplate producer = camel.createProducerTemplate().     producer.sendBody("direct:foo", "Hello World").     producer.sendBody("direct:bar", "Bye World").     MockEndpoint.assertIsSatisfied(foo, bar).     // remove the routes     camel.removeRouteDefinitions(routes.getRoutes()).     // they should be removed     assertNull(camel.getRouteController().getRouteStatus("foo")).     assertNull(camel.getRouteController().getRouteStatus("bar")).     // you can also do this manually via their route ids     // camel.getRouteController().stopRoute("foo").     // camel.getRouteController().removeRoute("foo").     // camel.getRouteController().stopRoute("bar").     // camel.getRouteController().removeRoute("bar").     // load updated xml     is = this.getClass().getResourceAsStream("myUpdatedRoutes.xml").     routes = camel.loadRoutesDefinition(is).     camel.addRouteDefinitions(routes.getRoutes()).     assertEquals(2, camel.getRoutes().size()).     // they should be started     assertTrue(camel.getRouteController().getRouteStatus("foo").isStarted()).     assertTrue(camel.getRouteController().getRouteStatus("bar").isStarted()).     // and they should work again (need to get new mock endpoint as the old is gone)     foo = camel.getEndpoint("mock:foo", MockEndpoint.class).     foo.expectedBodiesReceived("Updated: Hello World").     bar = camel.getEndpoint("mock:bar", MockEndpoint.class).     bar.expectedBodiesReceived("Updated: Bye World").     producer.sendBody("direct:foo", "Hello World").     producer.sendBody("direct:bar", "Bye World").     MockEndpoint.assertIsSatisfied(foo, bar). }

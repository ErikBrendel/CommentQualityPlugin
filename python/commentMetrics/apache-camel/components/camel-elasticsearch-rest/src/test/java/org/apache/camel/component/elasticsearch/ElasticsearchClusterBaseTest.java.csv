commented;modifiers;parameterAmount;loc;comment;code
false;public,static;0;26;;@SuppressWarnings("resource") @BeforeClass public static void cleanUpOnce() throws Exception {     deleteDirectory("target/testcluster/").     clusterName = "es-cl-run-" + System.currentTimeMillis().     // create runner instance     runner = new ElasticsearchClusterRunner().     // create ES nodes     runner.onBuild((number, settingsBuilder) -> {         settingsBuilder.put("http.cors.enabled", true).         settingsBuilder.put("http.cors.allow-origin", "*").         settingsBuilder.put("discovery.zen.ping.unicast.hosts", "127.0.0.1:9301,127.0.0.1:9302,127.0.0.1:9303").     }).build(newConfigs().clusterName(clusterName).numOfNode(3).baseHttpPort(ES_BASE_HTTP_PORT).basePath("target/testcluster/").disableESLogger()).     // wait for green status     runner.ensureGreen().     restclientbuilder = RestClient.builder(new HttpHost(InetAddress.getByName("localhost"), ES_FIRST_NODE_TRANSPORT_PORT)).     client = new RestHighLevelClient(restclientbuilder).     restClient = client.getLowLevelClient(). }
false;public,static;0;12;;@AfterClass public static void teardownOnce() throws Exception {     if (restClient != null) {         restClient.close().     }     if (runner != null) {         // close runner         runner.close().         // delete all files         runner.clean().     } }
false;public;0;5;;@Override public boolean isCreateCamelContextPerClass() {     // let's speed up the tests using the same context     return true. }
true;;1;20;/**  * As we don't delete the {@code target/data} folder for <b>each</b> test  * below (otherwise they would run much slower), we need to make sure  * there's no side effect of the same used data through creating unique  * indexes.  */ ;/**  * As we don't delete the {@code target/data} folder for <b>each</b> test  * below (otherwise they would run much slower), we need to make sure  * there's no side effect of the same used data through creating unique  * indexes.  */ Map<String, String> createIndexedData(String... additionalPrefixes) {     String prefix = createPrefix().     // take over any potential prefixes we may have been asked for     if (additionalPrefixes.length > 0) {         StringBuilder sb = new StringBuilder(prefix).         for (String additionalPrefix : additionalPrefixes) {             sb.append(additionalPrefix).append("-").         }         prefix = sb.toString().     }     String key = prefix + "key".     String value = prefix + "value".     log.info("Creating indexed data using the key/value pair {} => {}", key, value).     Map<String, String> map = new HashMap<>().     map.put(key, value).     return map. }
false;;0;4;;String createPrefix() {     // make use of the test method name to avoid collision     return getTestMethodName().toLowerCase() + "-". }

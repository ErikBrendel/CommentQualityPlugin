commented;modifiers;parameterAmount;loc;comment;code
false;protected;0;7;;@Override protected JndiRegistry createRegistry() throws Exception {     JndiRegistry registry = super.createRegistry().     registry.bind("ksf", new File("src/test/resources/keystore.jks")).     registry.bind("tsf", new File("src/test/resources/keystore.jks")).     return registry. }
false;public;0;4;;@Override public boolean isUseRouteBuilder() {     return false. }
false;public;1;11;;public void process(Exchange exchange) throws Exception {     SSLSession session = exchange.getIn().getHeader(NettyConstants.NETTY_SSL_SESSION, SSLSession.class).     if (session != null) {         javax.security.cert.X509Certificate cert = session.getPeerCertificateChain()[0].         Principal principal = cert.getSubjectDN().         log.info("Client Cert SubjectDN: {}", principal.getName()).         exchange.getOut().setBody("When You Go Home, Tell Them Of Us And Say, For Your Tomorrow, We Gave Our Today.").     } else {         exchange.getOut().setBody("Cannot start conversion without SSLSession").     } }
false;public;0;17;;public void configure() {     // needClientAuth=true so we can get the client certificate details     from("netty4:tcp://localhost:{{port}}?sync=true&ssl=true&passphrase=changeit&keyStoreResource=#ksf&trustStoreResource=#tsf&needClientAuth=true").process(new Processor() {          public void process(Exchange exchange) throws Exception {             SSLSession session = exchange.getIn().getHeader(NettyConstants.NETTY_SSL_SESSION, SSLSession.class).             if (session != null) {                 javax.security.cert.X509Certificate cert = session.getPeerCertificateChain()[0].                 Principal principal = cert.getSubjectDN().                 log.info("Client Cert SubjectDN: {}", principal.getName()).                 exchange.getOut().setBody("When You Go Home, Tell Them Of Us And Say, For Your Tomorrow, We Gave Our Today.").             } else {                 exchange.getOut().setBody("Cannot start conversion without SSLSession").             }         }     }). }
false;public;0;33;;@Test public void testSSLInOutWithNettyConsumer() throws Exception {     // ibm jdks dont have sun security algorithms     if (isJavaVendor("ibm")) {         return.     }     context.addRoutes(new RouteBuilder() {          public void configure() {             // needClientAuth=true so we can get the client certificate details             from("netty4:tcp://localhost:{{port}}?sync=true&ssl=true&passphrase=changeit&keyStoreResource=#ksf&trustStoreResource=#tsf&needClientAuth=true").process(new Processor() {                  public void process(Exchange exchange) throws Exception {                     SSLSession session = exchange.getIn().getHeader(NettyConstants.NETTY_SSL_SESSION, SSLSession.class).                     if (session != null) {                         javax.security.cert.X509Certificate cert = session.getPeerCertificateChain()[0].                         Principal principal = cert.getSubjectDN().                         log.info("Client Cert SubjectDN: {}", principal.getName()).                         exchange.getOut().setBody("When You Go Home, Tell Them Of Us And Say, For Your Tomorrow, We Gave Our Today.").                     } else {                         exchange.getOut().setBody("Cannot start conversion without SSLSession").                     }                 }             }).         }     }).     context.start().     String response = template.requestBody("netty4:tcp://localhost:{{port}}?sync=true&ssl=true&passphrase=changeit&keyStoreResource=#ksf&trustStoreResource=#tsf", "Epitaph in Kohima, India marking the WWII Battle of Kohima and Imphal, Burma Campaign - Attributed to John Maxwell Edmonds", String.class).     assertEquals("When You Go Home, Tell Them Of Us And Say, For Your Tomorrow, We Gave Our Today.", response). }

commented;modifiers;parameterAmount;loc;comment;code
false;public,static;0;5;;@BeforeClass public static void initPort() {     serverPort = AvailablePortFinder.getNextAvailable().     uri = "netty4:tcp://localhost:" + serverPort + "?sync=false&allowDefaultCodec=false&decoders=#decoder&encoder=#encoder". }
false;protected;0;7;;@Override protected JndiRegistry createRegistry() throws Exception {     JndiRegistry jndi = super.createRegistry().     jndi.bind("decoder", new Rfc5425FrameDecoder()).     jndi.bind("encoder", new Rfc5425Encoder()).     return jndi. }
false;public;0;13;;@Test public void testSendingCamel() throws Exception {     MockEndpoint mock = getMockEndpoint("mock:syslogReceiver").     MockEndpoint mock2 = getMockEndpoint("mock:syslogReceiver2").     mock.expectedMessageCount(1).     mock2.expectedMessageCount(1).     mock2.expectedBodiesReceived(MESSAGE).     template.sendBody("direct:start", MESSAGE.getBytes("UTF8")).     assertMockEndpointsSatisfied(). }
false;public;1;4;;@Override public void process(Exchange ex) {     assertTrue(ex.getIn().getBody() instanceof SyslogMessage). }
false;public;0;15;;@Override public void configure() throws Exception {     context.setTracing(true).     DataFormat syslogDataFormat = new SyslogDataFormat().     // we setup a Syslog listener on a random port.     from(uri).unmarshal(syslogDataFormat).process(new Processor() {          @Override         public void process(Exchange ex) {             assertTrue(ex.getIn().getBody() instanceof SyslogMessage).         }     }).to("mock:syslogReceiver").marshal(syslogDataFormat).to("mock:syslogReceiver2").     // Here we need to turn the request body into ByteBuf     from("direct:start").convertBodyTo(ByteBuf.class).to(uri). }
false;protected;0;22;;@Override protected RouteBuilder createRouteBuilder() throws Exception {     context().getRegistry(JndiRegistry.class).bind("rfc5426FrameDecoder", new Rfc5425FrameDecoder()).     return new RouteBuilder() {          @Override         public void configure() throws Exception {             context.setTracing(true).             DataFormat syslogDataFormat = new SyslogDataFormat().             // we setup a Syslog listener on a random port.             from(uri).unmarshal(syslogDataFormat).process(new Processor() {                  @Override                 public void process(Exchange ex) {                     assertTrue(ex.getIn().getBody() instanceof SyslogMessage).                 }             }).to("mock:syslogReceiver").marshal(syslogDataFormat).to("mock:syslogReceiver2").             // Here we need to turn the request body into ByteBuf             from("direct:start").convertBodyTo(ByteBuf.class).to(uri).         }     }. }

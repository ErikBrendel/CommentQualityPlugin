commented;modifiers;parameterAmount;loc;comment;code
false;protected;0;28;;@Override protected void doStart() throws Exception {     super.doStart().     this.targetAddress = GenericAddress.parse(this.endpoint.getAddress()).     log.debug("targetAddress: {}", targetAddress).     this.usm = new USM(SecurityProtocols.getInstance(), new OctetString(MPv3.createLocalEngineID()), 0).     SecurityModels.getInstance().addSecurityModel(this.usm).     // setting up target     this.target = new CommunityTarget().     this.target.setCommunity(new OctetString(endpoint.getSnmpCommunity())).     this.target.setAddress(this.targetAddress).     this.target.setRetries(this.endpoint.getRetries()).     this.target.setTimeout(this.endpoint.getTimeout()).     this.target.setVersion(this.endpoint.getSnmpVersion()).     this.pdu = new PDU().     for (OID oid : this.endpoint.getOids()) {         this.pdu.add(new VariableBinding(oid)).     }     this.pdu.setErrorIndex(0).     this.pdu.setErrorStatus(0).     this.pdu.setMaxRepetitions(0).     this.pdu.setType(PDU.GET). }
false;protected;0;13;;@Override protected void doStop() throws Exception {     super.doStop().     try {         SecurityModels.getInstance().removeSecurityModel(new Integer32(this.usm.getID())).     } finally {         this.targetAddress = null.         this.usm = null.         this.target = null.         this.pdu = null.     } }
false;public;1;41;;@Override public void process(final Exchange exchange) throws Exception {     // load connection data only if the endpoint is enabled     Snmp snmp = null.     TransportMapping<? extends Address> transport = null.     try {         log.debug("Starting SNMP producer on {}", this.endpoint.getAddress()).         // either tcp or udp         if ("tcp".equals(this.endpoint.getProtocol())) {             transport = new DefaultTcpTransportMapping().         } else if ("udp".equals(this.endpoint.getProtocol())) {             transport = new DefaultUdpTransportMapping().         } else {             throw new IllegalArgumentException("Unknown protocol: " + this.endpoint.getProtocol()).         }         snmp = new Snmp(transport).         log.debug("Snmp: i am sending").         snmp.listen().         ResponseEvent responseEvent = snmp.send(this.pdu, this.target).         log.debug("Snmp: sended").         if (responseEvent.getResponse() != null) {             exchange.getIn().setBody(new SnmpMessage(getEndpoint().getCamelContext(), responseEvent.getResponse())).         } else {             throw new TimeoutException("SNMP Producer Timeout").         }     } finally {         try {             transport.close().         } catch (Exception e) {         }         try {             snmp.close().         } catch (Exception e) {         }     } }

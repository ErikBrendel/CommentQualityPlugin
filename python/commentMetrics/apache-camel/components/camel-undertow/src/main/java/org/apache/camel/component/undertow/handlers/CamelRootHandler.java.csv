commented;modifiers;parameterAmount;loc;comment;code
false;public;1;3;;public void handleRequest(HttpServerExchange exchange) throws Exception {     pathHandler.handleRequest(exchange). }
false;public,synchronized;4;56;;public synchronized HttpHandler add(String path, String methods, boolean prefixMatch, HttpHandler handler) {     String basePath = getBasePath(path).     HttpHandler basePathHandler = pathHandler.getHandler(basePath).     CamelMethodHandler targetHandler.     if (path.contains("{")) {         // Adding a handler for the template path         String relativePath = path.substring(basePath.length()).         if (basePathHandler instanceof CamelPathTemplateHandler) {             CamelPathTemplateHandler templateHandler = (CamelPathTemplateHandler) basePathHandler.             targetHandler = templateHandler.get(relativePath).             if (targetHandler == null) {                 targetHandler = new CamelMethodHandler().                 templateHandler.add(relativePath, targetHandler).             }         } else {             CamelPathTemplateHandler templateHandler.             if (basePathHandler instanceof CamelMethodHandler) {                 // A static path handler is already set for the base path. Use it as a default handler                 templateHandler = new CamelPathTemplateHandler((CamelMethodHandler) basePathHandler).             } else if (basePathHandler == null) {                 templateHandler = new CamelPathTemplateHandler(new CamelMethodHandler()).             } else {                 throw new IllegalArgumentException(String.format("Unsupported handler '%s' was found", basePathHandler)).             }             targetHandler = new CamelMethodHandler().             templateHandler.add(relativePath, targetHandler).             pathHandler.addPrefixPath(basePath, templateHandler).         }     } else {         // Adding a handler for the static path         if (basePathHandler instanceof CamelPathTemplateHandler) {             CamelPathTemplateHandler templateHandler = (CamelPathTemplateHandler) basePathHandler.             if (!prefixMatch) {                 targetHandler = templateHandler.getDefault().             } else {                 throw new IllegalArgumentException(String.format("Duplicate handlers on a path '%s'", path)).             }         } else {             if (basePathHandler instanceof CamelMethodHandler) {                 targetHandler = (CamelMethodHandler) basePathHandler.             } else if (basePathHandler == null) {                 targetHandler = new CamelMethodHandler().                 if (prefixMatch) {                     pathHandler.addPrefixPath(basePath, targetHandler).                 } else {                     pathHandler.addExactPath(basePath, targetHandler).                 }             } else {                 throw new IllegalArgumentException(String.format("Unsupported handler '%s' was found", basePathHandler)).             }         }     }     return targetHandler.add(methods, handler). }
false;public,synchronized;3;43;;public synchronized void remove(String path, String methods, boolean prefixMatch) {     String basePath = getBasePath(path).     HttpHandler basePathHandler = pathHandler.getHandler(basePath).     if (basePathHandler == null) {         return.     }     if (path.contains("{")) {         // Removing a handler for the template path         String relativePath = path.substring(basePath.length()).         CamelPathTemplateHandler templateHandler = (CamelPathTemplateHandler) basePathHandler.         CamelMethodHandler targetHandler = templateHandler.get(relativePath).         if (targetHandler.remove(methods)) {             templateHandler.remove(relativePath).             if (templateHandler.isEmpty()) {                 pathHandler.removePrefixPath(basePath).             }         }     } else {         // Removing a handler for the static path         if (basePathHandler instanceof CamelPathTemplateHandler) {             String relativePath = path.substring(basePath.length()).             CamelPathTemplateHandler templateHandler = (CamelPathTemplateHandler) basePathHandler.             CamelMethodHandler targetHandler = templateHandler.getDefault().             if (targetHandler.remove(methods)) {                 templateHandler.remove(relativePath).                 if (templateHandler.isEmpty()) {                     pathHandler.removePrefixPath(basePath).                 }             }         } else {             CamelMethodHandler targetHandler = (CamelMethodHandler) basePathHandler.             if (targetHandler.remove(methods)) {                 if (prefixMatch) {                     pathHandler.removePrefixPath(basePath).                 } else {                     pathHandler.removeExactPath(basePath).                 }             }         }     } }
false;public,synchronized;0;3;;public synchronized boolean isEmpty() {     return pathHandler.isEmpty(). }
false;public;0;3;;public String toString() {     return pathHandler.toString(). }
false;private;1;6;;private String getBasePath(String path) {     if (path.contains("{")) {         path = PathTemplate.create(path).getBase().     }     return URLUtils.normalizeSlashes(path). }

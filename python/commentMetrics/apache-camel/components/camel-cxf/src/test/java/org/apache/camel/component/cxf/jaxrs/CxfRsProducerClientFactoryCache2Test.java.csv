commented;modifiers;parameterAmount;loc;comment;code
false;public;0;9;;@Before public void setUp() throws Exception {     applicationContext = new ClassPathXmlApplicationContext("org/apache/camel/component/cxf/jaxrs/CxfRsProducerClientFactoryCacheTest2.xml").     context2 = SpringCamelContext.springCamelContext(applicationContext, false).     context2.start().     template2 = context2.createProducerTemplate().     template2.start(). }
false;public;0;11;;@After public void tearDown() throws Exception {     if (context2 != null) {         context2.stop().         template2.stop().     }     // need to shutdown the application context to shutdown the bus     if (applicationContext != null) {         applicationContext.close().     } }
false;public;0;4;;@Test public void testGetCostumerWithHttpCentralClientAPI() throws Exception {     doRunTest(template2, getPort2()). }
false;public;1;10;;public void process(Exchange exchange) throws Exception {     exchange.setPattern(ExchangePattern.InOut).     Message inMessage = exchange.getIn().     inMessage.setHeader(CxfConstants.CAMEL_CXF_RS_USING_HTTP_API, Boolean.TRUE).     inMessage.setHeader(Exchange.HTTP_METHOD, "GET").     inMessage.setHeader(Exchange.HTTP_PATH, "/customerservice/customers/123").     inMessage.setHeader(CxfConstants.CAMEL_CXF_RS_RESPONSE_CLASS, Customer.class).     inMessage.setHeader("clientPort", clientPort).     inMessage.setBody(null). }
false;private;2;23;;private void doRunTest(ProducerTemplate template, final int clientPort) {     // use request as we want InOut     Exchange exchange = template.request("direct://http", new Processor() {          public void process(Exchange exchange) throws Exception {             exchange.setPattern(ExchangePattern.InOut).             Message inMessage = exchange.getIn().             inMessage.setHeader(CxfConstants.CAMEL_CXF_RS_USING_HTTP_API, Boolean.TRUE).             inMessage.setHeader(Exchange.HTTP_METHOD, "GET").             inMessage.setHeader(Exchange.HTTP_PATH, "/customerservice/customers/123").             inMessage.setHeader(CxfConstants.CAMEL_CXF_RS_RESPONSE_CLASS, Customer.class).             inMessage.setHeader("clientPort", clientPort).             inMessage.setBody(null).         }     }).     // get the response message     Customer response = (Customer) exchange.getOut().getBody().     assertNotNull("The response should not be null ", response).     assertEquals("Get a wrong customer id ", String.valueOf(response.getId()), "123").     assertEquals("Get a wrong customer name", response.getName(), "John").     assertEquals("Get a wrong response code", 200, exchange.getOut().getHeader(Exchange.HTTP_RESPONSE_CODE)). }
false;public;0;3;;public int getPort2() {     return port2. }

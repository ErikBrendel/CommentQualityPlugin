commented;modifiers;parameterAmount;loc;comment;code
false;public;0;11;;@Before public void setUp() throws Exception {     camelContext = new DefaultCamelContext().     if (canTest()) {         cluster = CassandraUnitUtils.cassandraCluster().         session = cluster.connect(CassandraUnitUtils.KEYSPACE).         aggregationRepository = new NamedCassandraAggregationRepository(session, "ID").         aggregationRepository.setTable("NAMED_CAMEL_AGGREGATION").         aggregationRepository.start().     } }
false;public;0;8;;@After public void tearDown() throws Exception {     if (canTest()) {         aggregationRepository.stop().         session.close().         cluster.close().     } }
false;private;1;5;;private boolean exists(String key) {     return session.execute("select KEY from NAMED_CAMEL_AGGREGATION where NAME=? and KEY=?", "ID", key).one() != null. }
false;public;0;15;;@Test public void testAdd() {     if (!canTest()) {         return.     }     // Given     String key = "Add".     assertFalse(exists(key)).     Exchange exchange = new DefaultExchange(camelContext).     // When     aggregationRepository.add(camelContext, key, exchange).     // Then     assertTrue(exists(key)). }
false;public;0;17;;@Test public void testGetExists() {     if (!canTest()) {         return.     }     // Given     String key = "Get_Exists".     Exchange exchange = new DefaultExchange(camelContext).     aggregationRepository.add(camelContext, key, exchange).     assertTrue(exists(key)).     // When     Exchange exchange2 = aggregationRepository.get(camelContext, key).     // Then     assertNotNull(exchange2).     assertEquals(exchange.getExchangeId(), exchange2.getExchangeId()). }
false;public;0;14;;@Test public void testGetNotExists() {     if (!canTest()) {         return.     }     // Given     String key = "Get_NotExists".     assertFalse(exists(key)).     // When     Exchange exchange2 = aggregationRepository.get(camelContext, key).     // Then     assertNull(exchange2). }
false;public;0;16;;@Test public void testRemoveExists() {     if (!canTest()) {         return.     }     // Given     String key = "Remove_Exists".     Exchange exchange = new DefaultExchange(camelContext).     aggregationRepository.add(camelContext, key, exchange).     assertTrue(exists(key)).     // When     aggregationRepository.remove(camelContext, key, exchange).     // Then     assertFalse(exists(key)). }
false;public;0;15;;@Test public void testRemoveNotExists() {     if (!canTest()) {         return.     }     // Given     String key = "RemoveNotExists".     Exchange exchange = new DefaultExchange(camelContext).     assertFalse(exists(key)).     // When     aggregationRepository.remove(camelContext, key, exchange).     // Then     assertFalse(exists(key)). }
false;public;0;16;;@Test public void testGetKeys() {     if (!canTest()) {         return.     }     // Given     String[] keys = { "GetKeys1", "GetKeys2" }.     addExchanges(keys).     // When     Set<String> keySet = aggregationRepository.getKeys().     // Then     for (String key : keys) {         assertTrue(keySet.contains(key)).     } }
false;public;0;21;;@Test public void testConfirmExist() {     if (!canTest()) {         return.     }     // Given     for (int i = 1. i < 4. i++) {         String key = "Confirm_" + i.         Exchange exchange = new DefaultExchange(camelContext).         exchange.setExchangeId("Exchange_" + i).         aggregationRepository.add(camelContext, key, exchange).         assertTrue(exists(key)).     }     // When     aggregationRepository.confirm(camelContext, "Exchange_2").     // Then     assertTrue(exists("Confirm_1")).     assertFalse(exists("Confirm_2")).     assertTrue(exists("Confirm_3")). }
false;public;0;22;;@Test public void testConfirmNotExist() {     if (!canTest()) {         return.     }     // Given     String[] keys = new String[3].     for (int i = 1. i < 4. i++) {         keys[i - 1] = "Confirm" + i.     }     addExchanges(keys).     for (String key : keys) {         assertTrue(exists(key)).     }     // When     aggregationRepository.confirm(camelContext, "Exchange-Confirm5").     // Then     for (String key : keys) {         assertTrue(exists(key)).     } }
false;private;1;7;;private void addExchanges(String... keys) {     for (String key : keys) {         Exchange exchange = new DefaultExchange(camelContext).         exchange.setExchangeId("Exchange-" + key).         aggregationRepository.add(camelContext, key, exchange).     } }
false;public;0;16;;@Test public void testScan() {     if (!canTest()) {         return.     }     // Given     String[] keys = { "Scan1", "Scan2" }.     addExchanges(keys).     // When     Set<String> exchangeIdSet = aggregationRepository.scan(camelContext).     // Then     for (String key : keys) {         assertTrue(exchangeIdSet.contains("Exchange-" + key)).     } }
false;public;0;16;;@Test public void testRecover() {     if (!canTest()) {         return.     }     // Given     String[] keys = { "Recover1", "Recover2" }.     addExchanges(keys).     // When     Exchange exchange2 = aggregationRepository.recover(camelContext, "Exchange-Recover2").     Exchange exchange3 = aggregationRepository.recover(camelContext, "Exchange-Recover3").     // Then     assertNotNull(exchange2).     assertNull(exchange3). }

commented;modifiers;parameterAmount;loc;comment;code
false;private;0;3;;private String getFtpUrl() {     return "ftp://admin@localhost:" + getPort() + "/filestress/?password=admin&maxMessagesPerPoll=25". }
false;public;0;8;;@Override @Before public void setUp() throws Exception {     super.setUp().     for (int i = 0. i < files. i++) {         template.sendBodyAndHeader("file://" + FTP_ROOT_DIR + "/filestress", "Hello World", Exchange.FILE_NAME, i + ".txt").     } }
false;public;0;9;;@Test public void testFTPConsumerAsyncStress() throws Exception {     MockEndpoint mock = getMockEndpoint("mock:result").     // give some time to run on slower boxes     mock.setResultWaitTime(30000).     mock.expectedMinimumMessageCount(50).     assertMockEndpointsSatisfied(). }
false;public;1;6;;public void process(Exchange exchange) throws Exception {     // simulate some work with random time to complete     Random ran = new Random().     int delay = ran.nextInt(500) + 10.     Thread.sleep(delay). }
false;public;0;16;;@Override public void configure() throws Exception {     // leverage the fact that we can limit to max 25 files per poll     // this will result in polling again and potentially picking up files     // that already are in progress     from(getFtpUrl()).threads(10).process(new Processor() {          public void process(Exchange exchange) throws Exception {             // simulate some work with random time to complete             Random ran = new Random().             int delay = ran.nextInt(500) + 10.             Thread.sleep(delay).         }     }).to("mock:result"). }
false;protected;0;21;;@Override protected RouteBuilder createRouteBuilder() throws Exception {     return new RouteBuilder() {          @Override         public void configure() throws Exception {             // leverage the fact that we can limit to max 25 files per poll             // this will result in polling again and potentially picking up files             // that already are in progress             from(getFtpUrl()).threads(10).process(new Processor() {                  public void process(Exchange exchange) throws Exception {                     // simulate some work with random time to complete                     Random ran = new Random().                     int delay = ran.nextInt(500) + 10.                     Thread.sleep(delay).                 }             }).to("mock:result").         }     }. }

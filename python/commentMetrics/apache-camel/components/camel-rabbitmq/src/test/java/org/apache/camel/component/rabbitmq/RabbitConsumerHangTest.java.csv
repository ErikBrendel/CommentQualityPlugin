commented;modifiers;parameterAmount;loc;comment;code
false;public;0;21;;@Test(timeout = 5000) public void testHandleDeliveryShouldNotHangForeverIfChanelWasClosed() throws Exception {     Mockito.when(consumer.getEndpoint()).thenReturn(endpoint).     Mockito.when(consumer.getConnection()).thenReturn(conn).     Mockito.when(conn.createChannel()).thenReturn(channel).     Mockito.when(channel.isOpen()).thenReturn(false).thenReturn(true).     Mockito.when(consumer.getEndpoint()).thenReturn(endpoint).     RabbitConsumer rabbitConsumer = new RabbitConsumer(consumer).     rabbitConsumer.handleDelivery(null, null, null, null).     // will now fail with some NPE which is expected as we have not mocked all the inner details     try {         rabbitConsumer.handleDelivery(null, null, null, null).         fail("Should have thrown NPE").     } catch (NullPointerException e) {     // expected     }     rabbitConsumer.stop(). }

commented;modifiers;parameterAmount;loc;comment;code
false;public;0;7;;@Before public void setUp() throws Exception {     super.setUp().     // create a tm file in the classpath as this is the tricky reloading stuff     template.sendBodyAndHeader("file://target/test-classes/org/apache/camel/component/stringtemplate", "Hello <headers.name>", Exchange.FILE_NAME, "hello.tm"). }
false;public;0;4;;@Override public boolean useJmx() {     return true. }
false;public;0;17;;@Test public void testNotCached() throws Exception {     MockEndpoint mock = getMockEndpoint("mock:result").     mock.expectedBodiesReceived("Hello London").     template.sendBodyAndHeader("direct:a", "Body", "name", "London").     mock.assertIsSatisfied().     // now change content in the file in the classpath and try again     template.sendBodyAndHeader("file://target/test-classes/org/apache/camel/component/stringtemplate", "Bye <headers.name>", Exchange.FILE_NAME, "hello.tm").     mock.reset().     mock.expectedBodiesReceived("Bye Paris").     template.sendBodyAndHeader("direct:a", "Body", "name", "Paris").     mock.assertIsSatisfied(). }
false;public;0;18;;@Test public void testCached() throws Exception {     MockEndpoint mock = getMockEndpoint("mock:result").     mock.expectedBodiesReceived("Hello London").     template.sendBodyAndHeader("direct:b", "Body", "name", "London").     mock.assertIsSatisfied().     // now change content in the file in the classpath and try again     template.sendBodyAndHeader("file://target/test-classes/org/apache/camel/component/stringtemplate", "Bye <headers.name>", Exchange.FILE_NAME, "hello.tm").     mock.reset().     // we must expected the original filecontent as the cache is enabled, so its Hello and not Bye     mock.expectedBodiesReceived("Hello Paris").     template.sendBodyAndHeader("direct:b", "Body", "name", "Paris").     mock.assertIsSatisfied(). }
false;public;0;38;;@Test public void testClearCacheViaJmx() throws Exception {     MockEndpoint mock = getMockEndpoint("mock:result").     mock.expectedBodiesReceived("Hello London").     template.sendBodyAndHeader("direct:b", "Body", "name", "London").     mock.assertIsSatisfied().     // now change content in the file in the classpath and try again     template.sendBodyAndHeader("file://target/test-classes/org/apache/camel/component/stringtemplate", "Bye <headers.name>", Exchange.FILE_NAME, "hello.tm").     mock.reset().     // we must expected the original filecontent as the cache is enabled, so its Hello and not Bye     mock.expectedBodiesReceived("Hello Paris").     template.sendBodyAndHeader("direct:b", "Body", "name", "Paris").     mock.assertIsSatisfied().     // clear the cache using jmx     MBeanServer mbeanServer = context.getManagementStrategy().getManagementAgent().getMBeanServer().     Set<ObjectName> objNameSet = mbeanServer.queryNames(new ObjectName("org.apache.camel:type=endpoints,name=\"string-template:*contentCache=true*\",*"), null).     ObjectName managedObjName = new ArrayList<>(objNameSet).get(0).     mbeanServer.invoke(managedObjName, "clearContentCache", null, null).     mock.reset().     // we expect that the new resource will be set as the cached value, since the cache has been cleared     mock.expectedBodiesReceived("Bye Paris").     template.sendBodyAndHeader("file://target/test-classes/org/apache/camel/component/stringtemplate", "Bye <headers.name>", Exchange.FILE_NAME, "hello.tm").     template.sendBodyAndHeader("direct:b", "Body", "name", "Paris").     mock.assertIsSatisfied().     mock.reset().     // we expect that the cached value will not be replaced by a different resource since the cache is now re-established     mock.expectedBodiesReceived("Bye Paris").     template.sendBodyAndHeader("file://target/test-classes/org/apache/camel/component/stringtemplate", "Hello <headers.name>", Exchange.FILE_NAME, "hello.tm").     template.sendBodyAndHeader("direct:b", "Body", "name", "Paris").     mock.assertIsSatisfied(). }
false;public;0;5;;public void configure() throws Exception {     from("direct:a").to("string-template://org/apache/camel/component/stringtemplate/hello.tm?contentCache=false").to("mock:result").     from("direct:b").to("string-template://org/apache/camel/component/stringtemplate/hello.tm?contentCache=true").to("mock:result"). }
false;protected;0;9;;protected RouteBuilder createRouteBuilder() throws Exception {     return new RouteBuilder() {          public void configure() throws Exception {             from("direct:a").to("string-template://org/apache/camel/component/stringtemplate/hello.tm?contentCache=false").to("mock:result").             from("direct:b").to("string-template://org/apache/camel/component/stringtemplate/hello.tm?contentCache=true").to("mock:result").         }     }. }

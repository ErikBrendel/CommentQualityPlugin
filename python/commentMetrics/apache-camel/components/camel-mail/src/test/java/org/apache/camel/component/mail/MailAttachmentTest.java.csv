commented;modifiers;parameterAmount;loc;comment;code
false;public;0;55;;@Test public void testSendAndReceiveMailWithAttachments() throws Exception {     // clear mailbox     Mailbox.clearAll().     // START SNIPPET: e1     // create an exchange with a normal body and attachment to be produced as email     Endpoint endpoint = context.getEndpoint("smtp://james@mymailserver.com?password=secret").     // create the exchange with the mail message that is multipart with a file and a Hello World text/plain message.     Exchange exchange = endpoint.createExchange().     Message in = exchange.getIn().     in.setBody("Hello World").     DefaultAttachment att = new DefaultAttachment(new FileDataSource("src/test/data/logo.jpeg")).     att.addHeader("Content-Description", "some sample content").     in.addAttachmentObject("logo.jpeg", att).     // create a producer that can produce the exchange (= send the mail)     Producer producer = endpoint.createProducer().     // start the producer     producer.start().     // and let it go (processes the exchange by sending the email)     producer.process(exchange).     // END SNIPPET: e1     MockEndpoint mock = getMockEndpoint("mock:result").     mock.expectedMessageCount(1).     mock.assertIsSatisfied().     Exchange out = mock.assertExchangeReceived(0).     // plain text     assertEquals("Hello World", out.getIn().getBody(String.class)).     // attachment     Map<String, Attachment> attachments = out.getIn().getAttachmentObjects().     assertNotNull("Should have attachments", attachments).     assertEquals(1, attachments.size()).     Attachment attachment = out.getIn().getAttachmentObject("logo.jpeg").     DataHandler handler = attachment.getDataHandler().     assertNotNull("The logo should be there", handler).     // content type should match     boolean match1 = "image/jpeg. name=logo.jpeg".equals(handler.getContentType()).     boolean match2 = "application/octet-stream. name=logo.jpeg".equals(handler.getContentType()).     assertTrue("Should match 1 or 2", match1 || match2).     assertEquals("Handler name should be the file name", "logo.jpeg", handler.getName()).     assertEquals("some sample content", attachment.getHeader("content-description")).     producer.stop(). }
false;public;0;3;;public void configure() throws Exception {     from("pop3://james@mymailserver.com?password=secret&consumer.initialDelay=100&consumer.delay=100").to("mock:result"). }
false;protected;0;7;;protected RouteBuilder createRouteBuilder() throws Exception {     return new RouteBuilder() {          public void configure() throws Exception {             from("pop3://james@mymailserver.com?password=secret&consumer.initialDelay=100&consumer.delay=100").to("mock:result").         }     }. }

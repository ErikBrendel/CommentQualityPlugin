commented;modifiers;parameterAmount;loc;comment;code
false;public;1;7;;public void process(Exchange exchange) throws Exception {     if (counter++ < 2) {         exchange.getOut().setBody(nok).     } else {         exchange.getOut().setBody(ok).     } }
false;public;0;39;;public void configure() throws Exception {     port = AvailablePortFinder.getNextAvailable(8000).     // configure a global transacted error handler     errorHandler(transactionErrorHandler(required)).     from(data).policy(required).to("http://localhost:" + port + "/sender").convertBodyTo(String.class).choice().when().xpath("/reply/status != 'ok'").to("mock:rollback").rollback().otherwise().end().     // this is our http route that will fail the first 2 attempts     // before it sends an ok response     from("jetty:http://localhost:" + port + "/sender").process(new Processor() {          public void process(Exchange exchange) throws Exception {             if (counter++ < 2) {                 exchange.getOut().setBody(nok).             } else {                 exchange.getOut().setBody(ok).             }         }     }). }

commented;modifiers;parameterAmount;loc;comment;code
false;public;0;30;;public void testIndicesSegmentsWithBlocks() {     createIndex("test-blocks").     ensureGreen("test-blocks").     int docs = between(10, 100).     for (int i = 0. i < docs. i++) {         client().prepareIndex("test-blocks", "type", "" + i).setSource("test", "init").execute().actionGet().     }     client().admin().indices().prepareFlush("test-blocks").get().     // Request is not blocked     for (String blockSetting : Arrays.asList(SETTING_BLOCKS_READ, SETTING_BLOCKS_WRITE, SETTING_READ_ONLY, SETTING_READ_ONLY_ALLOW_DELETE)) {         try {             enableIndexBlock("test-blocks", blockSetting).             IndicesSegmentResponse response = client().admin().indices().prepareSegments("test-blocks").execute().actionGet().             assertNoFailures(response).         } finally {             disableIndexBlock("test-blocks", blockSetting).         }     }     // Request is blocked     try {         enableIndexBlock("test-blocks", SETTING_BLOCKS_METADATA).         assertBlocked(client().admin().indices().prepareSegments("test-blocks")).     } finally {         disableIndexBlock("test-blocks", SETTING_BLOCKS_METADATA).     } }

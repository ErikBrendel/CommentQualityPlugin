commented;modifiers;parameterAmount;loc;comment;code
false;public;0;46;;public void testCustomBM25Similarity() throws Exception {     try {         client().admin().indices().prepareDelete("test").execute().actionGet().     } catch (Exception e) {     // ignore     }     client().admin().indices().prepareCreate("test").addMapping("type1", jsonBuilder().startObject().startObject("type1").startObject("properties").startObject("field1").field("similarity", "custom").field("type", "text").endObject().startObject("field2").field("similarity", "boolean").field("type", "text").endObject().endObject().endObject().endObject()).setSettings(Settings.builder().put("index.number_of_shards", 1).put("index.number_of_replicas", 0).put("similarity.custom.type", "BM25").put("similarity.custom.k1", 2.0f).put("similarity.custom.b", 0.5f)).execute().actionGet().     client().prepareIndex("test", "type1", "1").setSource("field1", "the quick brown fox jumped over the lazy dog", "field2", "the quick brown fox jumped over the lazy dog").setRefreshPolicy(IMMEDIATE).execute().actionGet().     SearchResponse bm25SearchResponse = client().prepareSearch().setQuery(matchQuery("field1", "quick brown fox")).execute().actionGet().     assertThat(bm25SearchResponse.getHits().getTotalHits().value, equalTo(1L)).     float bm25Score = bm25SearchResponse.getHits().getHits()[0].getScore().     SearchResponse booleanSearchResponse = client().prepareSearch().setQuery(matchQuery("field2", "quick brown fox")).execute().actionGet().     assertThat(booleanSearchResponse.getHits().getTotalHits().value, equalTo(1L)).     float defaultScore = booleanSearchResponse.getHits().getHits()[0].getScore().     assertThat(bm25Score, not(equalTo(defaultScore))). }

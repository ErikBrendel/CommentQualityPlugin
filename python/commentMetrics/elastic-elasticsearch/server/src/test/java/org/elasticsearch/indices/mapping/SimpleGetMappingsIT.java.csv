commented;modifiers;parameterAmount;loc;comment;code
false;protected;0;4;;@Override protected Collection<Class<? extends Plugin>> nodePlugins() {     return Collections.singleton(InternalSettingsPlugin.class). }
false;public;0;6;;public void testGetMappingsWhereThereAreNone() {     createIndex("index").     GetMappingsResponse response = client().admin().indices().prepareGetMappings().execute().actionGet().     assertThat(response.mappings().containsKey("index"), equalTo(true)).     assertThat(response.mappings().get("index").size(), equalTo(0)). }
false;private;1;5;;private XContentBuilder getMappingForType(String type) throws IOException {     return jsonBuilder().startObject().startObject(type).startObject("properties").startObject("field1").field("type", "text").endObject().endObject().endObject().endObject(). }
false;public;0;60;;public void testSimpleGetMappings() throws Exception {     client().admin().indices().prepareCreate("indexa").addMapping("typeA", getMappingForType("typeA")).execute().actionGet().     client().admin().indices().prepareCreate("indexb").addMapping("typeA", getMappingForType("typeA")).execute().actionGet().     ClusterHealthResponse clusterHealth = client().admin().cluster().prepareHealth().setWaitForEvents(Priority.LANGUID).setWaitForGreenStatus().execute().actionGet().     assertThat(clusterHealth.isTimedOut(), equalTo(false)).     // Get all mappings     GetMappingsResponse response = client().admin().indices().prepareGetMappings().execute().actionGet().     assertThat(response.mappings().size(), equalTo(2)).     assertThat(response.mappings().get("indexa").size(), equalTo(1)).     assertThat(response.mappings().get("indexa").get("typeA"), notNullValue()).     assertThat(response.mappings().get("indexb").size(), equalTo(1)).     assertThat(response.mappings().get("indexb").get("typeA"), notNullValue()).     // Get all mappings, via wildcard support     response = client().admin().indices().prepareGetMappings("*").setTypes("*").execute().actionGet().     assertThat(response.mappings().size(), equalTo(2)).     assertThat(response.mappings().get("indexa").size(), equalTo(1)).     assertThat(response.mappings().get("indexa").get("typeA"), notNullValue()).     assertThat(response.mappings().get("indexb").size(), equalTo(1)).     assertThat(response.mappings().get("indexb").get("typeA"), notNullValue()).     // Get all typeA mappings in all indices     response = client().admin().indices().prepareGetMappings("*").setTypes("typeA").execute().actionGet().     assertThat(response.mappings().size(), equalTo(2)).     assertThat(response.mappings().get("indexa").size(), equalTo(1)).     assertThat(response.mappings().get("indexa").get("typeA"), notNullValue()).     assertThat(response.mappings().get("indexb").size(), equalTo(1)).     assertThat(response.mappings().get("indexb").get("typeA"), notNullValue()).     // Get all mappings in indexa     response = client().admin().indices().prepareGetMappings("indexa").execute().actionGet().     assertThat(response.mappings().size(), equalTo(1)).     assertThat(response.mappings().get("indexa").size(), equalTo(1)).     assertThat(response.mappings().get("indexa").get("typeA"), notNullValue()).     // Get all mappings beginning with A* in indexa     response = client().admin().indices().prepareGetMappings("indexa").setTypes("*A").execute().actionGet().     assertThat(response.mappings().size(), equalTo(1)).     assertThat(response.mappings().get("indexa").size(), equalTo(1)).     assertThat(response.mappings().get("indexa").get("typeA"), notNullValue()).     // Get all mappings beginning with B* in all indices     response = client().admin().indices().prepareGetMappings().setTypes("B*").execute().actionGet().     assertThat(response.mappings().size(), equalTo(0)).     // Get all mappings beginning with B* and A* in all indices     response = client().admin().indices().prepareGetMappings().setTypes("B*", "*A").execute().actionGet().     assertThat(response.mappings().size(), equalTo(2)).     assertThat(response.mappings().get("indexa").size(), equalTo(1)).     assertThat(response.mappings().get("indexa").get("typeA"), notNullValue()).     assertThat(response.mappings().get("indexb").size(), equalTo(1)).     assertThat(response.mappings().get("indexb").get("typeA"), notNullValue()). }
false;public;0;24;;public void testGetMappingsWithBlocks() throws IOException {     client().admin().indices().prepareCreate("test").addMapping("_doc", getMappingForType("_doc")).execute().actionGet().     ensureGreen().     for (String block : Arrays.asList(SETTING_BLOCKS_READ, SETTING_BLOCKS_WRITE, SETTING_READ_ONLY)) {         try {             enableIndexBlock("test", block).             GetMappingsResponse response = client().admin().indices().prepareGetMappings().execute().actionGet().             assertThat(response.mappings().size(), equalTo(1)).             assertThat(response.mappings().get("test").size(), equalTo(1)).         } finally {             disableIndexBlock("test", block).         }     }     try {         enableIndexBlock("test", SETTING_BLOCKS_METADATA).         assertBlocked(client().admin().indices().prepareGetMappings(), INDEX_METADATA_BLOCK).     } finally {         disableIndexBlock("test", SETTING_BLOCKS_METADATA).     } }

commented;modifiers;parameterAmount;loc;comment;code
false;public,static;1;8;;public static AggregationProfileShardResult createTestItem(int depth) {     int size = randomIntBetween(0, 5).     List<ProfileResult> aggProfileResults = new ArrayList<>(size).     for (int i = 0. i < size. i++) {         aggProfileResults.add(ProfileResultTests.createTestItem(1)).     }     return new AggregationProfileShardResult(aggProfileResults). }
false;public;0;17;;public void testFromXContent() throws IOException {     AggregationProfileShardResult profileResult = createTestItem(2).     XContentType xContentType = randomFrom(XContentType.values()).     boolean humanReadable = randomBoolean().     BytesReference originalBytes = toShuffledXContent(profileResult, xContentType, ToXContent.EMPTY_PARAMS, humanReadable).     AggregationProfileShardResult parsed.     try (XContentParser parser = createParser(xContentType.xContent(), originalBytes)) {         XContentParserUtils.ensureExpectedToken(XContentParser.Token.START_OBJECT, parser.nextToken(), parser::getTokenLocation).         XContentParserUtils.ensureFieldName(parser, parser.nextToken(), AggregationProfileShardResult.AGGREGATIONS).         XContentParserUtils.ensureExpectedToken(XContentParser.Token.START_ARRAY, parser.nextToken(), parser::getTokenLocation).         parsed = AggregationProfileShardResult.fromXContent(parser).         assertEquals(XContentParser.Token.END_OBJECT, parser.nextToken()).         assertNull(parser.nextToken()).     }     assertToXContentEquivalent(originalBytes, toXContent(parsed, xContentType, humanReadable), xContentType). }
false;public;0;27;;public void testToXContent() throws IOException {     List<ProfileResult> profileResults = new ArrayList<>().     Map<String, Long> timings = new HashMap<>().     timings.put("timing1", 2000L).     timings.put("timing2", 4000L).     ProfileResult profileResult = new ProfileResult("someType", "someDescription", timings, Collections.emptyList()).     profileResults.add(profileResult).     AggregationProfileShardResult aggProfileResults = new AggregationProfileShardResult(profileResults).     BytesReference xContent = toXContent(aggProfileResults, XContentType.JSON, false).     assertEquals("{\"aggregations\":[" + "{\"type\":\"someType\"," + "\"description\":\"someDescription\"," + "\"time_in_nanos\":6000," + "\"breakdown\":{\"timing1\":2000,\"timing2\":4000}" + "}" + "]}", xContent.utf8ToString()).     xContent = toXContent(aggProfileResults, XContentType.JSON, true).     assertEquals("{\"aggregations\":[" + "{\"type\":\"someType\"," + "\"description\":\"someDescription\"," + "\"time\":\"6micros\"," + "\"time_in_nanos\":6000," + "\"breakdown\":{\"timing1\":2000,\"timing2\":4000}" + "}" + "]}", xContent.utf8ToString()). }

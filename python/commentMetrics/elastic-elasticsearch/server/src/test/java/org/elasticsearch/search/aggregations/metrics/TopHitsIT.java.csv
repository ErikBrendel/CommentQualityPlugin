# id;timestamp;commentText;codeText;commentWords;codeWords
TopHitsIT -> public void testDontCacheScripts() throws Exception;1524684173;Make sure that a request using a script does not get cached and a request_not using a script does get cached.;public void testDontCacheScripts() throws Exception {_        try {_            assertAcked(prepareCreate("cache_test_idx").addMapping("type", "d", "type=long")_                .setSettings(Settings.builder().put("requests.cache.enable", true).put("number_of_shards", 1).put("number_of_replicas", 1))_                .get())__            indexRandom(true, client().prepareIndex("cache_test_idx", "type", "1").setSource("s", 1),_                client().prepareIndex("cache_test_idx", "type", "2").setSource("s", 2))___            _            assertThat(client().admin().indices().prepareStats("cache_test_idx").setRequestCache(true).get().getTotal().getRequestCache()_                .getHitCount(), equalTo(0L))__            assertThat(client().admin().indices().prepareStats("cache_test_idx").setRequestCache(true).get().getTotal().getRequestCache()_                .getMissCount(), equalTo(0L))___            _            SearchResponse r = client().prepareSearch("cache_test_idx").setSize(0)_                .addAggregation(topHits("foo").scriptField("bar",_                    new Script(ScriptType.INLINE, CustomScriptPlugin.NAME, "5", Collections.emptyMap()))).get()__            assertSearchResponse(r)___            assertThat(client().admin().indices().prepareStats("cache_test_idx").setRequestCache(true).get().getTotal().getRequestCache()_                .getHitCount(), equalTo(0L))__            assertThat(client().admin().indices().prepareStats("cache_test_idx").setRequestCache(true).get().getTotal().getRequestCache()_                .getMissCount(), equalTo(0L))___            _            r = client().prepareSearch("cache_test_idx").setSize(0)_                .addAggregation(topHits("foo").sort(_                    SortBuilders.scriptSort(_                        new Script(ScriptType.INLINE, CustomScriptPlugin.NAME, "5", Collections.emptyMap()), ScriptSortType.STRING)))_                .get()__            assertSearchResponse(r)___            assertThat(client().admin().indices().prepareStats("cache_test_idx").setRequestCache(true).get().getTotal().getRequestCache()_                .getHitCount(), equalTo(0L))__            assertThat(client().admin().indices().prepareStats("cache_test_idx").setRequestCache(true).get().getTotal().getRequestCache()_                .getMissCount(), equalTo(0L))___            _            _            r = client().prepareSearch("cache_test_idx").setSize(0).addAggregation(topHits("foo")).get()__            assertSearchResponse(r)___            assertThat(client().admin().indices().prepareStats("cache_test_idx").setRequestCache(true).get().getTotal().getRequestCache()_                .getHitCount(), equalTo(0L))__            assertThat(client().admin().indices().prepareStats("cache_test_idx").setRequestCache(true).get().getTotal().getRequestCache()_                .getMissCount(), equalTo(1L))__        } finally {_            assertAcked(client().admin().indices().prepareDelete("cache_test_idx"))_ _        }_    };make,sure,that,a,request,using,a,script,does,not,get,cached,and,a,request,not,using,a,script,does,get,cached;public,void,test,dont,cache,scripts,throws,exception,try,assert,acked,prepare,create,add,mapping,type,d,type,long,set,settings,settings,builder,put,requests,cache,enable,true,put,1,put,1,get,index,random,true,client,prepare,index,type,1,set,source,s,1,client,prepare,index,type,2,set,source,s,2,assert,that,client,admin,indices,prepare,stats,set,request,cache,true,get,get,total,get,request,cache,get,hit,count,equal,to,0l,assert,that,client,admin,indices,prepare,stats,set,request,cache,true,get,get,total,get,request,cache,get,miss,count,equal,to,0l,search,response,r,client,prepare,search,set,size,0,add,aggregation,top,hits,foo,script,field,bar,new,script,script,type,inline,custom,script,plugin,name,5,collections,empty,map,get,assert,search,response,r,assert,that,client,admin,indices,prepare,stats,set,request,cache,true,get,get,total,get,request,cache,get,hit,count,equal,to,0l,assert,that,client,admin,indices,prepare,stats,set,request,cache,true,get,get,total,get,request,cache,get,miss,count,equal,to,0l,r,client,prepare,search,set,size,0,add,aggregation,top,hits,foo,sort,sort,builders,script,sort,new,script,script,type,inline,custom,script,plugin,name,5,collections,empty,map,script,sort,type,string,get,assert,search,response,r,assert,that,client,admin,indices,prepare,stats,set,request,cache,true,get,get,total,get,request,cache,get,hit,count,equal,to,0l,assert,that,client,admin,indices,prepare,stats,set,request,cache,true,get,get,total,get,request,cache,get,miss,count,equal,to,0l,r,client,prepare,search,set,size,0,add,aggregation,top,hits,foo,get,assert,search,response,r,assert,that,client,admin,indices,prepare,stats,set,request,cache,true,get,get,total,get,request,cache,get,hit,count,equal,to,0l,assert,that,client,admin,indices,prepare,stats,set,request,cache,true,get,get,total,get,request,cache,get,miss,count,equal,to,1l,finally,assert,acked,client,admin,indices,prepare,delete
TopHitsIT -> public void testDontCacheScripts() throws Exception;1527096592;Make sure that a request using a script does not get cached and a request_not using a script does get cached.;public void testDontCacheScripts() throws Exception {_        try {_            assertAcked(prepareCreate("cache_test_idx").addMapping("type", "d", "type=long")_                .setSettings(Settings.builder().put("requests.cache.enable", true).put("number_of_shards", 1).put("number_of_replicas", 1))_                .get())__            indexRandom(true, client().prepareIndex("cache_test_idx", "type", "1").setSource("s", 1),_                client().prepareIndex("cache_test_idx", "type", "2").setSource("s", 2))___            _            assertThat(client().admin().indices().prepareStats("cache_test_idx").setRequestCache(true).get().getTotal().getRequestCache()_                .getHitCount(), equalTo(0L))__            assertThat(client().admin().indices().prepareStats("cache_test_idx").setRequestCache(true).get().getTotal().getRequestCache()_                .getMissCount(), equalTo(0L))___            _            SearchResponse r = client().prepareSearch("cache_test_idx").setSize(0)_                .addAggregation(topHits("foo").scriptField("bar",_                    new Script(ScriptType.INLINE, CustomScriptPlugin.NAME, "5", Collections.emptyMap()))).get()__            assertSearchResponse(r)___            assertThat(client().admin().indices().prepareStats("cache_test_idx").setRequestCache(true).get().getTotal().getRequestCache()_                .getHitCount(), equalTo(0L))__            assertThat(client().admin().indices().prepareStats("cache_test_idx").setRequestCache(true).get().getTotal().getRequestCache()_                .getMissCount(), equalTo(0L))___            _            r = client().prepareSearch("cache_test_idx").setSize(0)_                .addAggregation(topHits("foo").sort(_                    SortBuilders.scriptSort(_                        new Script(ScriptType.INLINE, CustomScriptPlugin.NAME, "5", Collections.emptyMap()), ScriptSortType.STRING)))_                .get()__            assertSearchResponse(r)___            assertThat(client().admin().indices().prepareStats("cache_test_idx").setRequestCache(true).get().getTotal().getRequestCache()_                .getHitCount(), equalTo(0L))__            assertThat(client().admin().indices().prepareStats("cache_test_idx").setRequestCache(true).get().getTotal().getRequestCache()_                .getMissCount(), equalTo(0L))___            _            _            r = client().prepareSearch("cache_test_idx").setSize(0).addAggregation(topHits("foo")).get()__            assertSearchResponse(r)___            assertThat(client().admin().indices().prepareStats("cache_test_idx").setRequestCache(true).get().getTotal().getRequestCache()_                .getHitCount(), equalTo(0L))__            assertThat(client().admin().indices().prepareStats("cache_test_idx").setRequestCache(true).get().getTotal().getRequestCache()_                .getMissCount(), equalTo(1L))__        } finally {_            assertAcked(client().admin().indices().prepareDelete("cache_test_idx"))_ _        }_    };make,sure,that,a,request,using,a,script,does,not,get,cached,and,a,request,not,using,a,script,does,get,cached;public,void,test,dont,cache,scripts,throws,exception,try,assert,acked,prepare,create,add,mapping,type,d,type,long,set,settings,settings,builder,put,requests,cache,enable,true,put,1,put,1,get,index,random,true,client,prepare,index,type,1,set,source,s,1,client,prepare,index,type,2,set,source,s,2,assert,that,client,admin,indices,prepare,stats,set,request,cache,true,get,get,total,get,request,cache,get,hit,count,equal,to,0l,assert,that,client,admin,indices,prepare,stats,set,request,cache,true,get,get,total,get,request,cache,get,miss,count,equal,to,0l,search,response,r,client,prepare,search,set,size,0,add,aggregation,top,hits,foo,script,field,bar,new,script,script,type,inline,custom,script,plugin,name,5,collections,empty,map,get,assert,search,response,r,assert,that,client,admin,indices,prepare,stats,set,request,cache,true,get,get,total,get,request,cache,get,hit,count,equal,to,0l,assert,that,client,admin,indices,prepare,stats,set,request,cache,true,get,get,total,get,request,cache,get,miss,count,equal,to,0l,r,client,prepare,search,set,size,0,add,aggregation,top,hits,foo,sort,sort,builders,script,sort,new,script,script,type,inline,custom,script,plugin,name,5,collections,empty,map,script,sort,type,string,get,assert,search,response,r,assert,that,client,admin,indices,prepare,stats,set,request,cache,true,get,get,total,get,request,cache,get,hit,count,equal,to,0l,assert,that,client,admin,indices,prepare,stats,set,request,cache,true,get,get,total,get,request,cache,get,miss,count,equal,to,0l,r,client,prepare,search,set,size,0,add,aggregation,top,hits,foo,get,assert,search,response,r,assert,that,client,admin,indices,prepare,stats,set,request,cache,true,get,get,total,get,request,cache,get,hit,count,equal,to,0l,assert,that,client,admin,indices,prepare,stats,set,request,cache,true,get,get,total,get,request,cache,get,miss,count,equal,to,1l,finally,assert,acked,client,admin,indices,prepare,delete
TopHitsIT -> public void testDontCacheScripts() throws Exception;1535046779;Make sure that a request using a script does not get cached and a request_not using a script does get cached.;public void testDontCacheScripts() throws Exception {_        try {_            assertAcked(prepareCreate("cache_test_idx").addMapping("type", "d", "type=long")_                .setSettings(Settings.builder().put("requests.cache.enable", true).put("number_of_shards", 1).put("number_of_replicas", 1))_                .get())__            indexRandom(true, client().prepareIndex("cache_test_idx", "type", "1").setSource("s", 1),_                client().prepareIndex("cache_test_idx", "type", "2").setSource("s", 2))___            _            assertThat(client().admin().indices().prepareStats("cache_test_idx").setRequestCache(true).get().getTotal().getRequestCache()_                .getHitCount(), equalTo(0L))__            assertThat(client().admin().indices().prepareStats("cache_test_idx").setRequestCache(true).get().getTotal().getRequestCache()_                .getMissCount(), equalTo(0L))___            _            SearchResponse r = client().prepareSearch("cache_test_idx").setSize(0)_                .addAggregation(topHits("foo").scriptField("bar",_                    new Script(ScriptType.INLINE, CustomScriptPlugin.NAME, "5", Collections.emptyMap()))).get()__            assertSearchResponse(r)___            assertThat(client().admin().indices().prepareStats("cache_test_idx").setRequestCache(true).get().getTotal().getRequestCache()_                .getHitCount(), equalTo(0L))__            assertThat(client().admin().indices().prepareStats("cache_test_idx").setRequestCache(true).get().getTotal().getRequestCache()_                .getMissCount(), equalTo(0L))___            _            r = client().prepareSearch("cache_test_idx").setSize(0)_                .addAggregation(topHits("foo").sort(_                    SortBuilders.scriptSort(_                        new Script(ScriptType.INLINE, CustomScriptPlugin.NAME, "5", Collections.emptyMap()), ScriptSortType.STRING)))_                .get()__            assertSearchResponse(r)___            assertThat(client().admin().indices().prepareStats("cache_test_idx").setRequestCache(true).get().getTotal().getRequestCache()_                .getHitCount(), equalTo(0L))__            assertThat(client().admin().indices().prepareStats("cache_test_idx").setRequestCache(true).get().getTotal().getRequestCache()_                .getMissCount(), equalTo(0L))___            _            _            r = client().prepareSearch("cache_test_idx").setSize(0).addAggregation(topHits("foo")).get()__            assertSearchResponse(r)___            assertThat(client().admin().indices().prepareStats("cache_test_idx").setRequestCache(true).get().getTotal().getRequestCache()_                .getHitCount(), equalTo(0L))__            assertThat(client().admin().indices().prepareStats("cache_test_idx").setRequestCache(true).get().getTotal().getRequestCache()_                .getMissCount(), equalTo(1L))__        } finally {_            assertAcked(client().admin().indices().prepareDelete("cache_test_idx"))_ _        }_    };make,sure,that,a,request,using,a,script,does,not,get,cached,and,a,request,not,using,a,script,does,get,cached;public,void,test,dont,cache,scripts,throws,exception,try,assert,acked,prepare,create,add,mapping,type,d,type,long,set,settings,settings,builder,put,requests,cache,enable,true,put,1,put,1,get,index,random,true,client,prepare,index,type,1,set,source,s,1,client,prepare,index,type,2,set,source,s,2,assert,that,client,admin,indices,prepare,stats,set,request,cache,true,get,get,total,get,request,cache,get,hit,count,equal,to,0l,assert,that,client,admin,indices,prepare,stats,set,request,cache,true,get,get,total,get,request,cache,get,miss,count,equal,to,0l,search,response,r,client,prepare,search,set,size,0,add,aggregation,top,hits,foo,script,field,bar,new,script,script,type,inline,custom,script,plugin,name,5,collections,empty,map,get,assert,search,response,r,assert,that,client,admin,indices,prepare,stats,set,request,cache,true,get,get,total,get,request,cache,get,hit,count,equal,to,0l,assert,that,client,admin,indices,prepare,stats,set,request,cache,true,get,get,total,get,request,cache,get,miss,count,equal,to,0l,r,client,prepare,search,set,size,0,add,aggregation,top,hits,foo,sort,sort,builders,script,sort,new,script,script,type,inline,custom,script,plugin,name,5,collections,empty,map,script,sort,type,string,get,assert,search,response,r,assert,that,client,admin,indices,prepare,stats,set,request,cache,true,get,get,total,get,request,cache,get,hit,count,equal,to,0l,assert,that,client,admin,indices,prepare,stats,set,request,cache,true,get,get,total,get,request,cache,get,miss,count,equal,to,0l,r,client,prepare,search,set,size,0,add,aggregation,top,hits,foo,get,assert,search,response,r,assert,that,client,admin,indices,prepare,stats,set,request,cache,true,get,get,total,get,request,cache,get,hit,count,equal,to,0l,assert,that,client,admin,indices,prepare,stats,set,request,cache,true,get,get,total,get,request,cache,get,miss,count,equal,to,1l,finally,assert,acked,client,admin,indices,prepare,delete
TopHitsIT -> public void testDontCacheScripts() throws Exception;1536137328;Make sure that a request using a script does not get cached and a request_not using a script does get cached.;public void testDontCacheScripts() throws Exception {_        try {_            assertAcked(prepareCreate("cache_test_idx").addMapping("type", "d", "type=long")_                .setSettings(Settings.builder().put("requests.cache.enable", true).put("number_of_shards", 1).put("number_of_replicas", 1))_                .get())__            indexRandom(true, client().prepareIndex("cache_test_idx", "type", "1").setSource("s", 1),_                client().prepareIndex("cache_test_idx", "type", "2").setSource("s", 2))___            _            assertThat(client().admin().indices().prepareStats("cache_test_idx").setRequestCache(true).get().getTotal().getRequestCache()_                .getHitCount(), equalTo(0L))__            assertThat(client().admin().indices().prepareStats("cache_test_idx").setRequestCache(true).get().getTotal().getRequestCache()_                .getMissCount(), equalTo(0L))___            _            SearchResponse r = client().prepareSearch("cache_test_idx").setSize(0)_                .addAggregation(topHits("foo").scriptField("bar",_                    new Script(ScriptType.INLINE, CustomScriptPlugin.NAME, "5", Collections.emptyMap()))).get()__            assertSearchResponse(r)___            assertThat(client().admin().indices().prepareStats("cache_test_idx").setRequestCache(true).get().getTotal().getRequestCache()_                .getHitCount(), equalTo(0L))__            assertThat(client().admin().indices().prepareStats("cache_test_idx").setRequestCache(true).get().getTotal().getRequestCache()_                .getMissCount(), equalTo(0L))___            _            r = client().prepareSearch("cache_test_idx").setSize(0)_                .addAggregation(topHits("foo").sort(_                    SortBuilders.scriptSort(_                        new Script(ScriptType.INLINE, CustomScriptPlugin.NAME, "5", Collections.emptyMap()), ScriptSortType.STRING)))_                .get()__            assertSearchResponse(r)___            assertThat(client().admin().indices().prepareStats("cache_test_idx").setRequestCache(true).get().getTotal().getRequestCache()_                .getHitCount(), equalTo(0L))__            assertThat(client().admin().indices().prepareStats("cache_test_idx").setRequestCache(true).get().getTotal().getRequestCache()_                .getMissCount(), equalTo(0L))___            _            _            r = client().prepareSearch("cache_test_idx").setSize(0).addAggregation(topHits("foo")).get()__            assertSearchResponse(r)___            assertThat(client().admin().indices().prepareStats("cache_test_idx").setRequestCache(true).get().getTotal().getRequestCache()_                .getHitCount(), equalTo(0L))__            assertThat(client().admin().indices().prepareStats("cache_test_idx").setRequestCache(true).get().getTotal().getRequestCache()_                .getMissCount(), equalTo(1L))__        } finally {_            assertAcked(client().admin().indices().prepareDelete("cache_test_idx"))_ _        }_    };make,sure,that,a,request,using,a,script,does,not,get,cached,and,a,request,not,using,a,script,does,get,cached;public,void,test,dont,cache,scripts,throws,exception,try,assert,acked,prepare,create,add,mapping,type,d,type,long,set,settings,settings,builder,put,requests,cache,enable,true,put,1,put,1,get,index,random,true,client,prepare,index,type,1,set,source,s,1,client,prepare,index,type,2,set,source,s,2,assert,that,client,admin,indices,prepare,stats,set,request,cache,true,get,get,total,get,request,cache,get,hit,count,equal,to,0l,assert,that,client,admin,indices,prepare,stats,set,request,cache,true,get,get,total,get,request,cache,get,miss,count,equal,to,0l,search,response,r,client,prepare,search,set,size,0,add,aggregation,top,hits,foo,script,field,bar,new,script,script,type,inline,custom,script,plugin,name,5,collections,empty,map,get,assert,search,response,r,assert,that,client,admin,indices,prepare,stats,set,request,cache,true,get,get,total,get,request,cache,get,hit,count,equal,to,0l,assert,that,client,admin,indices,prepare,stats,set,request,cache,true,get,get,total,get,request,cache,get,miss,count,equal,to,0l,r,client,prepare,search,set,size,0,add,aggregation,top,hits,foo,sort,sort,builders,script,sort,new,script,script,type,inline,custom,script,plugin,name,5,collections,empty,map,script,sort,type,string,get,assert,search,response,r,assert,that,client,admin,indices,prepare,stats,set,request,cache,true,get,get,total,get,request,cache,get,hit,count,equal,to,0l,assert,that,client,admin,indices,prepare,stats,set,request,cache,true,get,get,total,get,request,cache,get,miss,count,equal,to,0l,r,client,prepare,search,set,size,0,add,aggregation,top,hits,foo,get,assert,search,response,r,assert,that,client,admin,indices,prepare,stats,set,request,cache,true,get,get,total,get,request,cache,get,hit,count,equal,to,0l,assert,that,client,admin,indices,prepare,stats,set,request,cache,true,get,get,total,get,request,cache,get,miss,count,equal,to,1l,finally,assert,acked,client,admin,indices,prepare,delete
TopHitsIT -> public void testDontCacheScripts() throws Exception;1536314350;Make sure that a request using a script does not get cached and a request_not using a script does get cached.;public void testDontCacheScripts() throws Exception {_        try {_            assertAcked(prepareCreate("cache_test_idx").addMapping("type", "d", "type=long")_                .setSettings(_                    Settings.builder()_                        .put("requests.cache.enable", true)_                        .put("number_of_shards", 1)_                        .put("number_of_replicas", 1))_                .get())__            indexRandom(true, client().prepareIndex("cache_test_idx", "type", "1").setSource("s", 1),_                client().prepareIndex("cache_test_idx", "type", "2").setSource("s", 2))___            _            assertThat(client().admin().indices().prepareStats("cache_test_idx").setRequestCache(true).get().getTotal().getRequestCache()_                .getHitCount(), equalTo(0L))__            assertThat(client().admin().indices().prepareStats("cache_test_idx").setRequestCache(true).get().getTotal().getRequestCache()_                .getMissCount(), equalTo(0L))___            _            SearchResponse r = client().prepareSearch("cache_test_idx").setSize(0)_                .addAggregation(topHits("foo").scriptField("bar",_                    new Script(ScriptType.INLINE, CustomScriptPlugin.NAME, "5", Collections.emptyMap()))).get()__            assertSearchResponse(r)___            assertThat(client().admin().indices().prepareStats("cache_test_idx").setRequestCache(true).get().getTotal().getRequestCache()_                .getHitCount(), equalTo(0L))__            assertThat(client().admin().indices().prepareStats("cache_test_idx").setRequestCache(true).get().getTotal().getRequestCache()_                .getMissCount(), equalTo(0L))___            _            r = client().prepareSearch("cache_test_idx").setSize(0)_                .addAggregation(topHits("foo").sort(_                    SortBuilders.scriptSort(_                        new Script(ScriptType.INLINE, CustomScriptPlugin.NAME, "5", Collections.emptyMap()), ScriptSortType.STRING)))_                .get()__            assertSearchResponse(r)___            assertThat(client().admin().indices().prepareStats("cache_test_idx").setRequestCache(true).get().getTotal().getRequestCache()_                .getHitCount(), equalTo(0L))__            assertThat(client().admin().indices().prepareStats("cache_test_idx").setRequestCache(true).get().getTotal().getRequestCache()_                .getMissCount(), equalTo(0L))___            _            _            r = client().prepareSearch("cache_test_idx").setSize(0).addAggregation(topHits("foo")).get()__            assertSearchResponse(r)___            assertThat(client().admin().indices().prepareStats("cache_test_idx").setRequestCache(true).get().getTotal().getRequestCache()_                .getHitCount(), equalTo(0L))__            assertThat(client().admin().indices().prepareStats("cache_test_idx").setRequestCache(true).get().getTotal().getRequestCache()_                .getMissCount(), equalTo(1L))__        } finally {_            assertAcked(client().admin().indices().prepareDelete("cache_test_idx"))_ _        }_    };make,sure,that,a,request,using,a,script,does,not,get,cached,and,a,request,not,using,a,script,does,get,cached;public,void,test,dont,cache,scripts,throws,exception,try,assert,acked,prepare,create,add,mapping,type,d,type,long,set,settings,settings,builder,put,requests,cache,enable,true,put,1,put,1,get,index,random,true,client,prepare,index,type,1,set,source,s,1,client,prepare,index,type,2,set,source,s,2,assert,that,client,admin,indices,prepare,stats,set,request,cache,true,get,get,total,get,request,cache,get,hit,count,equal,to,0l,assert,that,client,admin,indices,prepare,stats,set,request,cache,true,get,get,total,get,request,cache,get,miss,count,equal,to,0l,search,response,r,client,prepare,search,set,size,0,add,aggregation,top,hits,foo,script,field,bar,new,script,script,type,inline,custom,script,plugin,name,5,collections,empty,map,get,assert,search,response,r,assert,that,client,admin,indices,prepare,stats,set,request,cache,true,get,get,total,get,request,cache,get,hit,count,equal,to,0l,assert,that,client,admin,indices,prepare,stats,set,request,cache,true,get,get,total,get,request,cache,get,miss,count,equal,to,0l,r,client,prepare,search,set,size,0,add,aggregation,top,hits,foo,sort,sort,builders,script,sort,new,script,script,type,inline,custom,script,plugin,name,5,collections,empty,map,script,sort,type,string,get,assert,search,response,r,assert,that,client,admin,indices,prepare,stats,set,request,cache,true,get,get,total,get,request,cache,get,hit,count,equal,to,0l,assert,that,client,admin,indices,prepare,stats,set,request,cache,true,get,get,total,get,request,cache,get,miss,count,equal,to,0l,r,client,prepare,search,set,size,0,add,aggregation,top,hits,foo,get,assert,search,response,r,assert,that,client,admin,indices,prepare,stats,set,request,cache,true,get,get,total,get,request,cache,get,hit,count,equal,to,0l,assert,that,client,admin,indices,prepare,stats,set,request,cache,true,get,get,total,get,request,cache,get,miss,count,equal,to,1l,finally,assert,acked,client,admin,indices,prepare,delete
TopHitsIT -> public void testDontCacheScripts() throws Exception;1538579488;Make sure that a request using a script does not get cached and a request_not using a script does get cached.;public void testDontCacheScripts() throws Exception {_        try {_            assertAcked(prepareCreate("cache_test_idx").addMapping("type", "d", "type=long")_                .setSettings(_                    Settings.builder()_                        .put("requests.cache.enable", true)_                        .put("number_of_shards", 1)_                        .put("number_of_replicas", 1))_                .get())__            indexRandom(true, client().prepareIndex("cache_test_idx", "type", "1").setSource("s", 1),_                client().prepareIndex("cache_test_idx", "type", "2").setSource("s", 2))___            _            assertThat(client().admin().indices().prepareStats("cache_test_idx").setRequestCache(true).get().getTotal().getRequestCache()_                .getHitCount(), equalTo(0L))__            assertThat(client().admin().indices().prepareStats("cache_test_idx").setRequestCache(true).get().getTotal().getRequestCache()_                .getMissCount(), equalTo(0L))___            _            SearchResponse r = client().prepareSearch("cache_test_idx").setSize(0)_                .addAggregation(topHits("foo").scriptField("bar",_                    new Script(ScriptType.INLINE, CustomScriptPlugin.NAME, "5", Collections.emptyMap()))).get()__            assertSearchResponse(r)___            assertThat(client().admin().indices().prepareStats("cache_test_idx").setRequestCache(true).get().getTotal().getRequestCache()_                .getHitCount(), equalTo(0L))__            assertThat(client().admin().indices().prepareStats("cache_test_idx").setRequestCache(true).get().getTotal().getRequestCache()_                .getMissCount(), equalTo(0L))___            _            r = client().prepareSearch("cache_test_idx").setSize(0)_                .addAggregation(topHits("foo").sort(_                    SortBuilders.scriptSort(_                        new Script(ScriptType.INLINE, CustomScriptPlugin.NAME, "5", Collections.emptyMap()), ScriptSortType.STRING)))_                .get()__            assertSearchResponse(r)___            assertThat(client().admin().indices().prepareStats("cache_test_idx").setRequestCache(true).get().getTotal().getRequestCache()_                .getHitCount(), equalTo(0L))__            assertThat(client().admin().indices().prepareStats("cache_test_idx").setRequestCache(true).get().getTotal().getRequestCache()_                .getMissCount(), equalTo(0L))___            _            _            r = client().prepareSearch("cache_test_idx").setSize(0).addAggregation(topHits("foo")).get()__            assertSearchResponse(r)___            assertThat(client().admin().indices().prepareStats("cache_test_idx").setRequestCache(true).get().getTotal().getRequestCache()_                .getHitCount(), equalTo(0L))__            assertThat(client().admin().indices().prepareStats("cache_test_idx").setRequestCache(true).get().getTotal().getRequestCache()_                .getMissCount(), equalTo(1L))__        } finally {_            assertAcked(client().admin().indices().prepareDelete("cache_test_idx"))_ _        }_    };make,sure,that,a,request,using,a,script,does,not,get,cached,and,a,request,not,using,a,script,does,get,cached;public,void,test,dont,cache,scripts,throws,exception,try,assert,acked,prepare,create,add,mapping,type,d,type,long,set,settings,settings,builder,put,requests,cache,enable,true,put,1,put,1,get,index,random,true,client,prepare,index,type,1,set,source,s,1,client,prepare,index,type,2,set,source,s,2,assert,that,client,admin,indices,prepare,stats,set,request,cache,true,get,get,total,get,request,cache,get,hit,count,equal,to,0l,assert,that,client,admin,indices,prepare,stats,set,request,cache,true,get,get,total,get,request,cache,get,miss,count,equal,to,0l,search,response,r,client,prepare,search,set,size,0,add,aggregation,top,hits,foo,script,field,bar,new,script,script,type,inline,custom,script,plugin,name,5,collections,empty,map,get,assert,search,response,r,assert,that,client,admin,indices,prepare,stats,set,request,cache,true,get,get,total,get,request,cache,get,hit,count,equal,to,0l,assert,that,client,admin,indices,prepare,stats,set,request,cache,true,get,get,total,get,request,cache,get,miss,count,equal,to,0l,r,client,prepare,search,set,size,0,add,aggregation,top,hits,foo,sort,sort,builders,script,sort,new,script,script,type,inline,custom,script,plugin,name,5,collections,empty,map,script,sort,type,string,get,assert,search,response,r,assert,that,client,admin,indices,prepare,stats,set,request,cache,true,get,get,total,get,request,cache,get,hit,count,equal,to,0l,assert,that,client,admin,indices,prepare,stats,set,request,cache,true,get,get,total,get,request,cache,get,miss,count,equal,to,0l,r,client,prepare,search,set,size,0,add,aggregation,top,hits,foo,get,assert,search,response,r,assert,that,client,admin,indices,prepare,stats,set,request,cache,true,get,get,total,get,request,cache,get,hit,count,equal,to,0l,assert,that,client,admin,indices,prepare,stats,set,request,cache,true,get,get,total,get,request,cache,get,miss,count,equal,to,1l,finally,assert,acked,client,admin,indices,prepare,delete
TopHitsIT -> public void testDontCacheScripts() throws Exception;1544035746;Make sure that a request using a script does not get cached and a request_not using a script does get cached.;public void testDontCacheScripts() throws Exception {_        try {_            assertAcked(prepareCreate("cache_test_idx").addMapping("type", "d", "type=long")_                .setSettings(_                    Settings.builder()_                        .put("requests.cache.enable", true)_                        .put("number_of_shards", 1)_                        .put("number_of_replicas", 1))_                .get())__            indexRandom(true, client().prepareIndex("cache_test_idx", "type", "1").setSource("s", 1),_                client().prepareIndex("cache_test_idx", "type", "2").setSource("s", 2))___            _            assertThat(client().admin().indices().prepareStats("cache_test_idx").setRequestCache(true).get().getTotal().getRequestCache()_                .getHitCount(), equalTo(0L))__            assertThat(client().admin().indices().prepareStats("cache_test_idx").setRequestCache(true).get().getTotal().getRequestCache()_                .getMissCount(), equalTo(0L))___            _            SearchResponse r = client().prepareSearch("cache_test_idx").setSize(0)_                .addAggregation(topHits("foo").scriptField("bar",_                    new Script(ScriptType.INLINE, CustomScriptPlugin.NAME, "5", Collections.emptyMap()))).get()__            assertSearchResponse(r)___            assertThat(client().admin().indices().prepareStats("cache_test_idx").setRequestCache(true).get().getTotal().getRequestCache()_                .getHitCount(), equalTo(0L))__            assertThat(client().admin().indices().prepareStats("cache_test_idx").setRequestCache(true).get().getTotal().getRequestCache()_                .getMissCount(), equalTo(0L))___            _            r = client().prepareSearch("cache_test_idx").setSize(0)_                .addAggregation(topHits("foo").sort(_                    SortBuilders.scriptSort(_                        new Script(ScriptType.INLINE, CustomScriptPlugin.NAME, "5", Collections.emptyMap()), ScriptSortType.STRING)))_                .get()__            assertSearchResponse(r)___            assertThat(client().admin().indices().prepareStats("cache_test_idx").setRequestCache(true).get().getTotal().getRequestCache()_                .getHitCount(), equalTo(0L))__            assertThat(client().admin().indices().prepareStats("cache_test_idx").setRequestCache(true).get().getTotal().getRequestCache()_                .getMissCount(), equalTo(0L))___            _            _            r = client().prepareSearch("cache_test_idx").setSize(0).addAggregation(topHits("foo")).get()__            assertSearchResponse(r)___            assertThat(client().admin().indices().prepareStats("cache_test_idx").setRequestCache(true).get().getTotal().getRequestCache()_                .getHitCount(), equalTo(0L))__            assertThat(client().admin().indices().prepareStats("cache_test_idx").setRequestCache(true).get().getTotal().getRequestCache()_                .getMissCount(), equalTo(1L))__        } finally {_            assertAcked(client().admin().indices().prepareDelete("cache_test_idx"))_ _        }_    };make,sure,that,a,request,using,a,script,does,not,get,cached,and,a,request,not,using,a,script,does,get,cached;public,void,test,dont,cache,scripts,throws,exception,try,assert,acked,prepare,create,add,mapping,type,d,type,long,set,settings,settings,builder,put,requests,cache,enable,true,put,1,put,1,get,index,random,true,client,prepare,index,type,1,set,source,s,1,client,prepare,index,type,2,set,source,s,2,assert,that,client,admin,indices,prepare,stats,set,request,cache,true,get,get,total,get,request,cache,get,hit,count,equal,to,0l,assert,that,client,admin,indices,prepare,stats,set,request,cache,true,get,get,total,get,request,cache,get,miss,count,equal,to,0l,search,response,r,client,prepare,search,set,size,0,add,aggregation,top,hits,foo,script,field,bar,new,script,script,type,inline,custom,script,plugin,name,5,collections,empty,map,get,assert,search,response,r,assert,that,client,admin,indices,prepare,stats,set,request,cache,true,get,get,total,get,request,cache,get,hit,count,equal,to,0l,assert,that,client,admin,indices,prepare,stats,set,request,cache,true,get,get,total,get,request,cache,get,miss,count,equal,to,0l,r,client,prepare,search,set,size,0,add,aggregation,top,hits,foo,sort,sort,builders,script,sort,new,script,script,type,inline,custom,script,plugin,name,5,collections,empty,map,script,sort,type,string,get,assert,search,response,r,assert,that,client,admin,indices,prepare,stats,set,request,cache,true,get,get,total,get,request,cache,get,hit,count,equal,to,0l,assert,that,client,admin,indices,prepare,stats,set,request,cache,true,get,get,total,get,request,cache,get,miss,count,equal,to,0l,r,client,prepare,search,set,size,0,add,aggregation,top,hits,foo,get,assert,search,response,r,assert,that,client,admin,indices,prepare,stats,set,request,cache,true,get,get,total,get,request,cache,get,hit,count,equal,to,0l,assert,that,client,admin,indices,prepare,stats,set,request,cache,true,get,get,total,get,request,cache,get,miss,count,equal,to,1l,finally,assert,acked,client,admin,indices,prepare,delete
TopHitsIT -> public void testDontCacheScripts() throws Exception;1544110272;Make sure that a request using a script does not get cached and a request_not using a script does get cached.;public void testDontCacheScripts() throws Exception {_        try {_            assertAcked(prepareCreate("cache_test_idx").addMapping("type", "d", "type=long")_                .setSettings(_                    Settings.builder()_                        .put("requests.cache.enable", true)_                        .put("number_of_shards", 1)_                        .put("number_of_replicas", 1))_                .get())__            indexRandom(true, client().prepareIndex("cache_test_idx", "type", "1").setSource("s", 1),_                client().prepareIndex("cache_test_idx", "type", "2").setSource("s", 2))___            _            assertThat(client().admin().indices().prepareStats("cache_test_idx").setRequestCache(true).get().getTotal().getRequestCache()_                .getHitCount(), equalTo(0L))__            assertThat(client().admin().indices().prepareStats("cache_test_idx").setRequestCache(true).get().getTotal().getRequestCache()_                .getMissCount(), equalTo(0L))___            _            SearchResponse r = client().prepareSearch("cache_test_idx").setSize(0)_                .addAggregation(topHits("foo").scriptField("bar",_                    new Script(ScriptType.INLINE, CustomScriptPlugin.NAME, "5", Collections.emptyMap()))).get()__            assertSearchResponse(r)___            assertThat(client().admin().indices().prepareStats("cache_test_idx").setRequestCache(true).get().getTotal().getRequestCache()_                .getHitCount(), equalTo(0L))__            assertThat(client().admin().indices().prepareStats("cache_test_idx").setRequestCache(true).get().getTotal().getRequestCache()_                .getMissCount(), equalTo(0L))___            _            r = client().prepareSearch("cache_test_idx").setSize(0)_                .addAggregation(topHits("foo").sort(_                    SortBuilders.scriptSort(_                        new Script(ScriptType.INLINE, CustomScriptPlugin.NAME, "5", Collections.emptyMap()), ScriptSortType.STRING)))_                .get()__            assertSearchResponse(r)___            assertThat(client().admin().indices().prepareStats("cache_test_idx").setRequestCache(true).get().getTotal().getRequestCache()_                .getHitCount(), equalTo(0L))__            assertThat(client().admin().indices().prepareStats("cache_test_idx").setRequestCache(true).get().getTotal().getRequestCache()_                .getMissCount(), equalTo(0L))___            _            _            r = client().prepareSearch("cache_test_idx").setSize(0).addAggregation(topHits("foo")).get()__            assertSearchResponse(r)___            assertThat(client().admin().indices().prepareStats("cache_test_idx").setRequestCache(true).get().getTotal().getRequestCache()_                .getHitCount(), equalTo(0L))__            assertThat(client().admin().indices().prepareStats("cache_test_idx").setRequestCache(true).get().getTotal().getRequestCache()_                .getMissCount(), equalTo(1L))__        } finally {_            assertAcked(client().admin().indices().prepareDelete("cache_test_idx"))_ _        }_    };make,sure,that,a,request,using,a,script,does,not,get,cached,and,a,request,not,using,a,script,does,get,cached;public,void,test,dont,cache,scripts,throws,exception,try,assert,acked,prepare,create,add,mapping,type,d,type,long,set,settings,settings,builder,put,requests,cache,enable,true,put,1,put,1,get,index,random,true,client,prepare,index,type,1,set,source,s,1,client,prepare,index,type,2,set,source,s,2,assert,that,client,admin,indices,prepare,stats,set,request,cache,true,get,get,total,get,request,cache,get,hit,count,equal,to,0l,assert,that,client,admin,indices,prepare,stats,set,request,cache,true,get,get,total,get,request,cache,get,miss,count,equal,to,0l,search,response,r,client,prepare,search,set,size,0,add,aggregation,top,hits,foo,script,field,bar,new,script,script,type,inline,custom,script,plugin,name,5,collections,empty,map,get,assert,search,response,r,assert,that,client,admin,indices,prepare,stats,set,request,cache,true,get,get,total,get,request,cache,get,hit,count,equal,to,0l,assert,that,client,admin,indices,prepare,stats,set,request,cache,true,get,get,total,get,request,cache,get,miss,count,equal,to,0l,r,client,prepare,search,set,size,0,add,aggregation,top,hits,foo,sort,sort,builders,script,sort,new,script,script,type,inline,custom,script,plugin,name,5,collections,empty,map,script,sort,type,string,get,assert,search,response,r,assert,that,client,admin,indices,prepare,stats,set,request,cache,true,get,get,total,get,request,cache,get,hit,count,equal,to,0l,assert,that,client,admin,indices,prepare,stats,set,request,cache,true,get,get,total,get,request,cache,get,miss,count,equal,to,0l,r,client,prepare,search,set,size,0,add,aggregation,top,hits,foo,get,assert,search,response,r,assert,that,client,admin,indices,prepare,stats,set,request,cache,true,get,get,total,get,request,cache,get,hit,count,equal,to,0l,assert,that,client,admin,indices,prepare,stats,set,request,cache,true,get,get,total,get,request,cache,get,miss,count,equal,to,1l,finally,assert,acked,client,admin,indices,prepare,delete
TopHitsIT -> public void testDontCacheScripts() throws Exception;1548230518;Make sure that a request using a script does not get cached and a request_not using a script does get cached.;public void testDontCacheScripts() throws Exception {_        try {_            assertAcked(prepareCreate("cache_test_idx").addMapping("type", "d", "type=long")_                .setSettings(_                    Settings.builder()_                        .put("requests.cache.enable", true)_                        .put("number_of_shards", 1)_                        .put("number_of_replicas", 1))_                .get())__            indexRandom(true, client().prepareIndex("cache_test_idx", "type", "1").setSource("s", 1),_                client().prepareIndex("cache_test_idx", "type", "2").setSource("s", 2))___            _            assertThat(client().admin().indices().prepareStats("cache_test_idx").setRequestCache(true).get().getTotal().getRequestCache()_                .getHitCount(), equalTo(0L))__            assertThat(client().admin().indices().prepareStats("cache_test_idx").setRequestCache(true).get().getTotal().getRequestCache()_                .getMissCount(), equalTo(0L))___            _            SearchResponse r = client().prepareSearch("cache_test_idx").setSize(0)_                .addAggregation(topHits("foo").scriptField("bar",_                    new Script(ScriptType.INLINE, CustomScriptPlugin.NAME, "5", Collections.emptyMap()))).get()__            assertSearchResponse(r)___            assertThat(client().admin().indices().prepareStats("cache_test_idx").setRequestCache(true).get().getTotal().getRequestCache()_                .getHitCount(), equalTo(0L))__            assertThat(client().admin().indices().prepareStats("cache_test_idx").setRequestCache(true).get().getTotal().getRequestCache()_                .getMissCount(), equalTo(0L))___            _            r = client().prepareSearch("cache_test_idx").setSize(0)_                .addAggregation(topHits("foo").sort(_                    SortBuilders.scriptSort(_                        new Script(ScriptType.INLINE, CustomScriptPlugin.NAME, "5", Collections.emptyMap()), ScriptSortType.STRING)))_                .get()__            assertSearchResponse(r)___            assertThat(client().admin().indices().prepareStats("cache_test_idx").setRequestCache(true).get().getTotal().getRequestCache()_                .getHitCount(), equalTo(0L))__            assertThat(client().admin().indices().prepareStats("cache_test_idx").setRequestCache(true).get().getTotal().getRequestCache()_                .getMissCount(), equalTo(0L))___            _            _            r = client().prepareSearch("cache_test_idx").setSize(0).addAggregation(topHits("foo")).get()__            assertSearchResponse(r)___            assertThat(client().admin().indices().prepareStats("cache_test_idx").setRequestCache(true).get().getTotal().getRequestCache()_                .getHitCount(), equalTo(0L))__            assertThat(client().admin().indices().prepareStats("cache_test_idx").setRequestCache(true).get().getTotal().getRequestCache()_                .getMissCount(), equalTo(1L))__        } finally {_            assertAcked(client().admin().indices().prepareDelete("cache_test_idx"))_ _        }_    };make,sure,that,a,request,using,a,script,does,not,get,cached,and,a,request,not,using,a,script,does,get,cached;public,void,test,dont,cache,scripts,throws,exception,try,assert,acked,prepare,create,add,mapping,type,d,type,long,set,settings,settings,builder,put,requests,cache,enable,true,put,1,put,1,get,index,random,true,client,prepare,index,type,1,set,source,s,1,client,prepare,index,type,2,set,source,s,2,assert,that,client,admin,indices,prepare,stats,set,request,cache,true,get,get,total,get,request,cache,get,hit,count,equal,to,0l,assert,that,client,admin,indices,prepare,stats,set,request,cache,true,get,get,total,get,request,cache,get,miss,count,equal,to,0l,search,response,r,client,prepare,search,set,size,0,add,aggregation,top,hits,foo,script,field,bar,new,script,script,type,inline,custom,script,plugin,name,5,collections,empty,map,get,assert,search,response,r,assert,that,client,admin,indices,prepare,stats,set,request,cache,true,get,get,total,get,request,cache,get,hit,count,equal,to,0l,assert,that,client,admin,indices,prepare,stats,set,request,cache,true,get,get,total,get,request,cache,get,miss,count,equal,to,0l,r,client,prepare,search,set,size,0,add,aggregation,top,hits,foo,sort,sort,builders,script,sort,new,script,script,type,inline,custom,script,plugin,name,5,collections,empty,map,script,sort,type,string,get,assert,search,response,r,assert,that,client,admin,indices,prepare,stats,set,request,cache,true,get,get,total,get,request,cache,get,hit,count,equal,to,0l,assert,that,client,admin,indices,prepare,stats,set,request,cache,true,get,get,total,get,request,cache,get,miss,count,equal,to,0l,r,client,prepare,search,set,size,0,add,aggregation,top,hits,foo,get,assert,search,response,r,assert,that,client,admin,indices,prepare,stats,set,request,cache,true,get,get,total,get,request,cache,get,hit,count,equal,to,0l,assert,that,client,admin,indices,prepare,stats,set,request,cache,true,get,get,total,get,request,cache,get,miss,count,equal,to,1l,finally,assert,acked,client,admin,indices,prepare,delete

commented;modifiers;parameterAmount;loc;comment;code
false;protected;3;15;;@Override protected InternalMedianAbsoluteDeviation createTestInstance(String name, List<PipelineAggregator> pipelineAggregators, Map<String, Object> metaData) {     final TDigestState valuesSketch = new TDigestState(randomDoubleBetween(20, 1000, true)).     final int numberOfValues = frequently() ? randomIntBetween(0, 1000) : 0.     for (int i = 0. i < numberOfValues. i++) {         valuesSketch.add(randomDouble()).     }     return new InternalMedianAbsoluteDeviation(name, pipelineAggregators, metaData, randomNumericDocValueFormat(), valuesSketch). }
false;protected;2;16;;@Override protected void assertReduced(InternalMedianAbsoluteDeviation reduced, List<InternalMedianAbsoluteDeviation> inputs) {     final TDigestState expectedValuesSketch = new TDigestState(reduced.getValuesSketch().compression()).     long totalCount = 0.     for (InternalMedianAbsoluteDeviation input : inputs) {         expectedValuesSketch.add(input.getValuesSketch()).         totalCount += input.getValuesSketch().size().     }     assertEquals(totalCount, reduced.getValuesSketch().size()).     if (totalCount > 0) {         assertEquals(expectedValuesSketch.quantile(0), reduced.getValuesSketch().quantile(0), 0d).         assertEquals(expectedValuesSketch.quantile(1), reduced.getValuesSketch().quantile(1), 0d).     } }
false;protected;2;7;;@Override protected void assertFromXContent(InternalMedianAbsoluteDeviation internalMAD, ParsedAggregation parsedAggregation) throws IOException {     assertTrue(parsedAggregation instanceof ParsedMedianAbsoluteDeviation).     ParsedMedianAbsoluteDeviation parsedMAD = (ParsedMedianAbsoluteDeviation) parsedAggregation.     // Double.compare handles NaN, which we use for no result     assertEquals(internalMAD.getMedianAbsoluteDeviation(), parsedMAD.getMedianAbsoluteDeviation(), 0). }
false;protected;0;4;;@Override protected Writeable.Reader<InternalMedianAbsoluteDeviation> instanceReader() {     return InternalMedianAbsoluteDeviation::new. }
false;protected;1;30;;@Override protected InternalMedianAbsoluteDeviation mutateInstance(InternalMedianAbsoluteDeviation instance) throws IOException {     String name = instance.getName().     TDigestState valuesSketch = instance.getValuesSketch().     Map<String, Object> metaData = instance.getMetaData().     switch(between(0, 2)) {         case 0:             name += randomAlphaOfLengthBetween(2, 10).             break.         case 1:             final TDigestState newValuesSketch = new TDigestState(instance.getValuesSketch().compression()).             final int numberOfValues = between(10, 100).             for (int i = 0. i < numberOfValues. i++) {                 newValuesSketch.add(randomDouble()).             }             valuesSketch = newValuesSketch.             break.         case 2:             if (metaData == null) {                 metaData = new HashMap<>(1).             } else {                 metaData = new HashMap<>(metaData).             }             metaData.put(randomAlphaOfLengthBetween(2, 10), randomInt()).             break.     }     return new InternalMedianAbsoluteDeviation(name, instance.pipelineAggregators(), metaData, instance.format, valuesSketch). }

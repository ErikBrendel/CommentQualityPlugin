commented;modifiers;parameterAmount;loc;comment;code
false;public;0;10;;@Override public void setupSuiteScopeCluster() throws Exception {     assertAcked(prepareCreate("index").addMapping("type", "f", "type=keyword").get()).     numDocs = randomIntBetween(1, 20).     List<IndexRequestBuilder> docs = new ArrayList<>().     for (int i = 0. i < numDocs. ++i) {         docs.add(client().prepareIndex("index", "type").setSource("f", Integer.toString(i / 3))).     }     indexRandom(true, docs). }
false;public;0;23;;public void testScroll() {     final int size = randomIntBetween(1, 4).     SearchResponse response = client().prepareSearch("index").setSize(size).setScroll(TimeValue.timeValueMinutes(1)).addAggregation(terms("f").field("f")).get().     assertSearchResponse(response).     Aggregations aggregations = response.getAggregations().     assertNotNull(aggregations).     Terms terms = aggregations.get("f").     assertEquals(Math.min(numDocs, 3L), terms.getBucketByKey("0").getDocCount()).     int total = response.getHits().getHits().length.     while (response.getHits().getHits().length > 0) {         response = client().prepareSearchScroll(response.getScrollId()).setScroll(TimeValue.timeValueMinutes(1)).get().         assertSearchResponse(response).         assertNull(response.getAggregations()).         total += response.getHits().getHits().length.     }     clearScroll(response.getScrollId()).     assertEquals(numDocs, total). }

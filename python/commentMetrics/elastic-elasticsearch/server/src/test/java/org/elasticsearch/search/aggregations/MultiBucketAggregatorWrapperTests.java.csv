commented;modifiers;parameterAmount;loc;comment;code
false;public;0;30;;public void testNoNullScorerIsDelegated() throws Exception {     LeafReaderContext leafReaderContext = MemoryIndex.fromDocument(Collections.emptyList(), new MockAnalyzer(random())).createSearcher().getIndexReader().leaves().get(0).     BigArrays bigArrays = new MockBigArrays(new MockPageCacheRecycler(Settings.EMPTY), new NoneCircuitBreakerService()).     SearchContext searchContext = mock(SearchContext.class).     when(searchContext.bigArrays()).thenReturn(bigArrays).     Aggregator aggregator = mock(Aggregator.class).     AggregatorFactory aggregatorFactory = new TestAggregatorFactory(searchContext, aggregator).     LeafBucketCollector wrappedCollector = mock(LeafBucketCollector.class).     when(aggregator.getLeafCollector(leafReaderContext)).thenReturn(wrappedCollector).     Aggregator wrapper = AggregatorFactory.asMultiBucketAggregator(aggregatorFactory, searchContext, null).     LeafBucketCollector collector = wrapper.getLeafCollector(leafReaderContext).     collector.collect(0, 0).     // setScorer should not be invoked as it has not been set     // Only collect should be invoked:     verify(wrappedCollector).collect(0, 0).     verifyNoMoreInteractions(wrappedCollector).     reset(wrappedCollector).     Scorer scorer = mock(Scorer.class).     collector.setScorer(scorer).     collector.collect(0, 1).     verify(wrappedCollector).setScorer(same(scorer)).     verify(wrappedCollector).collect(0, 0).     verifyNoMoreInteractions(wrappedCollector).     wrapper.close(). }

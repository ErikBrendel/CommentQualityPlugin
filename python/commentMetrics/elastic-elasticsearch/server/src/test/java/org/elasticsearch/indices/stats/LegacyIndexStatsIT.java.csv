commented;modifiers;parameterAmount;loc;comment;code
false;protected;0;4;;@Override protected boolean forbidPrivateIndexSettings() {     return false. }
false;public;0;60;;public void testFieldDataFieldsParam() {     assertAcked(client().admin().indices().prepareCreate("test1").setSettings(Settings.builder().put(IndexMetaData.SETTING_INDEX_VERSION_CREATED.getKey(), Version.V_6_0_0)).addMapping("_doc", "bar", "type=text,fielddata=true", "baz", "type=text,fielddata=true").get()).     ensureGreen().     client().prepareIndex("test1", "_doc", Integer.toString(1)).setSource("{\"bar\":\"bar\",\"baz\":\"baz\"}", XContentType.JSON).get().     client().prepareIndex("test1", "_doc", Integer.toString(2)).setSource("{\"bar\":\"bar\",\"baz\":\"baz\"}", XContentType.JSON).get().     refresh().     client().prepareSearch("_all").addSort("bar", SortOrder.ASC).addSort("baz", SortOrder.ASC).execute().actionGet().     final IndicesStatsRequestBuilder builder = client().admin().indices().prepareStats().     {         final IndicesStatsResponse stats = builder.execute().actionGet().         assertThat(stats.getTotal().fieldData.getMemorySizeInBytes(), greaterThan(0L)).         assertThat(stats.getTotal().fieldData.getFields(), is(nullValue())).     }     {         final IndicesStatsResponse stats = builder.setFieldDataFields("bar").execute().actionGet().         assertThat(stats.getTotal().fieldData.getMemorySizeInBytes(), greaterThan(0L)).         assertThat(stats.getTotal().fieldData.getFields().containsField("bar"), is(true)).         assertThat(stats.getTotal().fieldData.getFields().get("bar"), greaterThan(0L)).         assertThat(stats.getTotal().fieldData.getFields().containsField("baz"), is(false)).     }     {         final IndicesStatsResponse stats = builder.setFieldDataFields("bar", "baz").execute().actionGet().         assertThat(stats.getTotal().fieldData.getMemorySizeInBytes(), greaterThan(0L)).         assertThat(stats.getTotal().fieldData.getFields().containsField("bar"), is(true)).         assertThat(stats.getTotal().fieldData.getFields().get("bar"), greaterThan(0L)).         assertThat(stats.getTotal().fieldData.getFields().containsField("baz"), is(true)).         assertThat(stats.getTotal().fieldData.getFields().get("baz"), greaterThan(0L)).     }     {         final IndicesStatsResponse stats = builder.setFieldDataFields("*").execute().actionGet().         assertThat(stats.getTotal().fieldData.getMemorySizeInBytes(), greaterThan(0L)).         assertThat(stats.getTotal().fieldData.getFields().containsField("bar"), is(true)).         assertThat(stats.getTotal().fieldData.getFields().get("bar"), greaterThan(0L)).         assertThat(stats.getTotal().fieldData.getFields().containsField("baz"), is(true)).         assertThat(stats.getTotal().fieldData.getFields().get("baz"), greaterThan(0L)).     }     {         final IndicesStatsResponse stats = builder.setFieldDataFields("*r").execute().actionGet().         assertThat(stats.getTotal().fieldData.getMemorySizeInBytes(), greaterThan(0L)).         assertThat(stats.getTotal().fieldData.getFields().containsField("bar"), is(true)).         assertThat(stats.getTotal().fieldData.getFields().get("bar"), greaterThan(0L)).         assertThat(stats.getTotal().fieldData.getFields().containsField("baz"), is(false)).     } }

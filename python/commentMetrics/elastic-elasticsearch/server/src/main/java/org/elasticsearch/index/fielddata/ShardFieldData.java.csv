commented;modifiers;parameterAmount;loc;comment;code
false;public;1;13;;public FieldDataStats stats(String... fields) {     ObjectLongHashMap<String> fieldTotals = null.     if (fields != null && fields.length > 0) {         fieldTotals = new ObjectLongHashMap<>().         for (Map.Entry<String, CounterMetric> entry : perFieldTotals.entrySet()) {             if (Regex.simpleMatch(fields, entry.getKey())) {                 fieldTotals.put(entry.getKey(), entry.getValue().count()).             }         }     }     return new FieldDataStats(totalMetric.count(), evictionsMetric.count(), fieldTotals == null ? null : new FieldMemoryStats(fieldTotals)). }
false;public;3;15;;@Override public void onCache(ShardId shardId, String fieldName, Accountable ramUsage) {     totalMetric.inc(ramUsage.ramBytesUsed()).     CounterMetric total = perFieldTotals.get(fieldName).     if (total != null) {         total.inc(ramUsage.ramBytesUsed()).     } else {         total = new CounterMetric().         total.inc(ramUsage.ramBytesUsed()).         CounterMetric prev = perFieldTotals.putIfAbsent(fieldName, total).         if (prev != null) {             prev.inc(ramUsage.ramBytesUsed()).         }     } }
false;public;4;14;;@Override public void onRemoval(ShardId shardId, String fieldName, boolean wasEvicted, long sizeInBytes) {     if (wasEvicted) {         evictionsMetric.inc().     }     if (sizeInBytes != -1) {         totalMetric.dec(sizeInBytes).         CounterMetric total = perFieldTotals.get(fieldName).         if (total != null) {             total.dec(sizeInBytes).         }     } }

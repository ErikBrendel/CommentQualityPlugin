commented;modifiers;parameterAmount;loc;comment;code
false;static;1;15;;static double computeMedianAbsoluteDeviation(TDigestState valuesSketch) {     if (valuesSketch.size() == 0) {         return Double.NaN.     } else {         final double approximateMedian = valuesSketch.quantile(0.5).         final TDigestState approximatedDeviationsSketch = new TDigestState(valuesSketch.compression()).         valuesSketch.centroids().forEach(centroid -> {             final double deviation = Math.abs(approximateMedian - centroid.mean()).             approximatedDeviationsSketch.add(deviation, centroid.count()).         }).         return approximatedDeviationsSketch.quantile(0.5).     } }
false;protected;1;6;;@Override protected void doWriteTo(StreamOutput out) throws IOException {     out.writeNamedWriteable(format).     TDigestState.write(valuesSketch, out).     out.writeDouble(medianAbsoluteDeviation). }
false;public;2;10;;@Override public InternalAggregation doReduce(List<InternalAggregation> aggregations, ReduceContext reduceContext) {     final TDigestState valueMerged = new TDigestState(valuesSketch.compression()).     for (InternalAggregation aggregation : aggregations) {         final InternalMedianAbsoluteDeviation madAggregation = (InternalMedianAbsoluteDeviation) aggregation.         valueMerged.add(madAggregation.valuesSketch).     }     return new InternalMedianAbsoluteDeviation(name, pipelineAggregators(), metaData, format, valueMerged). }
false;public;2;14;;@Override public XContentBuilder doXContentBody(XContentBuilder builder, Params params) throws IOException {     final boolean anyResults = valuesSketch.size() > 0.     final Double mad = anyResults ? getMedianAbsoluteDeviation() : null.     builder.field(CommonFields.VALUE.getPreferredName(), mad).     if (format != DocValueFormat.RAW && anyResults) {         builder.field(CommonFields.VALUE_AS_STRING.getPreferredName(), format.format(mad).toString()).     }     return builder. }
false;protected;0;4;;@Override protected int doHashCode() {     return Objects.hash(valuesSketch). }
false;protected;1;5;;@Override protected boolean doEquals(Object obj) {     InternalMedianAbsoluteDeviation other = (InternalMedianAbsoluteDeviation) obj.     return Objects.equals(valuesSketch, other.valuesSketch). }
false;public;0;4;;@Override public String getWriteableName() {     return MedianAbsoluteDeviationAggregationBuilder.NAME. }
false;;0;3;;TDigestState getValuesSketch() {     return valuesSketch. }
false;public;0;4;;@Override public double value() {     return getMedianAbsoluteDeviation(). }
false;public;0;4;;@Override public double getMedianAbsoluteDeviation() {     return medianAbsoluteDeviation. }

commented;modifiers;parameterAmount;loc;comment;code
false;protected;3;15;;@Override protected void execute(Terminal terminal, OptionSet options, Environment env) throws Exception {     super.execute(terminal, options, env).     Settings settings = env.settings().     terminal.println(Terminal.Verbosity.VERBOSE, "Checking node.master setting").     Boolean master = Node.NODE_MASTER_SETTING.get(settings).     if (master == false) {         throw new ElasticsearchException(NOT_MASTER_NODE_MSG).     }     processNodePathsWithLock(terminal, options, env).     terminal.println(MASTER_NODE_BOOTSTRAPPED_MSG). }
false;protected;2;44;;protected void processNodePaths(Terminal terminal, Path[] dataPaths) throws IOException {     terminal.println(Terminal.Verbosity.VERBOSE, "Loading node metadata").     final NodeMetaData nodeMetaData = NodeMetaData.FORMAT.loadLatestState(logger, namedXContentRegistry, dataPaths).     if (nodeMetaData == null) {         throw new ElasticsearchException(NO_NODE_METADATA_FOUND_MSG).     }     String nodeId = nodeMetaData.nodeId().     terminal.println(Terminal.Verbosity.VERBOSE, "Current nodeId is " + nodeId).     final Tuple<Manifest, MetaData> manifestMetaDataTuple = loadMetaData(terminal, dataPaths).     final Manifest manifest = manifestMetaDataTuple.v1().     final MetaData metaData = manifestMetaDataTuple.v2().     final CoordinationMetaData coordinationMetaData = metaData.coordinationMetaData().     if (coordinationMetaData == null || coordinationMetaData.getLastCommittedConfiguration() == null || coordinationMetaData.getLastCommittedConfiguration().isEmpty()) {         throw new ElasticsearchException(EMPTY_LAST_COMMITTED_VOTING_CONFIG_MSG).     }     terminal.println(String.format(Locale.ROOT, CLUSTER_STATE_TERM_VERSION_MSG_FORMAT, coordinationMetaData.term(), metaData.version())).     confirm(terminal, CONFIRMATION_MSG).     CoordinationMetaData newCoordinationMetaData = CoordinationMetaData.builder(coordinationMetaData).clearVotingConfigExclusions().lastAcceptedConfiguration(new CoordinationMetaData.VotingConfiguration(Collections.singleton(nodeId))).lastCommittedConfiguration(new CoordinationMetaData.VotingConfiguration(Collections.singleton(nodeId))).build().     Settings persistentSettings = Settings.builder().put(metaData.persistentSettings()).put(UNSAFE_BOOTSTRAP.getKey(), true).build().     MetaData newMetaData = MetaData.builder(metaData).clusterUUID(MetaData.UNKNOWN_CLUSTER_UUID).generateClusterUuidIfNeeded().clusterUUIDCommitted(true).persistentSettings(persistentSettings).coordinationMetaData(newCoordinationMetaData).build().     writeNewMetaData(terminal, manifest, manifest.getCurrentTerm(), metaData, newMetaData, dataPaths). }

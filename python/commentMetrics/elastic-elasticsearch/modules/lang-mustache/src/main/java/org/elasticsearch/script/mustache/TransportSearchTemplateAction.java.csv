commented;modifiers;parameterAmount;loc;comment;code
false;public;1;9;;@Override public void onResponse(SearchResponse searchResponse) {     try {         response.setResponse(searchResponse).         listener.onResponse(response).     } catch (Exception t) {         listener.onFailure(t).     } }
false;public;1;4;;@Override public void onFailure(Exception t) {     listener.onFailure(t). }
false;protected;3;29;;@Override protected void doExecute(Task task, SearchTemplateRequest request, ActionListener<SearchTemplateResponse> listener) {     final SearchTemplateResponse response = new SearchTemplateResponse().     try {         SearchRequest searchRequest = convert(request, response, scriptService, xContentRegistry).         if (searchRequest != null) {             client.search(searchRequest, new ActionListener<SearchResponse>() {                  @Override                 public void onResponse(SearchResponse searchResponse) {                     try {                         response.setResponse(searchResponse).                         listener.onResponse(response).                     } catch (Exception t) {                         listener.onFailure(t).                     }                 }                  @Override                 public void onFailure(Exception t) {                     listener.onFailure(t).                 }             }).         } else {             listener.onResponse(response).         }     } catch (IOException e) {         listener.onFailure(e).     } }
false;static;4;24;;static SearchRequest convert(SearchTemplateRequest searchTemplateRequest, SearchTemplateResponse response, ScriptService scriptService, NamedXContentRegistry xContentRegistry) throws IOException {     Script script = new Script(searchTemplateRequest.getScriptType(), searchTemplateRequest.getScriptType() == ScriptType.STORED ? null : TEMPLATE_LANG, searchTemplateRequest.getScript(), searchTemplateRequest.getScriptParams() == null ? Collections.emptyMap() : searchTemplateRequest.getScriptParams()).     TemplateScript compiledScript = scriptService.compile(script, TemplateScript.CONTEXT).newInstance(script.getParams()).     String source = compiledScript.execute().     response.setSource(new BytesArray(source)).     SearchRequest searchRequest = searchTemplateRequest.getRequest().     if (searchTemplateRequest.isSimulate()) {         return null.     }     try (XContentParser parser = XContentFactory.xContent(XContentType.JSON).createParser(xContentRegistry, LoggingDeprecationHandler.INSTANCE, source)) {         SearchSourceBuilder builder = SearchSourceBuilder.searchSource().         builder.parseXContent(parser, false).         builder.explain(searchTemplateRequest.isExplain()).         builder.profile(searchTemplateRequest.isProfile()).         searchRequest.source(builder).     }     return searchRequest. }

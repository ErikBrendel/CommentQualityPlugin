commented;modifiers;parameterAmount;loc;comment;code
true;public;0;15;/**  * Check that the deprecated analyzer name "standard_html_strip" throws exception for indices created since 7.0.0  */ ;/**  * Check that the deprecated analyzer name "standard_html_strip" throws exception for indices created since 7.0.0  */ public void testStandardHtmlStripAnalyzerDeprecationError() throws IOException {     Settings settings = Settings.builder().put(Environment.PATH_HOME_SETTING.getKey(), createTempDir()).put(IndexMetaData.SETTING_VERSION_CREATED, VersionUtils.randomVersionBetween(random(), Version.V_7_0_0, Version.CURRENT)).put("index.analysis.analyzer.custom_analyzer.type", "standard_html_strip").putList("index.analysis.analyzer.custom_analyzer.stopwords", "a", "b").build().     IndexSettings idxSettings = IndexSettingsModule.newIndexSettings("index", settings).     CommonAnalysisPlugin commonAnalysisPlugin = new CommonAnalysisPlugin().     IllegalArgumentException ex = expectThrows(IllegalArgumentException.class, () -> createTestAnalysis(idxSettings, settings, commonAnalysisPlugin)).     assertEquals("[standard_html_strip] analyzer is not supported for new indices, " + "use a custom analyzer using [standard] tokenizer and [html_strip] char_filter, plus [lowercase] filter", ex.getMessage()). }
true;public;0;19;/**  * Check that the deprecated analyzer name "standard_html_strip" issues a deprecation warning for indices created since 6.5.0 until 7  */ ;/**  * Check that the deprecated analyzer name "standard_html_strip" issues a deprecation warning for indices created since 6.5.0 until 7  */ public void testStandardHtmlStripAnalyzerDeprecationWarning() throws IOException {     Settings settings = Settings.builder().put(Environment.PATH_HOME_SETTING.getKey(), createTempDir()).put(IndexMetaData.SETTING_VERSION_CREATED, VersionUtils.randomVersionBetween(random(), Version.V_6_0_0, VersionUtils.getPreviousVersion(Version.V_7_0_0))).put("index.analysis.analyzer.custom_analyzer.type", "standard_html_strip").putList("index.analysis.analyzer.custom_analyzer.stopwords", "a", "b").build().     IndexSettings idxSettings = IndexSettingsModule.newIndexSettings("index", settings).     try (CommonAnalysisPlugin commonAnalysisPlugin = new CommonAnalysisPlugin()) {         IndexAnalyzers analyzers = createTestAnalysis(idxSettings, settings, commonAnalysisPlugin).indexAnalyzers.         Analyzer analyzer = analyzers.get("custom_analyzer").         assertNotNull(((NamedAnalyzer) analyzer).analyzer()).         assertWarnings("Deprecated analyzer [standard_html_strip] used, " + "replace it with a custom analyzer using [standard] tokenizer and [html_strip] char_filter, plus [lowercase] filter").     } }

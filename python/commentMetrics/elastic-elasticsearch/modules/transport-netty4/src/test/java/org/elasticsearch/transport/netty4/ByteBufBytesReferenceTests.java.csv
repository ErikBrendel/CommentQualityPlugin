commented;modifiers;parameterAmount;loc;comment;code
false;protected;1;4;;@Override protected BytesReference newBytesReference(int length) throws IOException {     return newBytesReferenceWithOffsetOfZero(length). }
false;protected;1;13;;@Override protected BytesReference newBytesReferenceWithOffsetOfZero(int length) throws IOException {     ReleasableBytesStreamOutput out = new ReleasableBytesStreamOutput(length, bigarrays).     for (int i = 0. i < length. i++) {         out.writeByte((byte) random().nextInt(1 << 8)).     }     assertEquals(out.size(), length).     BytesReference ref = out.bytes().     assertEquals(ref.length(), length).     BytesRef bytesRef = ref.toBytesRef().     final ByteBuf buffer = Unpooled.wrappedBuffer(bytesRef.bytes, bytesRef.offset, bytesRef.length).     return Netty4Utils.toBytesReference(buffer). }
false;public;0;14;;public void testSliceOnAdvancedBuffer() throws IOException {     BytesReference bytesReference = newBytesReference(randomIntBetween(10, 3 * PAGE_SIZE)).     BytesRef bytesRef = bytesReference.toBytesRef().     ByteBuf channelBuffer = Unpooled.wrappedBuffer(bytesRef.bytes, bytesRef.offset, bytesRef.length).     int numBytesToRead = randomIntBetween(1, 5).     for (int i = 0. i < numBytesToRead. i++) {         channelBuffer.readByte().     }     BytesReference other = Netty4Utils.toBytesReference(channelBuffer).     BytesReference slice = bytesReference.slice(numBytesToRead, bytesReference.length() - numBytesToRead).     assertEquals(other, slice).     assertEquals(other.slice(3, 1), slice.slice(3, 1)). }
false;public;0;18;;public void testImmutable() throws IOException {     BytesReference bytesReference = newBytesReference(randomIntBetween(10, 3 * PAGE_SIZE)).     BytesRef bytesRef = BytesRef.deepCopyOf(bytesReference.toBytesRef()).     ByteBuf channelBuffer = Unpooled.wrappedBuffer(bytesRef.bytes, bytesRef.offset, bytesRef.length).     ByteBufBytesReference byteBufBytesReference = new ByteBufBytesReference(channelBuffer, bytesRef.length).     assertEquals(byteBufBytesReference, bytesReference).     // this advances the index of the channel buffer     channelBuffer.readInt().     assertEquals(byteBufBytesReference, bytesReference).     assertEquals(bytesRef, byteBufBytesReference.toBytesRef()).     BytesRef unicodeBytes = new BytesRef(randomUnicodeOfCodepointLength(100)).     channelBuffer = Unpooled.wrappedBuffer(unicodeBytes.bytes, unicodeBytes.offset, unicodeBytes.length).     byteBufBytesReference = new ByteBufBytesReference(channelBuffer, unicodeBytes.length).     String utf8ToString = byteBufBytesReference.utf8ToString().     // this advances the index of the channel buffer     channelBuffer.readInt().     assertEquals(utf8ToString, byteBufBytesReference.utf8ToString()). }

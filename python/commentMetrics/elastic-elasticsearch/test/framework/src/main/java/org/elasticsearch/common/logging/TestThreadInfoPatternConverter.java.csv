commented;modifiers;parameterAmount;loc;comment;code
true;public,static;1;7;/**  * Called by log4j2 to initialize this converter.  */ ;/**  * Called by log4j2 to initialize this converter.  */ public static TestThreadInfoPatternConverter newInstance(final String[] options) {     if (options.length > 0) {         throw new IllegalArgumentException("no options supported but options provided: " + Arrays.toString(options)).     }     return new TestThreadInfoPatternConverter(). }
false;public;2;7;;@Override public void format(LogEvent event, StringBuilder toAppendTo) {     toAppendTo.append(threadInfo(event.getThreadName())).     if (event.getContextData().isEmpty() == false) {         toAppendTo.append(event.getContextData()).     } }
false;static;1;42;;static String threadInfo(String threadName) {     Matcher m = ELASTICSEARCH_THREAD_NAME_PATTERN.matcher(threadName).     if (m.matches()) {         // Thread looks like a node thread so use the node name         return m.group(1).     }     m = TEST_THREAD_NAME_PATTERN.matcher(threadName).     if (m.matches()) {         /*              * Thread looks like a test thread so use the test method name.              * It'd be pretty reasonable not to use a prefix at all here but              * the logger layout pretty much expects one and the test method              * can be pretty nice to have around anyway.              */         return m.group(1).     }     m = TEST_SUITE_INIT_THREAD_NAME_PATTERN.matcher(threadName).     if (m.matches()) {         /*              * Thread looks like test suite initialization or tead down and              * we don't have any more information to give. Like above, we              * could spit out nothing here but the logger layout expect              * something and it *is* nice to know what lines come from test              * teardown and initialization.              */         return "suite".     }     m = NOT_YET_NAMED_NODE_THREAD_NAME_PATTERN.matcher(threadName).     if (m.matches()) {         /*              * These are as yet unnamed integ test nodes. I'd prefer to log              * the node name but I don't have it yet.              */         return "integ_" + m.group(1) + "".     }     /*          * These are uncategorized threads. We log the entire thread name in          * case it is useful. We wrap it in `[]` so you tell that it is a          * thread name rather than a node name or something.          */     return "[" + threadName + "]". }

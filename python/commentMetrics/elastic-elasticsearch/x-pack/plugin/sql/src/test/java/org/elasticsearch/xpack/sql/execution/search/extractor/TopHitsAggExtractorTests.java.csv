commented;modifiers;parameterAmount;loc;comment;code
false;public,static;0;3;;public static TopHitsAggExtractor randomTopHitsAggExtractor() {     return new TopHitsAggExtractor(randomAlphaOfLength(16), randomFrom(DataType.values())). }
false;protected;0;4;;@Override protected TopHitsAggExtractor createTestInstance() {     return randomTopHitsAggExtractor(). }
false;protected;0;4;;@Override protected Reader<TopHitsAggExtractor> instanceReader() {     return TopHitsAggExtractor::new. }
false;protected;1;4;;@Override protected TopHitsAggExtractor mutateInstance(TopHitsAggExtractor instance) {     return new TopHitsAggExtractor(instance.name() + "mutated", randomFrom(DataType.values())). }
false;public;0;6;;public void testNoAggs() {     Bucket bucket = new TestBucket(emptyMap(), 0, new Aggregations(emptyList())).     TopHitsAggExtractor extractor = randomTopHitsAggExtractor().     SqlException exception = expectThrows(SqlException.class, () -> extractor.extract(bucket)).     assertEquals("Cannot find an aggregation named " + extractor.name(), exception.getMessage()). }
false;public;0;8;;public void testZeroNullValue() {     TopHitsAggExtractor extractor = randomTopHitsAggExtractor().     TotalHits totalHits = new TotalHits(0, TotalHits.Relation.EQUAL_TO).     Aggregation agg = new InternalTopHits(extractor.name(), 0, 0, null, new SearchHits(null, totalHits, 0.0f), null, null).     Bucket bucket = new TestBucket(emptyMap(), 0, new Aggregations(singletonList(agg))).     assertNull(extractor.extract(bucket)). }
false;public;0;8;;public void testExtractValue() {     TopHitsAggExtractor extractor = new TopHitsAggExtractor("topHitsAgg", DataType.KEYWORD).     String value = "Str_Value".     Aggregation agg = new InternalTopHits(extractor.name(), 0, 1, null, searchHitsOf(value), null, null).     Bucket bucket = new TestBucket(emptyMap(), 0, new Aggregations(singletonList(agg))).     assertEquals(value, extractor.extract(bucket)). }
false;public;0;8;;public void testExtractDateValue() {     TopHitsAggExtractor extractor = new TopHitsAggExtractor("topHitsAgg", DataType.DATETIME).     long value = 123456789L.     Aggregation agg = new InternalTopHits(extractor.name(), 0, 1, null, searchHitsOf(value), null, null).     Bucket bucket = new TestBucket(emptyMap(), 0, new Aggregations(singletonList(agg))).     assertEquals(DateUtils.asDateTime(value), extractor.extract(bucket)). }
false;private;1;6;;private SearchHits searchHitsOf(Object value) {     TotalHits totalHits = new TotalHits(10, TotalHits.Relation.EQUAL_TO).     return new SearchHits(new SearchHit[] { new SearchHit(1, "docId", null, Collections.singletonMap("topHitsAgg", new DocumentField("field", Collections.singletonList(value)))) }, totalHits, 0.0f). }

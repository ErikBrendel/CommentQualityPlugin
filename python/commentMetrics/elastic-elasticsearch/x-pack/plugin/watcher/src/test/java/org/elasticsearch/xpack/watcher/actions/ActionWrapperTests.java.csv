commented;modifiers;parameterAmount;loc;comment;code
false;public;0;9;;public void testThatUnmetActionConditionResetsAckStatus() throws Exception {     WatchStatus watchStatus = new WatchStatus(now, Collections.singletonMap("_action", createActionStatus(State.ACKED))).     when(watch.status()).thenReturn(watchStatus).     ActionWrapperResult result = actionWrapper.execute(mockExecutionContent(watch)).     assertThat(result.condition().met(), is(false)).     assertThat(result.action().status(), is(Action.Result.Status.CONDITION_FAILED)).     assertThat(watch.status().actionStatus("_action").ackStatus().state(), is(State.AWAITS_SUCCESSFUL_EXECUTION)). }
false;public;0;12;;public void testOtherActionsAreNotAffectedOnActionConditionReset() throws Exception {     Map<String, ActionStatus> statusMap = new HashMap<>().     statusMap.put("_action", createActionStatus(State.ACKED)).     State otherState = randomFrom(State.ACKABLE, State.AWAITS_SUCCESSFUL_EXECUTION).     statusMap.put("other", createActionStatus(otherState)).     WatchStatus watchStatus = new WatchStatus(now, statusMap).     when(watch.status()).thenReturn(watchStatus).     actionWrapper.execute(mockExecutionContent(watch)).     assertThat(watch.status().actionStatus("other").ackStatus().state(), is(otherState)). }
false;private;1;7;;private WatchExecutionContext mockExecutionContent(Watch watch) {     WatchExecutionContext ctx = mock(WatchExecutionContext.class).     when(watch.id()).thenReturn("watchId").     when(ctx.watch()).thenReturn(watch).     when(ctx.skipThrottling(eq("_action"))).thenReturn(true).     return ctx. }
false;private;1;5;;private ActionStatus createActionStatus(State state) {     ActionStatus.AckStatus ackStatus = new ActionStatus.AckStatus(now, state).     ActionStatus.Execution execution = ActionStatus.Execution.successful(now).     return new ActionStatus(ackStatus, execution, execution, null). }

commented;modifiers;parameterAmount;loc;comment;code
false;public;0;41;;public void testIndexActionFields() throws Exception {     String index = "the-index".     String type = "the-type".     PutWatchResponse putWatchResponse = watcherClient().preparePutWatch("_id").setSource(watchBuilder().trigger(schedule(interval("5m"))).addAction("index", indexAction(index, type))).get().     assertThat(putWatchResponse.isCreated(), is(true)).     timeWarp().trigger("_id").     flush().     refresh().     // the action should fail as no email server is available     assertWatchWithMinimumActionsCount("_id", ExecutionState.EXECUTED, 1).     flush().     refresh().     SearchResponse response = client().prepareSearch(HistoryStoreField.INDEX_PREFIX_WITH_TEMPLATE + "*").setSource(searchSource().aggregation(terms("index_action_indices").field("result.actions.index.response.index")).aggregation(terms("index_action_types").field("result.actions.index.response.type"))).get().     assertThat(response, notNullValue()).     assertThat(response.getHits().getTotalHits().value, is(1L)).     Aggregations aggs = response.getAggregations().     assertThat(aggs, notNullValue()).     Terms terms = aggs.get("index_action_indices").     assertThat(terms, notNullValue()).     assertThat(terms.getBuckets().size(), is(1)).     assertThat(terms.getBucketByKey(index), notNullValue()).     assertThat(terms.getBucketByKey(index).getDocCount(), is(1L)).     terms = aggs.get("index_action_types").     assertThat(terms, notNullValue()).     assertThat(terms.getBuckets().size(), is(1)).     assertThat(terms.getBucketByKey(type), notNullValue()).     assertThat(terms.getBucketByKey(type).getDocCount(), is(1L)). }

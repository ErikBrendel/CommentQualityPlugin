commented;modifiers;parameterAmount;loc;comment;code
false;public;0;4;;@Override public String name() {     return XPackField.CCR. }
false;public;0;4;;@Override public String description() {     return "Cross Cluster Replication". }
false;public;0;4;;@Override public boolean available() {     return licenseState != null && licenseState.isCcrAllowed(). }
false;public;0;4;;@Override public boolean enabled() {     return enabled. }
false;public;0;4;;@Override public Map<String, Object> nativeCodeInfo() {     return null. }
false;public;1;29;;@Override public void usage(ActionListener<XPackFeatureSet.Usage> listener) {     MetaData metaData = clusterService.state().metaData().     int numberOfFollowerIndices = 0.     long lastFollowerIndexCreationDate = 0L.     for (IndexMetaData imd : metaData) {         if (imd.getCustomData("ccr") != null) {             numberOfFollowerIndices++.             if (lastFollowerIndexCreationDate < imd.getCreationDate()) {                 lastFollowerIndexCreationDate = imd.getCreationDate().             }         }     }     AutoFollowMetadata autoFollowMetadata = metaData.custom(AutoFollowMetadata.TYPE).     int numberOfAutoFollowPatterns = autoFollowMetadata != null ? autoFollowMetadata.getPatterns().size() : 0.     Long lastFollowTimeInMillis.     if (numberOfFollowerIndices == 0) {         // Otherwise we would return a value that makes no sense.         lastFollowTimeInMillis = null.     } else {         lastFollowTimeInMillis = Math.max(0, Instant.now().toEpochMilli() - lastFollowerIndexCreationDate).     }     Usage usage = new Usage(available(), enabled(), numberOfFollowerIndices, numberOfAutoFollowPatterns, lastFollowTimeInMillis).     listener.onResponse(usage). }
false;public;0;3;;public int getNumberOfFollowerIndices() {     return numberOfFollowerIndices. }
false;public;0;3;;public int getNumberOfAutoFollowPatterns() {     return numberOfAutoFollowPatterns. }
false;public;0;3;;public Long getLastFollowTimeInMillis() {     return lastFollowTimeInMillis. }
false;public;1;12;;@Override public void writeTo(StreamOutput out) throws IOException {     super.writeTo(out).     out.writeVInt(numberOfFollowerIndices).     out.writeVInt(numberOfAutoFollowPatterns).     if (lastFollowTimeInMillis != null) {         out.writeBoolean(true).         out.writeVLong(lastFollowTimeInMillis).     } else {         out.writeBoolean(false).     } }
false;protected;2;9;;@Override protected void innerXContent(XContentBuilder builder, Params params) throws IOException {     super.innerXContent(builder, params).     builder.field("follower_indices_count", numberOfFollowerIndices).     builder.field("auto_follow_patterns_count", numberOfAutoFollowPatterns).     if (lastFollowTimeInMillis != null) {         builder.field("last_follow_time_in_millis", lastFollowTimeInMillis).     } }
false;public;1;9;;@Override public boolean equals(Object o) {     if (this == o)         return true.     if (o == null || getClass() != o.getClass())         return false.     Usage usage = (Usage) o.     return numberOfFollowerIndices == usage.numberOfFollowerIndices && numberOfAutoFollowPatterns == usage.numberOfAutoFollowPatterns && Objects.equals(lastFollowTimeInMillis, usage.lastFollowTimeInMillis). }
false;public;0;4;;@Override public int hashCode() {     return Objects.hash(numberOfFollowerIndices, numberOfAutoFollowPatterns, lastFollowTimeInMillis). }

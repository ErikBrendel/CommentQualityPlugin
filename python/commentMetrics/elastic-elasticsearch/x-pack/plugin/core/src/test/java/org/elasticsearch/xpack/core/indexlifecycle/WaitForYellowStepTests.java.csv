commented;modifiers;parameterAmount;loc;comment;code
false;protected;0;6;;@Override protected WaitForYellowStep createRandomInstance() {     StepKey stepKey = randomStepKey().     StepKey nextStepKey = randomStepKey().     return new WaitForYellowStep(stepKey, nextStepKey). }
false;protected;1;13;;@Override protected WaitForYellowStep mutateInstance(WaitForYellowStep instance) {     StepKey key = instance.getKey().     StepKey nextKey = instance.getNextStepKey().     if (randomBoolean()) {         key = new StepKey(key.getPhase(), key.getAction(), key.getName() + randomAlphaOfLength(5)).     } else {         nextKey = new StepKey(key.getPhase(), key.getAction(), key.getName() + randomAlphaOfLength(5)).     }     return new WaitForYellowStep(key, nextKey). }
false;protected;1;4;;@Override protected WaitForYellowStep copyInstance(WaitForYellowStep instance) {     return new WaitForYellowStep(instance.getKey(), instance.getNextStepKey()). }
false;public;0;22;;public void testConditionMet() {     IndexMetaData indexMetadata = IndexMetaData.builder("former-follower-index").settings(settings(Version.CURRENT)).numberOfShards(1).numberOfReplicas(0).build().     ShardRouting shardRouting = TestShardRouting.newShardRouting("index2", 0, "1", true, ShardRoutingState.STARTED).     IndexRoutingTable indexRoutingTable = IndexRoutingTable.builder(indexMetadata.getIndex()).addShard(shardRouting).build().     ClusterState clusterState = ClusterState.builder(new ClusterName("_name")).metaData(MetaData.builder().put(indexMetadata, true).build()).routingTable(RoutingTable.builder().add(indexRoutingTable).build()).build().     WaitForYellowStep step = new WaitForYellowStep(randomStepKey(), randomStepKey()).     ClusterStateWaitStep.Result result = step.isConditionMet(indexMetadata.getIndex(), clusterState).     assertThat(result.isComplete(), is(true)).     assertThat(result.getInfomationContext(), nullValue()). }
false;public;0;24;;public void testConditionNotMet() {     IndexMetaData indexMetadata = IndexMetaData.builder("former-follower-index").settings(settings(Version.CURRENT)).numberOfShards(1).numberOfReplicas(0).build().     ShardRouting shardRouting = TestShardRouting.newShardRouting("index2", 0, "1", true, ShardRoutingState.INITIALIZING).     IndexRoutingTable indexRoutingTable = IndexRoutingTable.builder(indexMetadata.getIndex()).addShard(shardRouting).build().     ClusterState clusterState = ClusterState.builder(new ClusterName("_name")).metaData(MetaData.builder().put(indexMetadata, true).build()).routingTable(RoutingTable.builder().add(indexRoutingTable).build()).build().     WaitForYellowStep step = new WaitForYellowStep(randomStepKey(), randomStepKey()).     ClusterStateWaitStep.Result result = step.isConditionMet(indexMetadata.getIndex(), clusterState).     assertThat(result.isComplete(), is(false)).     WaitForYellowStep.Info info = (WaitForYellowStep.Info) result.getInfomationContext().     assertThat(info, notNullValue()).     assertThat(info.getMessage(), equalTo("index is red. not all primary shards are active")). }
false;public;0;19;;public void testConditionNotMetNoIndexRoutingTable() {     IndexMetaData indexMetadata = IndexMetaData.builder("former-follower-index").settings(settings(Version.CURRENT)).numberOfShards(1).numberOfReplicas(0).build().     ClusterState clusterState = ClusterState.builder(new ClusterName("_name")).metaData(MetaData.builder().put(indexMetadata, true).build()).routingTable(RoutingTable.builder().build()).build().     WaitForYellowStep step = new WaitForYellowStep(randomStepKey(), randomStepKey()).     ClusterStateWaitStep.Result result = step.isConditionMet(indexMetadata.getIndex(), clusterState).     assertThat(result.isComplete(), is(false)).     WaitForYellowStep.Info info = (WaitForYellowStep.Info) result.getInfomationContext().     assertThat(info, notNullValue()).     assertThat(info.getMessage(), equalTo("index is red. no IndexRoutingTable")). }

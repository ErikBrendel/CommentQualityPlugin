# id;timestamp;commentText;codeText;commentWords;codeWords
DocumentSubsetReaderTests -> public void testCoreCacheKey() throws Exception;1524684173;Same test as in FieldSubsetReaderTests, test that core cache key (needed for NRT) is working;public void testCoreCacheKey() throws Exception {_        Directory dir = newDirectory()__        IndexWriterConfig iwc = new IndexWriterConfig(null)__        iwc.setMaxBufferedDocs(100)__        iwc.setMergePolicy(NoMergePolicy.INSTANCE)__        IndexWriter iw = new IndexWriter(dir, iwc)___        _        Document doc = new Document()__        Field idField = new StringField("id", "", Field.Store.NO)__        doc.add(idField)__        idField.setStringValue("0")__        iw.addDocument(doc)__        idField.setStringValue("1")__        iw.addDocument(doc)___        _        DirectoryReader ir = ElasticsearchDirectoryReader.wrap(DirectoryReader.open(iw), new ShardId("_index", "_na_", 0))__        ir = DocumentSubsetReader.wrap(ir, bitsetFilterCache, new MatchAllDocsQuery())__        assertEquals(2, ir.numDocs())__        assertEquals(1, ir.leaves().size())___        _        iw.deleteDocuments(new Term("id", "0"))__        DirectoryReader ir2 = DirectoryReader.openIfChanged(ir)___        _        assertEquals(1, ir2.numDocs())__        assertEquals(1, ir2.leaves().size())__        assertSame(ir.leaves().get(0).reader().getCoreCacheHelper().getKey(),_                ir2.leaves().get(0).reader().getCoreCacheHelper().getKey())__        _        assertNull(ir.leaves().get(0).reader().getReaderCacheHelper())__        assertNull(ir2.leaves().get(0).reader().getReaderCacheHelper())___        TestUtil.checkReader(ir)__        IOUtils.close(ir, ir2, iw, dir)__    };same,test,as,in,field,subset,reader,tests,test,that,core,cache,key,needed,for,nrt,is,working;public,void,test,core,cache,key,throws,exception,directory,dir,new,directory,index,writer,config,iwc,new,index,writer,config,null,iwc,set,max,buffered,docs,100,iwc,set,merge,policy,no,merge,policy,instance,index,writer,iw,new,index,writer,dir,iwc,document,doc,new,document,field,id,field,new,string,field,id,field,store,no,doc,add,id,field,id,field,set,string,value,0,iw,add,document,doc,id,field,set,string,value,1,iw,add,document,doc,directory,reader,ir,elasticsearch,directory,reader,wrap,directory,reader,open,iw,new,shard,id,0,ir,document,subset,reader,wrap,ir,bitset,filter,cache,new,match,all,docs,query,assert,equals,2,ir,num,docs,assert,equals,1,ir,leaves,size,iw,delete,documents,new,term,id,0,directory,reader,ir2,directory,reader,open,if,changed,ir,assert,equals,1,ir2,num,docs,assert,equals,1,ir2,leaves,size,assert,same,ir,leaves,get,0,reader,get,core,cache,helper,get,key,ir2,leaves,get,0,reader,get,core,cache,helper,get,key,assert,null,ir,leaves,get,0,reader,get,reader,cache,helper,assert,null,ir2,leaves,get,0,reader,get,reader,cache,helper,test,util,check,reader,ir,ioutils,close,ir,ir2,iw,dir
DocumentSubsetReaderTests -> public void testCoreCacheKey() throws Exception;1532947734;Same test as in FieldSubsetReaderTests, test that core cache key (needed for NRT) is working;public void testCoreCacheKey() throws Exception {_        Directory dir = newDirectory()__        IndexWriterConfig iwc = new IndexWriterConfig(null)__        iwc.setMaxBufferedDocs(100)__        iwc.setMergePolicy(NoMergePolicy.INSTANCE)__        IndexWriter iw = new IndexWriter(dir, iwc)___        _        Document doc = new Document()__        Field idField = new StringField("id", "", Field.Store.NO)__        doc.add(idField)__        idField.setStringValue("0")__        iw.addDocument(doc)__        idField.setStringValue("1")__        iw.addDocument(doc)___        _        DirectoryReader ir = ElasticsearchDirectoryReader.wrap(DirectoryReader.open(iw), new ShardId("_index", "_na_", 0))__        ir = DocumentSubsetReader.wrap(ir, bitsetFilterCache, new MatchAllDocsQuery())__        assertEquals(2, ir.numDocs())__        assertEquals(1, ir.leaves().size())___        _        iw.deleteDocuments(new Term("id", "0"))__        DirectoryReader ir2 = DirectoryReader.openIfChanged(ir)___        _        assertEquals(1, ir2.numDocs())__        assertEquals(1, ir2.leaves().size())__        assertSame(ir.leaves().get(0).reader().getCoreCacheHelper().getKey(),_                ir2.leaves().get(0).reader().getCoreCacheHelper().getKey())__        _        assertNull(ir.leaves().get(0).reader().getReaderCacheHelper())__        assertNull(ir2.leaves().get(0).reader().getReaderCacheHelper())___        TestUtil.checkReader(ir)__        IOUtils.close(ir, ir2, iw, dir)__    };same,test,as,in,field,subset,reader,tests,test,that,core,cache,key,needed,for,nrt,is,working;public,void,test,core,cache,key,throws,exception,directory,dir,new,directory,index,writer,config,iwc,new,index,writer,config,null,iwc,set,max,buffered,docs,100,iwc,set,merge,policy,no,merge,policy,instance,index,writer,iw,new,index,writer,dir,iwc,document,doc,new,document,field,id,field,new,string,field,id,field,store,no,doc,add,id,field,id,field,set,string,value,0,iw,add,document,doc,id,field,set,string,value,1,iw,add,document,doc,directory,reader,ir,elasticsearch,directory,reader,wrap,directory,reader,open,iw,new,shard,id,0,ir,document,subset,reader,wrap,ir,bitset,filter,cache,new,match,all,docs,query,assert,equals,2,ir,num,docs,assert,equals,1,ir,leaves,size,iw,delete,documents,new,term,id,0,directory,reader,ir2,directory,reader,open,if,changed,ir,assert,equals,1,ir2,num,docs,assert,equals,1,ir2,leaves,size,assert,same,ir,leaves,get,0,reader,get,core,cache,helper,get,key,ir2,leaves,get,0,reader,get,core,cache,helper,get,key,assert,null,ir,leaves,get,0,reader,get,reader,cache,helper,assert,null,ir2,leaves,get,0,reader,get,reader,cache,helper,test,util,check,reader,ir,ioutils,close,ir,ir2,iw,dir
DocumentSubsetReaderTests -> public void testCoreCacheKey() throws Exception;1534434117;Same test as in FieldSubsetReaderTests, test that core cache key (needed for NRT) is working;public void testCoreCacheKey() throws Exception {_        Directory dir = newDirectory()__        IndexWriterConfig iwc = new IndexWriterConfig(null)__        iwc.setMaxBufferedDocs(100)__        iwc.setMergePolicy(NoMergePolicy.INSTANCE)__        IndexWriter iw = new IndexWriter(dir, iwc)___        _        Document doc = new Document()__        Field idField = new StringField("id", "", Field.Store.NO)__        doc.add(idField)__        idField.setStringValue("0")__        iw.addDocument(doc)__        idField.setStringValue("1")__        iw.addDocument(doc)___        _        DirectoryReader ir = ElasticsearchDirectoryReader.wrap(DirectoryReader.open(iw), new ShardId("_index", "_na_", 0))__        ir = DocumentSubsetReader.wrap(ir, bitsetFilterCache, new MatchAllDocsQuery())__        assertEquals(2, ir.numDocs())__        assertEquals(1, ir.leaves().size())___        _        iw.deleteDocuments(new Term("id", "0"))__        DirectoryReader ir2 = DirectoryReader.openIfChanged(ir)___        _        assertEquals(1, ir2.numDocs())__        assertEquals(1, ir2.leaves().size())__        assertSame(ir.leaves().get(0).reader().getCoreCacheHelper().getKey(),_                ir2.leaves().get(0).reader().getCoreCacheHelper().getKey())__        _        assertNull(ir.leaves().get(0).reader().getReaderCacheHelper())__        assertNull(ir2.leaves().get(0).reader().getReaderCacheHelper())___        TestUtil.checkReader(ir)__        IOUtils.close(ir, ir2, iw, dir)__    };same,test,as,in,field,subset,reader,tests,test,that,core,cache,key,needed,for,nrt,is,working;public,void,test,core,cache,key,throws,exception,directory,dir,new,directory,index,writer,config,iwc,new,index,writer,config,null,iwc,set,max,buffered,docs,100,iwc,set,merge,policy,no,merge,policy,instance,index,writer,iw,new,index,writer,dir,iwc,document,doc,new,document,field,id,field,new,string,field,id,field,store,no,doc,add,id,field,id,field,set,string,value,0,iw,add,document,doc,id,field,set,string,value,1,iw,add,document,doc,directory,reader,ir,elasticsearch,directory,reader,wrap,directory,reader,open,iw,new,shard,id,0,ir,document,subset,reader,wrap,ir,bitset,filter,cache,new,match,all,docs,query,assert,equals,2,ir,num,docs,assert,equals,1,ir,leaves,size,iw,delete,documents,new,term,id,0,directory,reader,ir2,directory,reader,open,if,changed,ir,assert,equals,1,ir2,num,docs,assert,equals,1,ir2,leaves,size,assert,same,ir,leaves,get,0,reader,get,core,cache,helper,get,key,ir2,leaves,get,0,reader,get,core,cache,helper,get,key,assert,null,ir,leaves,get,0,reader,get,reader,cache,helper,assert,null,ir2,leaves,get,0,reader,get,reader,cache,helper,test,util,check,reader,ir,ioutils,close,ir,ir2,iw,dir
DocumentSubsetReaderTests -> public void testCoreCacheKey() throws Exception;1536314350;Same test as in FieldSubsetReaderTests, test that core cache key (needed for NRT) is working;public void testCoreCacheKey() throws Exception {_        Directory dir = newDirectory()__        IndexWriterConfig iwc = new IndexWriterConfig(null)__        iwc.setMaxBufferedDocs(100)__        iwc.setMergePolicy(NoMergePolicy.INSTANCE)__        IndexWriter iw = new IndexWriter(dir, iwc)___        _        Document doc = new Document()__        Field idField = new StringField("id", "", Field.Store.NO)__        doc.add(idField)__        idField.setStringValue("0")__        iw.addDocument(doc)__        idField.setStringValue("1")__        iw.addDocument(doc)___        _        DirectoryReader ir = ElasticsearchDirectoryReader.wrap(DirectoryReader.open(iw), new ShardId("_index", "_na_", 0))__        ir = DocumentSubsetReader.wrap(ir, bitsetFilterCache, new MatchAllDocsQuery())__        assertEquals(2, ir.numDocs())__        assertEquals(1, ir.leaves().size())___        _        iw.deleteDocuments(new Term("id", "0"))__        DirectoryReader ir2 = DirectoryReader.openIfChanged(ir)___        _        assertEquals(1, ir2.numDocs())__        assertEquals(1, ir2.leaves().size())__        assertSame(ir.leaves().get(0).reader().getCoreCacheHelper().getKey(),_                ir2.leaves().get(0).reader().getCoreCacheHelper().getKey())__        _        assertNull(ir.leaves().get(0).reader().getReaderCacheHelper())__        assertNull(ir2.leaves().get(0).reader().getReaderCacheHelper())___        TestUtil.checkReader(ir)__        IOUtils.close(ir, ir2, iw, dir)__    };same,test,as,in,field,subset,reader,tests,test,that,core,cache,key,needed,for,nrt,is,working;public,void,test,core,cache,key,throws,exception,directory,dir,new,directory,index,writer,config,iwc,new,index,writer,config,null,iwc,set,max,buffered,docs,100,iwc,set,merge,policy,no,merge,policy,instance,index,writer,iw,new,index,writer,dir,iwc,document,doc,new,document,field,id,field,new,string,field,id,field,store,no,doc,add,id,field,id,field,set,string,value,0,iw,add,document,doc,id,field,set,string,value,1,iw,add,document,doc,directory,reader,ir,elasticsearch,directory,reader,wrap,directory,reader,open,iw,new,shard,id,0,ir,document,subset,reader,wrap,ir,bitset,filter,cache,new,match,all,docs,query,assert,equals,2,ir,num,docs,assert,equals,1,ir,leaves,size,iw,delete,documents,new,term,id,0,directory,reader,ir2,directory,reader,open,if,changed,ir,assert,equals,1,ir2,num,docs,assert,equals,1,ir2,leaves,size,assert,same,ir,leaves,get,0,reader,get,core,cache,helper,get,key,ir2,leaves,get,0,reader,get,core,cache,helper,get,key,assert,null,ir,leaves,get,0,reader,get,reader,cache,helper,assert,null,ir2,leaves,get,0,reader,get,reader,cache,helper,test,util,check,reader,ir,ioutils,close,ir,ir2,iw,dir

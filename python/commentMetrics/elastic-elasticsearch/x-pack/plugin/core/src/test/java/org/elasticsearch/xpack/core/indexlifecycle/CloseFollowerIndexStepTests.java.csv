commented;modifiers;parameterAmount;loc;comment;code
false;public;1;4;;@Override public void onResponse(boolean complete) {     completed[0] = complete. }
false;public;1;4;;@Override public void onFailure(Exception e) {     failure[0] = e. }
false;public;0;40;;public void testCloseFollowingIndex() {     IndexMetaData indexMetadata = IndexMetaData.builder("follower-index").settings(settings(Version.CURRENT).put(LifecycleSettings.LIFECYCLE_INDEXING_COMPLETE, "true")).putCustom(CCR_METADATA_KEY, Collections.emptyMap()).numberOfShards(1).numberOfReplicas(0).build().     Client client = Mockito.mock(Client.class).     AdminClient adminClient = Mockito.mock(AdminClient.class).     Mockito.when(client.admin()).thenReturn(adminClient).     IndicesAdminClient indicesClient = Mockito.mock(IndicesAdminClient.class).     Mockito.when(adminClient.indices()).thenReturn(indicesClient).     Mockito.doAnswer(invocation -> {         CloseIndexRequest closeIndexRequest = (CloseIndexRequest) invocation.getArguments()[0].         assertThat(closeIndexRequest.indices()[0], equalTo("follower-index")).         @SuppressWarnings("unchecked")         ActionListener<CloseIndexResponse> listener = (ActionListener<CloseIndexResponse>) invocation.getArguments()[1].         listener.onResponse(new CloseIndexResponse(true, true)).         return null.     }).when(indicesClient).close(Mockito.any(), Mockito.any()).     Boolean[] completed = new Boolean[1].     Exception[] failure = new Exception[1].     CloseFollowerIndexStep step = new CloseFollowerIndexStep(randomStepKey(), randomStepKey(), client).     step.performAction(indexMetadata, null, null, new AsyncActionStep.Listener() {          @Override         public void onResponse(boolean complete) {             completed[0] = complete.         }          @Override         public void onFailure(Exception e) {             failure[0] = e.         }     }).     assertThat(completed[0], is(true)).     assertThat(failure[0], nullValue()). }
false;public;1;4;;@Override public void onResponse(boolean complete) {     completed[0] = complete. }
false;public;1;4;;@Override public void onFailure(Exception e) {     failure[0] = e. }
false;public;0;43;;public void testCloseFollowingIndexFailed() {     IndexMetaData indexMetadata = IndexMetaData.builder("follower-index").settings(settings(Version.CURRENT).put(LifecycleSettings.LIFECYCLE_INDEXING_COMPLETE, "true")).putCustom(CCR_METADATA_KEY, Collections.emptyMap()).numberOfShards(1).numberOfReplicas(0).build().     // Mock pause follow api call:     Client client = Mockito.mock(Client.class).     AdminClient adminClient = Mockito.mock(AdminClient.class).     Mockito.when(client.admin()).thenReturn(adminClient).     IndicesAdminClient indicesClient = Mockito.mock(IndicesAdminClient.class).     Mockito.when(adminClient.indices()).thenReturn(indicesClient).     Exception error = new RuntimeException().     Mockito.doAnswer(invocation -> {         CloseIndexRequest closeIndexRequest = (CloseIndexRequest) invocation.getArguments()[0].         assertThat(closeIndexRequest.indices()[0], equalTo("follower-index")).         ActionListener listener = (ActionListener) invocation.getArguments()[1].         listener.onFailure(error).         return null.     }).when(indicesClient).close(Mockito.any(), Mockito.any()).     Boolean[] completed = new Boolean[1].     Exception[] failure = new Exception[1].     CloseFollowerIndexStep step = new CloseFollowerIndexStep(randomStepKey(), randomStepKey(), client).     step.performAction(indexMetadata, null, null, new AsyncActionStep.Listener() {          @Override         public void onResponse(boolean complete) {             completed[0] = complete.         }          @Override         public void onFailure(Exception e) {             failure[0] = e.         }     }).     assertThat(completed[0], nullValue()).     assertThat(failure[0], sameInstance(error)).     Mockito.verify(indicesClient).close(Mockito.any(), Mockito.any()).     Mockito.verifyNoMoreInteractions(indicesClient). }
false;protected;0;6;;@Override protected CloseFollowerIndexStep createRandomInstance() {     Step.StepKey stepKey = randomStepKey().     Step.StepKey nextStepKey = randomStepKey().     return new CloseFollowerIndexStep(stepKey, nextStepKey, Mockito.mock(Client.class)). }
false;protected;1;13;;@Override protected CloseFollowerIndexStep mutateInstance(CloseFollowerIndexStep instance) {     Step.StepKey key = instance.getKey().     Step.StepKey nextKey = instance.getNextStepKey().     if (randomBoolean()) {         key = new Step.StepKey(key.getPhase(), key.getAction(), key.getName() + randomAlphaOfLength(5)).     } else {         nextKey = new Step.StepKey(key.getPhase(), key.getAction(), key.getName() + randomAlphaOfLength(5)).     }     return new CloseFollowerIndexStep(key, nextKey, instance.getClient()). }
false;protected;1;4;;@Override protected CloseFollowerIndexStep copyInstance(CloseFollowerIndexStep instance) {     return new CloseFollowerIndexStep(instance.getKey(), instance.getNextStepKey(), instance.getClient()). }

commented;modifiers;parameterAmount;loc;comment;code
false;public;0;15;;@Test public void testShouldShutdownOnFatalError() throws Exception {     try (TaskManagerRunner taskManagerRunner = createTaskManagerRunner(createConfiguration())) {         taskManagerRunner.start().         final SystemExitTrackingSecurityManager systemExitTrackingSecurityManager = runWithSystemExitTracking(() -> {             taskManagerRunner.onFatalError(new RuntimeException()).             taskManagerRunner.getTerminationFuture().get(30, TimeUnit.SECONDS).         }).         assertThat(systemExitTrackingSecurityManager.getCount(), is(equalTo(1))).         assertThat(systemExitTrackingSecurityManager.getStatus(), is(equalTo(TaskManagerRunner.RUNTIME_FAILURE_RETURN_CODE))).     } }
false;public;0;17;;@Test public void testShouldShutdownIfRegistrationWithJobManagerFails() throws Exception {     final Configuration configuration = createConfiguration().     configuration.setString(TaskManagerOptions.REGISTRATION_TIMEOUT, "10 ms").     try (TaskManagerRunner taskManagerRunner = createTaskManagerRunner(configuration)) {         final SystemExitTrackingSecurityManager systemExitTrackingSecurityManager = runWithSystemExitTracking(() -> {             taskManagerRunner.start().             taskManagerRunner.getTerminationFuture().get().         }).         assertThat(systemExitTrackingSecurityManager.getCount(), is(equalTo(1))).         assertThat(systemExitTrackingSecurityManager.getStatus(), is(equalTo(TaskManagerRunner.RUNTIME_FAILURE_RETURN_CODE))).     } }
false;private,static;1;5;;private static SystemExitTrackingSecurityManager runWithSystemExitTracking(final RunnableWithException runnable) {     final SystemExitTrackingSecurityManager systemExitTrackingSecurityManager = new SystemExitTrackingSecurityManager().     SecurityManagerContext.runWithSecurityManager(systemExitTrackingSecurityManager, runnable).     return systemExitTrackingSecurityManager. }
false;private,static;0;6;;private static Configuration createConfiguration() {     final Configuration configuration = new Configuration().     configuration.setString(JobManagerOptions.ADDRESS, "localhost").     configuration.setString(TaskManagerOptions.HOST, "localhost").     return configuration. }
false;private,static;1;3;;private static TaskManagerRunner createTaskManagerRunner(final Configuration configuration) throws Exception {     return new TaskManagerRunner(configuration, ResourceID.generate()). }

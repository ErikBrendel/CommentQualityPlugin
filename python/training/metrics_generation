import lizard
from pandas import DataFrame


def add_metrics_to(frame: DataFrame) -> DataFrame:
    """modifies dataframe in place"""
    frame['metrics'] = frame.apply(
        lambda row: lizard.analyze_file.analyze_source_code(
            "placeholder.java",
            row['code']),
        axis=1)
    return frame


if __name__ == '__main__':
    l = lizard.analyze_file.analyze_source_code("placeholder.java",
                                                'private int done(int i){\nreturn 4\n}')
    frame = DataFrame({'code': ['public void do(){}', 'private int done(int i){return 4}',
                                'private int indent(int i){\nif(i>10)\n\treturn '
                                '4\nelse\n\treturn3}']})
    frame2 = add_metrics_to(frame)
    print(frame2)
